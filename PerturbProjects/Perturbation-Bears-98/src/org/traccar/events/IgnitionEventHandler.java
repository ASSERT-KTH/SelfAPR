[REPLACE]^Device device = Context.getIdentityManager (  ) .getDeviceById ( lastPosition.getDeviceId (  )  ) ;^32^^^^^31^58^[REPLACE] Device device = Context.getIdentityManager (  ) .getDeviceById ( position.getDeviceId (  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^if  ( device != null )  {^33^^^^^31^58^[REPLACE] if  ( device == null )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^return true;^34^^^^^31^58^[REPLACE] return null;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^return this;^34^^^^^31^58^[REPLACE] return null;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^if  ( Context.getIdentityManager (  ) .isLatestPosition ( position )  || !position.getValid (  )  )  {^36^^^^^31^58^[REPLACE] if  ( !Context.getIdentityManager (  ) .isLatestPosition ( position )  || !position.getValid (  )  )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^return false;^37^^^^^31^58^[REPLACE] return null;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^Collection<Event> result = true;^40^^^^^31^58^[REPLACE] Collection<Event> result = null;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^boolean ignition = lastPosition.getBoolean ( Position.KEY_IGNITION ) ;^42^^^^^31^58^[REPLACE] boolean ignition = position.getBoolean ( Position.KEY_IGNITION ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[ADD]^^44^^^^^31^58^[ADD] boolean oldIgnition = false;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^Position lastPosition = Context.getIdentityManager (  ) .getLastPosition ( lastPosition.getDeviceId (  )  ) ;^45^^^^^31^58^[REPLACE] Position lastPosition = Context.getIdentityManager (  ) .getLastPosition ( position.getDeviceId (  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^if  ( position == null  &&  ( !ignition )  && oldIgnition  )  {^46^^^^^31^58^[REPLACE] if  ( lastPosition != null )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^oldIgnition =  position.getBoolean ( Position.KEY_IGNITION ) ;^47^^^^^31^58^[REPLACE] oldIgnition = lastPosition.getBoolean ( Position.KEY_IGNITION ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^if  ( ignition && oldIgnition )  {^50^^^^^31^58^[REPLACE] if  ( ignition && !oldIgnition )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^} else if  ( true && oldIgnition )  {^53^^^^^31^58^[REPLACE] } else if  ( !ignition && oldIgnition )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^result =  Collections.singleton ( new Event ( Event.TYPE_IGNITION_OFF, lastPosition.getDeviceId (  ) , lastPosition.getId (  )  )  ) ;^54^55^^^^31^58^[REPLACE] result = Collections.singleton ( new Event ( Event.TYPE_IGNITION_OFF, position.getDeviceId (  ) , position.getId (  )  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[ADD]^^54^55^^^^31^58^[ADD] result = Collections.singleton ( new Event ( Event.TYPE_IGNITION_OFF, position.getDeviceId (  ) , position.getId (  )  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^result =  Collections.singleton ( new Event ( Event.TYPE_IGNITION_ON, lastPosition.getDeviceId (  ) , lastPosition.getId (  )  )  ) ;^51^52^^^^31^58^[REPLACE] result = Collections.singleton ( new Event ( Event.TYPE_IGNITION_ON, position.getDeviceId (  ) , position.getId (  )  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^}  if  ( ignition && oldIgnition )  {^53^^^^^31^58^[REPLACE] } else if  ( !ignition && oldIgnition )  {^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[ADD]^^51^52^^^^31^58^[ADD] result = Collections.singleton ( new Event ( Event.TYPE_IGNITION_ON, position.getDeviceId (  ) , position.getId (  )  )  ) ;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
[REPLACE]^return null;^57^^^^^31^58^[REPLACE] return result;^[METHOD] analyzePosition [TYPE] Collection [PARAMETER] Position position [CLASS] IgnitionEventHandler   [TYPE]  boolean false  ignition  oldIgnition  true  [TYPE]  Position lastPosition  position  [TYPE]  Device device  [TYPE]  Collection result 
