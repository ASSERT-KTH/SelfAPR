[REPLACE]^public static  int MSG_LOGIN_REQUEST = 0x80;^38^^^^^^^[REPLACE] public static final int MSG_LOGIN_REQUEST = 0x80;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^public static final int MSG_LOGIN_REQUEST_2  = null ;^39^^^^^^^[REPLACE] public static final int MSG_LOGIN_REQUEST_2 = 0x21;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^public static final  short  MSG_LOGIN_RESPONSE = 0x00;^40^^^^^^^[REPLACE] public static final int MSG_LOGIN_RESPONSE = 0x00;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^public  final int MSG_HEARTBEAT_REQUEST = 0xF0;^41^^^^^^^[REPLACE] public static final int MSG_HEARTBEAT_REQUEST = 0xF0;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^public static final int MSG_HEARTBEAT_RESPONSE  = null ;^42^^^^^^^[REPLACE] public static final int MSG_HEARTBEAT_RESPONSE = 0xFF;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^public static final int MODE_GPRS ;^46^^^^^^^[REPLACE] public static final int MODE_GPRS = 0x30;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^private static final  short  MODE_GPRS_SMS = 0x33;^47^^^^^^^[REPLACE] public static final int MODE_GPRS_SMS = 0x33;^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^private static final Pattern PATTERN ;^49^50^51^52^^49^60^[REPLACE] private static final Pattern PATTERN = new PatternBuilder (  ) .text ( " ( " ) .expression ( "[A-Z]+" ) .number ( " ( dd )  ( dd )  ( dd ) " )^ [CLASS] Tk102ProtocolDecoder  
[REPLACE]^ChannelBuffer response = dynamicBuffer (  )  ;^79^^^^^77^140^[REPLACE] ChannelBuffer buf =  ( ChannelBuffer )  msg;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^buf.readBytes ( 1L ) ;^81^^^^^77^140^[REPLACE] buf.skipBytes ( 1 ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^int length = buf.readUnsignedByte (  )  ;^82^^^^^77^140^[REPLACE] int type = buf.readUnsignedByte (  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^83^^^^^77^140^[ADD] ChannelBuffer dataSequence = buf.readBytes ( 10 ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^int type = buf.readUnsignedByte (  )  ;^84^^^^^77^140^[REPLACE] int length = buf.readUnsignedByte (  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( type == true && type == true )  {^86^^^^^77^140^[REPLACE] if  ( type == MSG_LOGIN_REQUEST || type == MSG_LOGIN_REQUEST_2 )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^}  if  (   MSG_HEARTBEAT_REQUEST )  {^104^^^^^77^140^[REPLACE] } else if  ( type == MSG_HEARTBEAT_REQUEST )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( deviceSession != true )  {^111^^^^^104^137^[REPLACE] if  ( deviceSession == null )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return false;^112^^^^^104^137^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( !parser .nextCoordinate (  )   )  {^116^^^^^104^137^[REPLACE] if  ( !parser.matches (  )  )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^116^117^118^^^104^137^[ADD] if  ( !parser.matches (  )  )  { return null; }^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return false;^117^^^^^104^137^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return this;^112^^^^^104^137^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return true;^117^^^^^104^137^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^Parser parser = new Parser ( PATTERN, buf.readBytes ( length ) .text ( StandardCharsets.US_ASCII )  ) ;^115^^^^^104^137^[REPLACE] Parser parser = new Parser ( PATTERN, buf.readBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^DateBuilder dateBuilder = new DateBuilder (  ) .setTime ( parser .next (  )  , parser^124^125^^^^104^137^[REPLACE] DateBuilder dateBuilder = new DateBuilder (  ) .setTime ( parser.nextInt (  ) , parser.nextInt (  ) , parser.nextInt (  )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.skipBytes ( length )  ) ;^106^^^^^77^140^[REPLACE] sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.readBytes ( length )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^buf.readBytes ( 10 )  ;^106^^^^^77^140^[REPLACE] sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.readBytes ( length )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( deviceSession != null )  {^111^^^^^77^140^[REPLACE] if  ( deviceSession == null )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return false;^112^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( parser.matches (  )  )  {^116^^^^^77^140^[REPLACE] if  ( !parser.matches (  )  )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return false;^117^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return true;^117^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^Parser parser = new Parser ( PATTERN, dataSequence.skipBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^115^^^^^77^140^[REPLACE] Parser parser = new Parser ( PATTERN, buf.readBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^120^^^^^77^140^[ADD] Position position = new Position (  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^DateBuilder dateBuilder = new DateBuilder (  ) .setTime ( parser.next (  ) , parser.nextInt (  ) , parser.nextInt (  )  ) ;^124^125^^^^77^140^[REPLACE] DateBuilder dateBuilder = new DateBuilder (  ) .setTime ( parser.nextInt (  ) , parser.nextInt (  ) , parser.nextInt (  )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  (   MSG_LOGIN_REQUEST )  {^91^^^^^77^140^[REPLACE] if  ( type == MSG_LOGIN_REQUEST )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^id = data.toString ( US_ASCII )  ;^94^^^^^91^95^[REPLACE] id = data.copy ( 1, 15 ) .toString ( StandardCharsets.US_ASCII ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^id = data.copy ( 1, 15 ) .toString ( US_ASCII )  ;^92^^^^^77^140^[REPLACE] id =  data.toString ( StandardCharsets.US_ASCII ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( getDeviceSession ( channel, remoteAddress, id )  == null )  {^97^^^^^77^140^[REPLACE] if  ( getDeviceSession ( channel, remoteAddress, id )  != null )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^ChannelBuffer buf =  (  ( ChannelBuffer )   ( msg )  )  ;^98^^^^^77^140^[REPLACE] ChannelBuffer response = ChannelBuffers.dynamicBuffer (  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^92^^^^^77^140^[ADD] id =  data.toString ( StandardCharsets.US_ASCII ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^id = data.toString ( US_ASCII )  ;^94^^^^^77^140^[REPLACE] id = data.copy ( 1, 15 ) .toString ( StandardCharsets.US_ASCII ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^ChannelBuffer data = buf.readBytes ( MSG_REPORT_ONCE ) ;^88^^^^^77^140^[REPLACE] ChannelBuffer data = buf.readBytes ( length ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( type  &&  MSG_LOGIN_REQUEST )  {^91^^^^^77^140^[REPLACE] if  ( type == MSG_LOGIN_REQUEST )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^id = data.copy ( 3, 35 ) .toString ( StandardCharsets.US_ASCII ) ;^94^^^^^91^95^[REPLACE] id = data.copy ( 1, 15 ) .toString ( StandardCharsets.US_ASCII ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^}  if  (MSG_REPORT_ONCE  ) {^104^^^^^77^140^[REPLACE] } else if  ( type == MSG_HEARTBEAT_REQUEST )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^if  ( deviceSession != null )  {^111^^^^^104^137^[REPLACE] if  ( deviceSession == null )  {^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^111^112^113^^^104^137^[ADD] if  ( deviceSession == null )  { return null; }^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^110^^^^^104^137^[ADD] DeviceSession deviceSession = getDeviceSession ( channel, remoteAddress ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^Parser parser = new Parser ( PATTERN, buf.readBytes ( MSG_REPORT_ONCE ) .toString ( StandardCharsets.US_ASCII )  ) ;^115^^^^^104^137^[REPLACE] Parser parser = new Parser ( PATTERN, buf.readBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^124^125^^^^104^137^[ADD] DateBuilder dateBuilder = new DateBuilder (  ) .setTime ( parser.nextInt (  ) , parser.nextInt (  ) , parser.nextInt (  )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.readBytes ( MSG_REPORT_ONCE )  ) ;^106^^^^^77^140^[REPLACE] sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.readBytes ( length )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[ADD]^^106^^^^^77^140^[ADD] sendResponse ( channel, MSG_HEARTBEAT_RESPONSE, dataSequence, buf.readBytes ( length )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return true;^112^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return this;^112^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return this;^117^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^ChannelBuffer dataSequence = buf.readBytes ( 10 )  ;^88^^^^^77^140^[REPLACE] ChannelBuffer data = buf.readBytes ( length ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^Parser parser = new Parser ( PATTERN, dataSequence.readBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^115^^^^^77^140^[REPLACE] Parser parser = new Parser ( PATTERN, buf.readBytes ( length ) .toString ( StandardCharsets.US_ASCII )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
[REPLACE]^return true;^139^^^^^77^140^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] Channel channel SocketAddress remoteAddress Object msg [CLASS] Tk102ProtocolDecoder   [TYPE]  Pattern PATTERN  [TYPE]  boolean false  true  [TYPE]  DeviceSession deviceSession  [TYPE]  Position position  [TYPE]  DateBuilder dateBuilder  [TYPE]  Channel channel  [TYPE]  Object msg  [TYPE]  String id  [TYPE]  SocketAddress remoteAddress  [TYPE]  int MODE_GPRS  MODE_GPRS_SMS  MSG_HEARTBEAT_REQUEST  MSG_HEARTBEAT_RESPONSE  MSG_LOGIN_REQUEST  MSG_LOGIN_REQUEST_2  MSG_LOGIN_RESPONSE  MSG_REPORT_INTERVAL  MSG_REPORT_ONCE  length  type  [TYPE]  ChannelBuffer buf  data  dataSequence  response  [TYPE]  Parser parser 
