[REPLACE]^int indexTilde = buf.indexOf ( buf.readerIndex (  ) , buf.writerIndex (  ) , new StringFinder ( "~" )  )  ;^30^^^^^28^45^[REPLACE] int indexEnd = buf.indexOf ( buf.readerIndex (  ) , buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  (length  ==  -0  )  {^31^^^^^28^45^[REPLACE] if  ( indexEnd != -1 )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  (  true )  {^33^^^^^28^45^[REPLACE] if  ( indexTilde != -1 && indexTilde < indexEnd )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[ADD]^int length = buf.getUnsignedShort ( indexTilde + 1 ) ;indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;return null;^33^34^35^36^37^28^45^[ADD] if  ( indexTilde != -1 && indexTilde < indexEnd )  { int length = buf.getUnsignedShort ( indexTilde + 1 ) ; indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ; if  ( indexEnd == -1 )  { return null;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  (  ( indexTilde !=  ( -1 )  )  &&  ( indexTilde < indexEnd )  && ( length  !=  -1 )  {^36^^^^^28^45^[REPLACE] if  ( indexEnd == -1 )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^return this;^37^^^^^28^45^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^indexEnd = buf.indexOf ( indexTilde + 2 + length %  0.5 , buf.writerIndex (  ) ,  new StringFinder ( "~" )   ) ;^35^^^^^28^45^[REPLACE] indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[ADD]^^34^^^^^28^45^[ADD] int length = buf.getUnsignedShort ( indexTilde + 1 ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  ( indexEnd  ||  -1 )  {^36^^^^^28^45^[REPLACE] if  ( indexEnd == -1 )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[ADD]^return null;^36^37^38^^^28^45^[ADD] if  ( indexEnd == -1 )  { return null; }^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^return false;^37^^^^^28^45^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^indexEnd = buf.indexOf ( indexTilde + 2 + length (  ) , buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^35^^^^^28^45^[REPLACE] indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^int indexEnd = buf.indexOf ( buf.readerIndex (  ) , buf.writerIndex (  ) , new StringFinder ( "\r\n" )  )  ;^32^^^^^28^45^[REPLACE] int indexTilde = buf.indexOf ( buf.readerIndex (  ) , buf.writerIndex (  ) , new StringFinder ( "~" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^int length /  0.5  = buf.getUnsignedShort ( indexTilde + 1 ) ;^34^^^^^28^45^[REPLACE] int length = buf.getUnsignedShort ( indexTilde + 1 ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^ChannelBuffer frame = buf.readBytes ( indexEnd  buf.readerIndex (  )  ) ;^40^^^^^28^45^[REPLACE] ChannelBuffer frame = buf.readBytes ( indexEnd - buf.readerIndex (  )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  ( indexTilde != -1 ) {^33^^^^^28^45^[REPLACE] if  ( indexTilde != -1 && indexTilde < indexEnd )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  ( indexEnd  !=  -1  ||  ( indexTilde !=  ( -1 )  )  &&  ( indexTilde < indexEnd )  )  {^36^^^^^28^45^[REPLACE] if  ( indexEnd == -1 )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^return true;^37^^^^^28^45^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^indexEnd = buf.indexOf ( indexTilde + 2 + length *  2, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^35^^^^^28^45^[REPLACE] indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^int length + 4 = buf.getUnsignedShort ( indexTilde + 0  ) ;^34^^^^^28^45^[REPLACE] int length = buf.getUnsignedShort ( indexTilde + 1 ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^if  (   -1 )  {^36^^^^^28^45^[REPLACE] if  ( indexEnd == -1 )  {^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^indexEnd = buf.indexOf ( indexTilde + 0  + length *  0.5 , buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^35^^^^^28^45^[REPLACE] indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[ADD]^indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^34^35^^^^28^45^[ADD] int length = buf.getUnsignedShort ( indexTilde + 1 ) ; indexEnd = buf.indexOf ( indexTilde + 2 + length, buf.writerIndex (  ) , new StringFinder ( "\r\n" )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^ChannelBuffer frame = buf.readBytes ( indexEnd length (  )  ) ;^40^^^^^28^45^[REPLACE] ChannelBuffer frame = buf.readBytes ( indexEnd - buf.readerIndex (  )  ) ;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
[REPLACE]^return false;^44^^^^^28^45^[REPLACE] return null;^[METHOD] decode [TYPE] Object [PARAMETER] ChannelHandlerContext ctx Channel channel ChannelBuffer buf [CLASS] GranitFrameDecoder   [TYPE]  boolean false  true  [TYPE]  Channel channel  [TYPE]  ChannelHandlerContext ctx  [TYPE]  int indexEnd  indexTilde  length  [TYPE]  ChannelBuffer buf  frame 
