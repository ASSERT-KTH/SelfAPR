[REPLACE]^Context.getPermissionsManager (  ) .checkDevice ( getUserId (  )  ) ;^60^^^^^59^75^[REPLACE] Context.getPermissionsManager (  ) .checkReadonly ( getUserId (  )  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REMOVE]^getPermissionsManager (  ) .checkAdmin ( getUserId (  )  )  ;^60^^^^^59^75^[REMOVE] ^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getAliasesManager (  ) .checkReadonly ( getUserId (  )  ) ;^60^^^^^59^75^[REPLACE] Context.getPermissionsManager (  ) .checkReadonly ( getUserId (  )  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[ADD]^^60^^^^^59^75^[ADD] Context.getPermissionsManager (  ) .checkReadonly ( getUserId (  )  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^int deviceCount = getPermissionsManager (  ) .getDevicePermissions ( getUserId (  )  ) .size (  )  ;^61^^^^^59^75^[REPLACE] int deviceLimit = Context.getPermissionsManager (  ) .getUser ( getUserId (  )  ) .getDeviceLimit (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^if  ( deviceLimit  ==  0 * 3 )  {^62^^^^^59^75^[REPLACE] if  ( deviceLimit != 0 )  {^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[ADD]^^62^63^64^65^66^59^75^[ADD] if  ( deviceLimit != 0 )  { int deviceCount = Context.getPermissionsManager (  ) .getDevicePermissions ( getUserId (  )  ) .size (  ) ; if  ( deviceCount >= deviceLimit )  { throw new SecurityException  (" ")  ; }^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^if  ( deviceCount  <=  deviceLimit  || deviceLimit != 0  )  {^64^^^^^59^75^[REPLACE] if  ( deviceCount >= deviceLimit )  {^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[ADD]^^65^^^^^59^75^[ADD] throw new SecurityException  (" ")  ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^int deviceLimit = getPermissionsManager (  ) .getUser ( getUserId (  )  ) .getDeviceLimit (  )  ;^63^^^^^59^75^[REPLACE] int deviceCount = Context.getPermissionsManager (  ) .getDevicePermissions ( getUserId (  )  ) .size (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^return ;^65^^^^^59^75^[REPLACE] throw new SecurityException  (" ")  ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^if  ( deviceCount  !=  deviceLimit )  {^64^^^^^59^75^[REPLACE] if  ( deviceCount >= deviceLimit )  {^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getDeviceManager (  ) .updateDevice ( entity ) ;^68^^^^^59^75^[REPLACE] Context.getDeviceManager (  ) .addDevice ( entity ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getGeofenceManager (  ) .addDevice ( entity ) ;^68^^^^^59^75^[REPLACE] Context.getDeviceManager (  ) .addDevice ( entity ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context .getDeviceManager (  )  .linkDevice ( getUserId (  ) , entity.getId (  )  ) ;^69^^^^^59^75^[REPLACE] Context.getDataManager (  ) .linkDevice ( getUserId (  ) , entity.getId (  )  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getDeviceManager (  ) .linkDevice ( getUserId (  ) , entity.getId (  )  ) ;^69^^^^^59^75^[REPLACE] Context.getDataManager (  ) .linkDevice ( getUserId (  ) , entity.getId (  )  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getPermissionsManager (  ) .getDevices (  ) ;^70^^^^^59^75^[REPLACE] Context.getPermissionsManager (  ) .refreshPermissions (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context .getAliasesManager (  )  .refreshPermissions (  ) ;^70^^^^^59^75^[REPLACE] Context.getPermissionsManager (  ) .refreshPermissions (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^if  ( Context.getGeofenceManager (  )  == null )  {^71^^^^^59^75^[REPLACE] if  ( Context.getGeofenceManager (  )  != null )  {^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^Context.getDeviceManager (  ) .refresh (  ) ;^72^^^^^59^75^[REPLACE] Context.getGeofenceManager (  ) .refresh (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[ADD]^^72^^^^^59^75^[ADD] Context.getGeofenceManager (  ) .refresh (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^( getGeofenceManager (  )  )  ;^72^^^^^59^75^[REPLACE] Context.getGeofenceManager (  ) .refresh (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
[REPLACE]^return noContent (  ) .build (  )  ;^74^^^^^59^75^[REPLACE] return Response.ok ( entity ) .build (  ) ;^[METHOD] add [TYPE] Response [PARAMETER] Device entity [CLASS] DeviceResource   [TYPE]  boolean false  true  [TYPE]  Device entity  [TYPE]  int deviceCount  deviceLimit 
