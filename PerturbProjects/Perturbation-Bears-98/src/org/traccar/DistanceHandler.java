[ADD]^^36^37^^^^34^60^[ADD] double distance = 0.0; double totalDistance = 0.0;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^double totalDistance = 0.0D;^37^^^^^34^60^[REPLACE] double totalDistance = 0.0;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^Position last = getLastPosition ( position.getDouble (  )  ) ;^39^^^^^34^60^[REPLACE] Position last = getLastPosition ( position.getDeviceId (  )  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^if  ( last == this  )  {^40^^^^^34^60^[REPLACE] if  ( last != null )  {^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^if  ( position.getAttributes (  ) .containsKey ( Position.KEY_DISTANCE )  )  {^43^^^^^34^60^[REPLACE] if  ( !position.getAttributes (  ) .containsKey ( Position.KEY_DISTANCE )  )  {^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[ADD]^^43^44^45^46^^34^60^[ADD] if  ( !position.getAttributes (  ) .containsKey ( Position.KEY_DISTANCE )  )  { distance = DistanceCalculator.distance ( position.getLatitude (  ) , position.getLongitude (  ) , last.getLatitude (  ) , last.getLongitude (  )  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^totalDistance = last.getDouble ( Position.KEY_TOTAL_DISTANCE )  ;^50^^^^^43^51^[REPLACE] distance = position.getDouble ( Position.KEY_DISTANCE ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^distance =  DistanceCalculator.distance ( last.getLatitude (  ) , last.getLongitude (  ) , last.getLatitude (  ) , last.getLongitude (  )  ) ;^44^45^46^^^34^60^[REPLACE] distance = DistanceCalculator.distance ( position.getLatitude (  ) , position.getLongitude (  ) , last.getLatitude (  ) , last.getLongitude (  )  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^distance = BigDecimal.valueOf ( distance ) .setScale ( 2 * 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^48^^^^^34^60^[REPLACE] distance = BigDecimal.valueOf ( distance ) .setScale ( 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[ADD]^^41^^^^^34^60^[ADD] totalDistance = last.getDouble ( Position.KEY_TOTAL_DISTANCE ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^distance = BigDecimal.valueOf ( distance ) .setScale ( 1, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^48^^^^^34^60^[REPLACE] distance = BigDecimal.valueOf ( distance ) .setScale ( 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^totalDistance = last.getDouble ( Position.KEY_TOTAL_DISTANCE )  ;^50^^^^^34^60^[REPLACE] distance = position.getDouble ( Position.KEY_DISTANCE ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[ADD]^^48^^^^^34^60^[ADD] distance = BigDecimal.valueOf ( distance ) .setScale ( 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^distance = position.getDouble ( Position.KEY_DISTANCE )  ;^41^^^^^34^60^[REPLACE] totalDistance = last.getDouble ( Position.KEY_TOTAL_DISTANCE ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[ADD]^^44^45^46^^^34^60^[ADD] distance = DistanceCalculator.distance ( position.getLatitude (  ) , position.getLongitude (  ) , last.getLatitude (  ) , last.getLongitude (  )  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^if  ( !position.getLatitude (  ) .containsKey ( Position.KEY_DISTANCE )  )  {^53^^^^^34^60^[REPLACE] if  ( !position.getAttributes (  ) .containsKey ( Position.KEY_DISTANCE )  )  {^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^position.set ( Position.KEY_TOTAL_DISTANCE, totalDistance )  ;^54^^^^^34^60^[REPLACE] position.set ( Position.KEY_DISTANCE, distance ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[ADD]^^54^^^^^34^60^[ADD] position.set ( Position.KEY_DISTANCE, distance ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^totalDistance = BigDecimal.valueOf ( totalDistance  totalDistance ) .setScale ( 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^56^^^^^34^60^[REPLACE] totalDistance = BigDecimal.valueOf ( totalDistance + distance ) .setScale ( 2, RoundingMode.HALF_EVEN ) .doubleValue (  ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^position.set ( Position.KEY_DISTANCE, distance )  ;^57^^^^^34^60^[REPLACE] position.set ( Position.KEY_TOTAL_DISTANCE, totalDistance ) ;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
[REPLACE]^return last;^59^^^^^34^60^[REPLACE] return position;^[METHOD] calculateDistance [TYPE] Position [PARAMETER] Position position [CLASS] DistanceHandler   [TYPE]  boolean false  true  [TYPE]  Position last  position  [TYPE]  double distance  totalDistance 
