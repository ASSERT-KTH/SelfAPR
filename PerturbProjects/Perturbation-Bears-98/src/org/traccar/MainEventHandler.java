[REPLACE]^if  ( e.getMessage (  )  == null && e.getMessage (  )  instanceof Position )  {^38^^^^^36^67^[REPLACE] if  ( e.getMessage (  )  != null && e.getMessage (  )  instanceof Position )  {^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^^38^39^40^41^42^36^67^[ADD] if  ( e.getMessage (  )  != null && e.getMessage (  )  instanceof Position )  {  Position position =  ( Position )  e.getMessage (  ) ; try { Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^if  ( cmdResult == this  )  {^60^^^^^36^67^[REPLACE] if  ( cmdResult != null )  {^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^s.append ( ", result: " ) .append ( cmdResult ) ;^60^61^62^^^36^67^[ADD] if  ( cmdResult != null )  { s.append ( ", result: " ) .append ( cmdResult ) ; }^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^s .append ( cmdResult )^61^^^^^36^67^[REPLACE] s.append ( ", result: " ) .append ( cmdResult ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^^61^^^^^36^67^[ADD] s.append ( ", result: " ) .append ( cmdResult ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^s.append ( "time: " )  ;^61^^^^^36^67^[REPLACE] s.append ( ", result: " ) .append ( cmdResult ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;Log.warning ( error ) ;^41^42^43^44^45^36^67^[ADD] try { Context.getDeviceManager (  ) .updateLatestPosition ( position ) ; } catch  ( SQLException error )  { Log.warning ( error ) ; }^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^getIdentityManager (  ) .getDeviceById ( position.getDeviceId (  )  )  ;^42^^^^^36^67^[REPLACE] Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REMOVE]^getIdentityManager (  ) .getDeviceById ( position.getDeviceId (  )  )  ;^42^^^^^36^67^[REMOVE] ^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Context .getIdentityManager (  )  .updateLatestPosition ( position ) ;^42^^^^^36^67^[REPLACE] Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Position position =  ( Position )  e .getChannel (  )  ;^40^^^^^36^67^[REPLACE] Position position =  ( Position )  e.getMessage (  ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^String uniqueId = Context.getDeviceManager (  ) .getDeviceById ( position.getDeviceId (  )  ) .getUniqueId (  ) ;^47^^^^^36^67^[REPLACE] String uniqueId = Context.getIdentityManager (  ) .getDeviceById ( position.getDeviceId (  )  ) .getUniqueId (  ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^^59^^^^^36^67^[ADD] Object cmdResult = position.getAttributes (  ) .get ( Position.KEY_RESULT ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Context.getDeviceManager (  ) .append ( position ) ;^42^^^^^36^67^[REPLACE] Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Context.getIdentityManager (  ) .updateLatestPosition ( position ) ;^42^^^^^36^67^[REPLACE] Context.getDeviceManager (  ) .updateLatestPosition ( position ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Position position =  ( Position )  e.getChannel (  ) ;^40^^^^^36^67^[REPLACE] Position position =  ( Position )  e.getMessage (  ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^^47^^^^^36^67^[ADD] String uniqueId = Context.getIdentityManager (  ) .getDeviceById ( position.getDeviceId (  )  ) .getUniqueId (  ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[REPLACE]^Object cmdResult = position.getLatitude (  ) .get ( Position.KEY_RESULT ) ;^59^^^^^36^67^[REPLACE] Object cmdResult = position.getAttributes (  ) .get ( Position.KEY_RESULT ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
[ADD]^^43^44^^^^36^67^[ADD] catch  ( SQLException error )  { Log.warning ( error ) ;^[METHOD] messageReceived [TYPE] void [PARAMETER] ChannelHandlerContext ctx MessageEvent e [CLASS] MainEventHandler   [TYPE]  boolean false  true  [TYPE]  StringBuilder s  [TYPE]  Position position  [TYPE]  SQLException error  [TYPE]  MessageEvent e  [TYPE]  ChannelHandlerContext ctx  [TYPE]  Object cmdResult  [TYPE]  String uniqueId 
