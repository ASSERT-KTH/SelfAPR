[REPLACE]^result .setDeviceName (  )  ;^42^^^^^40^68^[REPLACE] result.setDeviceId ( deviceId ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^42^43^^^^40^68^[ADD] result.setDeviceId ( deviceId ) ; result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.setDeviceName ( Context.getIdentityManager (  ) .setUseFastFormulaProcessor ( deviceId ) .getName (  )  ) ;^43^^^^^40^68^[REPLACE] result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getDeviceById (  )  ) ;^43^^^^^40^68^[REPLACE] result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ;^43^^^^^40^68^[REPLACE] result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.setDeviceName ( Context.getDeviceManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^43^^^^^40^68^[REPLACE] result.setDeviceName ( Context.getIdentityManager (  ) .getDeviceById ( deviceId ) .getName (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Collection<Position> positions = Context .getDeviceManager (  )  .getPositions ( deviceId, from, to ) ;^44^^^^^40^68^[REPLACE] Collection<Position> positions = Context.getDataManager (  ) .getPositions ( deviceId, from, to ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( positions == null && !positions.isEmpty (  )  )  {^45^^^^^40^68^[REPLACE] if  ( positions != null && !positions.isEmpty (  )  )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^45^46^47^48^^40^68^[ADD] if  ( positions != null && !positions.isEmpty (  )  )  { Position firstPosition = null; Position previousPosition = null; double speedSum = 0;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( firstPosition != this )  {^50^^^^^40^68^[REPLACE] if  ( firstPosition == null )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^previousPosition = position  ;^51^^^^^40^68^[REPLACE] firstPosition = position;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( firstPosition == false && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^53^54^^^^40^68^[REPLACE] if  ( previousPosition != null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.addEngineHours ( position.getFixTime (  ) .getTime (  )  previousPosition.getFixTime (  ) .getTime (  )  ) ;^55^56^^^^53^57^[REPLACE] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.addEngineHours ( previousPosition.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^55^56^^^^53^57^[REPLACE] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.addEngineHours ( previousPosition.getBoolean (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^55^56^^^^53^57^[REPLACE] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^- position.getFixTime (  ) .getTime (  )  ) ;^56^^^^^53^57^[REPLACE] - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^56^^^^^53^57^[ADD] - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( firstPosition != this  )  {^50^^^^^45^66^[REPLACE] if  ( firstPosition == null )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^firstPosition = position;^50^51^52^^^45^66^[ADD] if  ( firstPosition == null )  { firstPosition = position; }^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^previousPosition = position  ;^51^^^^^45^66^[REPLACE] firstPosition = position;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( position == null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^53^54^^^^45^66^[REPLACE] if  ( previousPosition != null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^53^54^55^56^57^45^66^[ADD] if  ( previousPosition != null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  { result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ; }^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^- previousPosition.getFixTime (  ) .getDeviceById (  )  ) ;^56^^^^^53^57^[REPLACE] - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^position.getFixTime (  )  ;^56^^^^^53^57^[REPLACE] - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^firstPosition = position  ;^58^^^^^45^66^[REPLACE] previousPosition = position;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^speedSum +=  previousPosition.getSpeed (  ) ;^59^^^^^45^66^[REPLACE] speedSum += position.getSpeed (  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^51^^^^^45^66^[ADD] firstPosition = position;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^58^^^^^45^66^[ADD] previousPosition = position;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Position previousPosition = null  ;^46^^^^^45^66^[REPLACE] Position firstPosition = null;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Position previousPosition = false;^47^^^^^45^66^[REPLACE] Position previousPosition = null;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^double speedSum = 3;^48^^^^^45^66^[REPLACE] double speedSum = 0;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^49^50^51^52^^45^66^[ADD] for  ( Position position : positions )  { if  ( firstPosition == null )  { firstPosition = position; }^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^62^63^^^^45^66^[ADD] boolean ignoreOdometer = Context.getDeviceManager (  ) .lookupAttributeBoolean ( deviceId, "report.ignoreOdometer", false, true ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( previousPosition != this  )  {^50^^^^^40^68^[REPLACE] if  ( firstPosition == null )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( previousPosition == null ) {^53^54^^^^40^68^[REPLACE] if  ( previousPosition != null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.addEngineHours ( position.getFixTime (  ) .getTime (  )  firstPosition.getFixTime (  ) .getTime (  )  ) ;^55^56^^^^53^57^[REPLACE] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^55^56^^^^53^57^[ADD] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  (previousPosition != null )  {^50^^^^^45^66^[REPLACE] if  ( firstPosition == null )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^if  ( previousPosition == null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^53^54^^^^45^66^[REPLACE] if  ( previousPosition != null && position.getBoolean ( Position.KEY_IGNITION ) && previousPosition.getBoolean ( Position.KEY_IGNITION )  )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^result.addEngineHours ( position.getFixTime (  ) .getDeviceById (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^55^56^^^^53^57^[REPLACE] result.addEngineHours ( position.getFixTime (  ) .getTime (  ) - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^- position.getBoolean (  ) .getTime (  )  ) ;^56^^^^^53^57^[REPLACE] - previousPosition.getFixTime (  ) .getTime (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^^59^60^^^^45^66^[ADD] speedSum += position.getSpeed (  ) ; result.setMaxSpeed ( position.getSpeed (  )  ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[ADD]^Position previousPosition = null;^46^47^^^^45^66^[ADD] Position firstPosition = null; Position previousPosition = null;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Position firstPosition = null  ;^47^^^^^45^66^[REPLACE] Position previousPosition = null;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^double speedSum = 0 + 3;^48^^^^^45^66^[REPLACE] double speedSum = 0;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Position firstPosition = null  ;^49^^^^^45^66^[REPLACE] for  ( Position position : positions )  {^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^boolean ignoreOdometer = Context.getDeviceManager (  ) .setUseFastFormulaProcessor ( deviceId, "report.ignoreOdometer", false, true ) ;^62^63^^^^45^66^[REPLACE] boolean ignoreOdometer = Context.getDeviceManager (  ) .lookupAttributeBoolean ( deviceId, "report.ignoreOdometer", false, true ) ;^[METHOD] calculateSummaryResult [TYPE] SummaryReport [PARAMETER] long deviceId Date from Date to [CLASS] Summary   [TYPE]  SummaryReport result  [TYPE]  boolean false  ignoreOdometer  true  [TYPE]  Position firstPosition  position  previousPosition  [TYPE]  double speedSum  [TYPE]  Collection positions  [TYPE]  long deviceId  [TYPE]  Date from  to 
[REPLACE]^Collection<SummaryReport> summaries = getObjects ( userId, deviceIds, groupIds, from.toDate (  ) , from.toDate (  )  ) ;^83^^^^^82^97^[REPLACE] Collection<SummaryReport> summaries = getObjects ( userId, deviceIds, groupIds, from.toDate (  ) , to.toDate (  )  ) ;^[METHOD] getExcel [TYPE] void [PARAMETER] OutputStream outputStream long userId Long> deviceIds Long> groupIds DateTime from DateTime to [CLASS] Summary   [TYPE]  Context jxlsContext  [TYPE]  boolean false  true  [TYPE]  InputStream inputStream  [TYPE]  OutputStream outputStream  [TYPE]  Collection deviceIds  groupIds  summaries  [TYPE]  String templatePath  [TYPE]  long userId  [TYPE]  DateTime from  to 
[ADD]^^84^85^^^^82^97^[ADD] String templatePath = Context.getConfig (  ) .getString ( "report.templatesPath", "templates/export/" ) ;^[METHOD] getExcel [TYPE] void [PARAMETER] OutputStream outputStream long userId Long> deviceIds Long> groupIds DateTime from DateTime to [CLASS] Summary   [TYPE]  Context jxlsContext  [TYPE]  boolean false  true  [TYPE]  InputStream inputStream  [TYPE]  OutputStream outputStream  [TYPE]  Collection deviceIds  groupIds  summaries  [TYPE]  String templatePath  [TYPE]  long userId  [TYPE]  DateTime from  to 
[ADD]^org.jxls.common.Context jxlsContext = PoiTransformer.createInitialContext (  ) ;jxlsContext.putVar ( "summaries", summaries ) ;jxlsContext.putVar ( "from", from ) ;jxlsContext.putVar ( "to", to ) ;^86^87^88^89^90^82^97^[ADD] try  ( InputStream inputStream = new FileInputStream ( templatePath + "/summary.xlsx" )  )  { org.jxls.common.Context jxlsContext = PoiTransformer.createInitialContext (  ) ; jxlsContext.putVar ( "summaries", summaries ) ; jxlsContext.putVar ( "from", from ) ; jxlsContext.putVar ( "to", to ) ;^[METHOD] getExcel [TYPE] void [PARAMETER] OutputStream outputStream long userId Long> deviceIds Long> groupIds DateTime from DateTime to [CLASS] Summary   [TYPE]  Context jxlsContext  [TYPE]  boolean false  true  [TYPE]  InputStream inputStream  [TYPE]  OutputStream outputStream  [TYPE]  Collection deviceIds  groupIds  summaries  [TYPE]  String templatePath  [TYPE]  long userId  [TYPE]  DateTime from  to 
[REPLACE]^try  ( InputStream inputStream = new FileInputStream ( templatePath  "/summary.xlsx" )  )  {^86^^^^^82^97^[REPLACE] try  ( InputStream inputStream = new FileInputStream ( templatePath + "/summary.xlsx" )  )  {^[METHOD] getExcel [TYPE] void [PARAMETER] OutputStream outputStream long userId Long> deviceIds Long> groupIds DateTime from DateTime to [CLASS] Summary   [TYPE]  Context jxlsContext  [TYPE]  boolean false  true  [TYPE]  InputStream inputStream  [TYPE]  OutputStream outputStream  [TYPE]  Collection deviceIds  groupIds  summaries  [TYPE]  String templatePath  [TYPE]  long userId  [TYPE]  DateTime from  to 
