[REPLACE]^private static final  long  SPLIT_MODE = Calendar.DAY_OF_MONTH;^30^^^^^^^[REPLACE] private static final int SPLIT_MODE = Calendar.DAY_OF_MONTH;^ [CLASS] StatisticsManager  
[REPLACE]^private int lastUpdate  = null ;^32^^^^^^^[REPLACE] private int lastUpdate = Calendar.getInstance (  ) .get ( SPLIT_MODE ) ;^ [CLASS] StatisticsManager  
[REPLACE]^private Set<Long> users =  new Date (  )  ;^34^^^^^^^[REPLACE] private Set<Long> users = new HashSet<> (  ) ;^ [CLASS] StatisticsManager  
[REPLACE]^private Set<Long> devices  = null ;^35^^^^^^^[REPLACE] private Set<Long> devices = new HashSet<> (  ) ;^ [CLASS] StatisticsManager  
[REPLACE]^private  short  requests;^37^^^^^^^[REPLACE] private int requests;^ [CLASS] StatisticsManager  
[REPLACE]^private  long  messagesStored;^39^^^^^^^[REPLACE] private int messagesStored;^ [CLASS] StatisticsManager  
[REPLACE]^int currentUpdate = Calendar .get ( requests )  .get ( SPLIT_MODE ) ;^42^^^^^41^65^[REPLACE] int currentUpdate = Calendar.getInstance (  ) .get ( SPLIT_MODE ) ;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REPLACE]^if  ( lastUpdate  ==  currentUpdate )  {^43^^^^^41^65^[REPLACE] if  ( lastUpdate != currentUpdate )  {^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^Statistics statistics = new Statistics (  ) ;statistics.setCaptureTime ( new Date (  )  ) ;statistics.setActiveUsers ( users.size (  )  ) ;statistics.setActiveDevices ( devices.size (  )  ) ;^43^44^45^46^47^41^65^[ADD] if  ( lastUpdate != currentUpdate )  { Statistics statistics = new Statistics (  ) ; statistics.setCaptureTime ( new Date (  )  ) ; statistics.setActiveUsers ( users.size (  )  ) ; statistics.setActiveDevices ( devices.size (  )  ) ;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^Context.getDataManager (  ) .addStatistics ( statistics ) ;Log.warning ( e ) ;^52^53^54^55^56^41^65^[ADD] try { Context.getDataManager (  ) .addStatistics ( statistics ) ; } catch  ( SQLException e )  { Log.warning ( e ) ; }^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^^60^^^^^41^65^[ADD] requests = 0;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REPLACE]^messagesReceived = 2;^61^^^^^41^65^[REPLACE] messagesReceived = 0;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REPLACE]^messagesStored += 1  ;^62^^^^^41^65^[REPLACE] messagesStored = 0;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REPLACE]^lastUpdate =  requests;^63^^^^^41^65^[REPLACE] lastUpdate = currentUpdate;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^^44^^^^^41^65^[ADD] Statistics statistics = new Statistics (  ) ;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REMOVE]^getDataManager (  ) .addStatistics ( statistics )  ;^53^^^^^41^65^[REMOVE] ^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[REPLACE]^messagesReceived = 0 * 3;^61^^^^^41^65^[REPLACE] messagesReceived = 0;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^^62^^^^^41^65^[ADD] messagesStored = 0;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^^63^^^^^41^65^[ADD] lastUpdate = currentUpdate;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
[ADD]^^54^55^^^^41^65^[ADD] catch  ( SQLException e )  { Log.warning ( e ) ;^[METHOD] checkSplit [TYPE] void [PARAMETER] [CLASS] StatisticsManager   [TYPE]  Set devices  users  [TYPE]  boolean false  true  [TYPE]  Statistics statistics  [TYPE]  SQLException e  [TYPE]  int SPLIT_MODE  currentUpdate  lastUpdate  messagesReceived  messagesStored  requests 
