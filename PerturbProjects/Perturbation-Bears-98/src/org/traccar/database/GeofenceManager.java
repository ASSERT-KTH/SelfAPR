[REPLACE]^private final Collection dataManager;^41^^^^^^^[REPLACE] private final DataManager dataManager;^ [CLASS] GeofenceManager  
[REPLACE]^private final Map<Long, Geofence> geofences  = null ;^43^^^^^^^[REPLACE] private final Map<Long, Geofence> geofences = new HashMap<> (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final Map<Long, Set<Long>> userGeofences  = null ;^44^^^^^^^[REPLACE] private final Map<Long, Set<Long>> userGeofences = new HashMap<> (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final Map<Long, Set<Long>> groupGeofences ;^45^^^^^^^[REPLACE] private final Map<Long, Set<Long>> groupGeofences = new HashMap<> (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final Map<Long, Set<Long>> deviceGeofencesWithGroups ;^47^^^^^^^[REPLACE] private final Map<Long, Set<Long>> deviceGeofencesWithGroups = new HashMap<> (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final Map<Long, Set<Long>> deviceGeofences  = null ;^48^^^^^^^[REPLACE] private final Map<Long, Set<Long>> deviceGeofences = new HashMap<> (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private  ReadWriteLock deviceGeofencesLock = new ReentrantReadWriteLock (  ) ;^50^^^^^^^[REPLACE] private final ReadWriteLock deviceGeofencesLock = new ReentrantReadWriteLock (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final ReadWriteLock geofencesLock  = null ;^51^^^^^^^[REPLACE] private final ReadWriteLock geofencesLock = new ReentrantReadWriteLock (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final ReadWriteLock groupGeofencesLock  = null ;^52^^^^^^^[REPLACE] private final ReadWriteLock groupGeofencesLock = new ReentrantReadWriteLock (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^private final ReadWriteLock userGeofencesLock ;^53^^^^^^^[REPLACE] private final ReadWriteLock userGeofencesLock = new ReentrantReadWriteLock (  ) ;^ [CLASS] GeofenceManager  
[REPLACE]^if  ( dataManager == null )  {^118^^^^^117^135^[REPLACE] if  ( dataManager != null )  {^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[REPLACE]^for  ( Geofence geofence : dataManager .getGeofences (  )   )  {^123^^^^^121^126^[REPLACE] for  ( Geofence geofence : dataManager.getGeofences (  )  )  {^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[ADD]^geofencesLock.writeLock (  ) .lock (  ) ;geofences.clear (  ) ;^119^120^121^122^123^121^126^[ADD] try { geofencesLock.writeLock (  ) .lock (  ) ; try { geofences.clear (  ) ; for  ( Geofence geofence : dataManager.getGeofences (  )  )  {^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[ADD]^geofences.clear (  ) ;geofences.put ( geofence.getId (  ) , geofence ) ;^121^122^123^124^125^121^126^[ADD] try { geofences.clear (  ) ; for  ( Geofence geofence : dataManager.getGeofences (  )  )  { geofences.put ( geofence.getId (  ) , geofence ) ; }^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[REPLACE]^GroupGeofence groupGeofence  ;^123^^^^^121^126^[REPLACE] for  ( Geofence geofence : dataManager.getGeofences (  )  )  {^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[REPLACE]^for  ( Geofence geofence : dataManager.getGroupGeofences (  )  )  {^123^^^^^121^126^[REPLACE] for  ( Geofence geofence : dataManager.getGeofences (  )  )  {^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[REPLACE]^refreshGeofences (  )  ;^133^^^^^117^135^[REPLACE] refreshUserGeofences (  ) ;^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[ADD]^^133^134^^^^117^135^[ADD] refreshUserGeofences (  ) ; refresh (  ) ;^[METHOD] refreshGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  Geofence geofence 
[REPLACE]^if  ( dataManager == null )  {^138^^^^^137^153^[REPLACE] if  ( dataManager != null )  {^[METHOD] refreshUserGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  GeofencePermission geofencePermission 
[ADD]^userGeofencesLock.writeLock (  ) .lock (  ) ;userGeofences.clear (  ) ;^139^140^141^142^143^141^146^[ADD] try { userGeofencesLock.writeLock (  ) .lock (  ) ; try { userGeofences.clear (  ) ; for  ( GeofencePermission geofencePermission : dataManager.getGeofencePermissions (  )  )  {^[METHOD] refreshUserGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  GeofencePermission geofencePermission 
[ADD]^userGeofences.clear (  ) ;getUserGeofences ( geofencePermission.getUserId (  )  ) .add ( geofencePermission.getGeofenceId (  )  ) ;^141^142^143^144^145^141^146^[ADD] try { userGeofences.clear (  ) ; for  ( GeofencePermission geofencePermission : dataManager.getGeofencePermissions (  )  )  { getUserGeofences ( geofencePermission.getUserId (  )  ) .add ( geofencePermission.getGeofenceId (  )  ) ; }^[METHOD] refreshUserGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  GeofencePermission geofencePermission 
[REPLACE]^Geofence geofence  ;^143^^^^^141^146^[REPLACE] for  ( GeofencePermission geofencePermission : dataManager.getGeofencePermissions (  )  )  {^[METHOD] refreshUserGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  GeofencePermission geofencePermission 
[REPLACE]^for  ( GeofencePermission geofencePermission : dataManager .getGeofences (  )   )  {^143^^^^^141^146^[REPLACE] for  ( GeofencePermission geofencePermission : dataManager.getGeofencePermissions (  )  )  {^[METHOD] refreshUserGeofences [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  DataManager dataManager  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  SQLException error  [TYPE]  GeofencePermission geofencePermission 
[REPLACE]^if  ( dataManager == null )  {^156^^^^^155^225^[REPLACE] if  ( dataManager != null )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( Context.getDeviceManager (  ) .getGroupById ( groupId )  == this  )  {^191^^^^^155^225^[REPLACE] if  ( Context.getDeviceManager (  ) .getGroupById ( groupId )  != null )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId = 1;^194^^^^^191^195^[REPLACE] groupId = 0;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^192^^^^^155^225^[ADD] groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( null != null )  {^198^^^^^155^225^[REPLACE] if  ( deviceGeofenceIds == null )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofences.clear (  )  ;^201^^^^^198^202^[REPLACE] deviceGeofenceIds.clear (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^201^^^^^198^202^[ADD] deviceGeofenceIds.clear (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofenceIds =  new LinkedList<> (  )  ;^199^^^^^155^225^[REPLACE] deviceGeofenceIds = new ArrayList<> (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( lastPosition == null && deviceGeofencesWithGroups.containsKey ( device.getId (  )  )  )  {^204^^^^^155^225^[REPLACE] if  ( lastPosition != null && deviceGeofencesWithGroups.containsKey ( device.getId (  )  )  )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( geofence == null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  {^207^208^^^^155^225^[REPLACE] if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofenceIds .addAll ( this )  ;^209^^^^^207^210^[REPLACE] deviceGeofenceIds.add ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^DeviceGeofence deviceGeofence  ;^206^^^^^204^212^[REPLACE] Geofence geofence = getGeofence ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( geofence == null ) {^207^208^^^^155^225^[REPLACE] if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^163^164^165^^^161^166^[ADD] for  ( GroupGeofence groupGeofence : databaseGroupGeofences )  { getGroupGeofences ( groupGeofence.getGroupId (  )  ) .add ( groupGeofence.getGeofenceId (  )  ) ; }^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^for  ( DeviceGeofence deviceGeofence : false )  {^179^^^^^161^166^[REPLACE] for  ( DeviceGeofence deviceGeofence : databaseDeviceGeofences )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^186^187^188^189^190^161^166^[ADD] for  ( Device device : allDevices )  { long groupId = device.getGroupId (  ) ; while  ( groupId != 0 )  { getDeviceGeofences ( deviceGeofencesWithGroups, device.getId (  )  ) .addAll ( getGroupGeofences ( groupId )  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^205^206^207^208^209^161^166^[ADD] for  ( long geofenceId : deviceGeofencesWithGroups.get ( device.getId (  )  )  )  { Geofence geofence = getGeofence ( geofenceId ) ; if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  { deviceGeofenceIds.add ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^Collection<GroupGeofence> databaseGroupGeofences = dataManager.getGroupGeofences (  ) ;groupGeofencesLock.writeLock (  ) .lock (  ) ;^157^158^159^160^161^161^166^[ADD] try {  Collection<GroupGeofence> databaseGroupGeofences = dataManager.getGroupGeofences (  ) ; groupGeofencesLock.writeLock (  ) .lock (  ) ; try {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^groupGeofences.clear (  ) ;getGroupGeofences ( groupGeofence.getGroupId (  )  ) .add ( groupGeofence.getGeofenceId (  )  ) ;^161^162^163^164^165^161^166^[ADD] try { groupGeofences.clear (  ) ; for  ( GroupGeofence groupGeofence : databaseGroupGeofences )  { getGroupGeofences ( groupGeofence.getGroupId (  )  ) .add ( groupGeofence.getGeofenceId (  )  ) ; }^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^deviceGeofences.clear (  ) ;deviceGeofencesWithGroups.clear (  ) ;^175^176^177^^179^161^166^[ADD] try { deviceGeofences.clear (  ) ; deviceGeofencesWithGroups.clear (  ) ; for  ( DeviceGeofence deviceGeofence : databaseDeviceGeofences )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId =  Context.getDeviceManager (  ) .getGroupById ( null ) .getGroupId (  ) ;^192^^^^^161^166^[REPLACE] groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId = 4;^194^^^^^161^166^[REPLACE] groupId = 0;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofenceIds =  new LinkedList<> (  )  ;^199^^^^^161^166^[REPLACE] deviceGeofenceIds = new ArrayList<> (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Collection<GroupGeofence> databaseGroupGeofences = dataManager.getGeofences (  ) ;^159^^^^^161^166^[REPLACE] Collection<GroupGeofence> databaseGroupGeofences = dataManager.getGroupGeofences (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Geofence geofence  ;^163^^^^^161^166^[REPLACE] for  ( GroupGeofence groupGeofence : databaseGroupGeofences )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^170^^^^^161^166^[ADD] Collection<DeviceGeofence> databaseDeviceGeofences = dataManager.getDeviceGeofences (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Collection<Device> allDevices = Context .getIdentityManager (  )  .getAllDevices (  ) ;^171^^^^^161^166^[REPLACE] Collection<Device> allDevices = Context.getDeviceManager (  ) .getAllDevices (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Geofence geofence  ;^179^^^^^161^166^[REPLACE] for  ( DeviceGeofence deviceGeofence : databaseDeviceGeofences )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Geofence geofence  ;^186^^^^^161^166^[REPLACE] for  ( Device device : allDevices )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^long groupId = device.getId (  ) ;^187^^^^^161^166^[REPLACE] long groupId = device.getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^List<Long> deviceGeofenceIds = device.getGroupId (  ) ;^197^^^^^161^166^[REPLACE] List<Long> deviceGeofenceIds = device.getGeofenceIds (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^203^^^^^161^166^[ADD] Position lastPosition = Context.getIdentityManager (  ) .getLastPosition ( device.getId (  )  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^DeviceGeofence deviceGeofence  ;^206^^^^^161^166^[REPLACE] Geofence geofence = getGeofence ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ;groupId = 0;^191^192^193^194^195^155^225^[ADD] if  ( Context.getDeviceManager (  ) .getGroupById ( groupId )  != null )  { groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ; } else { groupId = 0; }^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId = 2;^194^^^^^191^195^[REPLACE] groupId = 0;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId =  Context.getDeviceManager (  ) .getGroupById ( geofenceId ) .getGroupId (  ) ;^192^^^^^155^225^[REPLACE] groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( deviceGeofenceIds != null )  {^198^^^^^155^225^[REPLACE] if  ( deviceGeofenceIds == null )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^deviceGeofenceIds = new ArrayList<> (  ) ;deviceGeofenceIds.clear (  ) ;^198^199^200^201^202^155^225^[ADD] if  ( deviceGeofenceIds == null )  { deviceGeofenceIds = new ArrayList<> (  ) ; } else { deviceGeofenceIds.clear (  ) ; }^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( lastPosition == true && deviceGeofencesWithGroups.containsKey ( device.getId (  )  )  )  {^204^^^^^155^225^[REPLACE] if  ( lastPosition != null && deviceGeofencesWithGroups.containsKey ( device.getId (  )  )  )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^if  ( geofence == true && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  {^207^208^^^^155^225^[REPLACE] if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  {^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^207^208^209^210^^155^225^[ADD] if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  { deviceGeofenceIds.add ( geofenceId ) ; }^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofenceIds.add ( groupId ) ;^209^^^^^207^210^[REPLACE] deviceGeofenceIds.add ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^205^206^207^208^209^204^212^[ADD] for  ( long geofenceId : deviceGeofencesWithGroups.get ( device.getId (  )  )  )  { Geofence geofence = getGeofence ( geofenceId ) ; if  ( geofence != null && geofence.getGeometry (  ) .containsPoint ( lastPosition.getLatitude (  ) , lastPosition.getLongitude (  )  )  )  { deviceGeofenceIds.add ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Geofence geofence = getGeofence ( groupId ) ;^206^^^^^204^212^[REPLACE] Geofence geofence = getGeofence ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^deviceGeofence.getGeofenceId (  )  ;^209^^^^^207^210^[REPLACE] deviceGeofenceIds.add ( geofenceId ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REMOVE]^deviceGeofence.getGeofenceId (  )  ;^209^^^^^207^210^[REMOVE] ^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^179^180^181^182^183^161^166^[ADD] for  ( DeviceGeofence deviceGeofence : databaseDeviceGeofences )  { getDeviceGeofences ( deviceGeofences, deviceGeofence.getDeviceId (  )  ) .add ( deviceGeofence.getGeofenceId (  )  ) ; getDeviceGeofences ( deviceGeofencesWithGroups, deviceGeofence.getDeviceId (  )  ) .add ( deviceGeofence.getGeofenceId (  )  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^groupId =  Context.getDeviceManager (  ) .getGroupById ( geofenceId ) .getGroupId (  ) ;^192^^^^^161^166^[REPLACE] groupId = Context.getDeviceManager (  ) .getGroupById ( groupId ) .getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^159^160^^^^161^166^[ADD] Collection<GroupGeofence> databaseGroupGeofences = dataManager.getGroupGeofences (  ) ; groupGeofencesLock.writeLock (  ) .lock (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Collection<DeviceGeofence> databaseDeviceGeofences = dataManager .getDeviceGeofences ( this , groupId )  ;^170^^^^^161^166^[REPLACE] Collection<DeviceGeofence> databaseDeviceGeofences = dataManager.getDeviceGeofences (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[REPLACE]^Collection<Device> allDevices = Context.getDeviceManager (  ) .addAll (  ) ;^171^^^^^161^166^[REPLACE] Collection<Device> allDevices = Context.getDeviceManager (  ) .getAllDevices (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
[ADD]^^187^^^^^161^166^[ADD] long groupId = device.getGroupId (  ) ;^[METHOD] refresh [TYPE] void [PARAMETER] [CLASS] GeofenceManager   [TYPE]  GroupGeofence groupGeofence  [TYPE]  Position lastPosition  [TYPE]  SQLException error  [TYPE]  DeviceGeofence deviceGeofence  [TYPE]  Device device  [TYPE]  DataManager dataManager  [TYPE]  long geofenceId  groupId  [TYPE]  boolean false  true  [TYPE]  ReadWriteLock deviceGeofencesLock  geofencesLock  groupGeofencesLock  userGeofencesLock  [TYPE]  Collection allDevices  databaseDeviceGeofences  databaseGroupGeofences  [TYPE]  List deviceGeofenceIds  [TYPE]  Map deviceGeofences  deviceGeofencesWithGroups  geofences  groupGeofences  userGeofences  [TYPE]  Geofence geofence 
