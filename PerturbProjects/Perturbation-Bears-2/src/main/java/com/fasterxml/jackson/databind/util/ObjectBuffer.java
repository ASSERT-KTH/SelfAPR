[REPLACE]^private final static int SMALL_CHUNK ;^18^^^^^^^[REPLACE] private final static int SMALL_CHUNK =  ( 1 << 14 ) ;^ [CLASS] ObjectBuffer  
[REPLACE]^private final static  short  MAX_CHUNK =  ( 1 << 18 ) ;^26^^^^^^^[REPLACE] private final static int MAX_CHUNK =  ( 1 << 18 ) ;^ [CLASS] ObjectBuffer  
[ADD]^^91^^^^^90^107^[ADD] LinkedNode<Object[]> next = new LinkedNode<Object[]> ( fullChunk, null ) ;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^if  ( _head != this  )  {^92^^^^^90^107^[REPLACE] if  ( _head == null )  {^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^_tail = null  ;^96^^^^^92^97^[REPLACE] _tail = next;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^_head = _tail = null  ;^93^^^^^90^107^[REPLACE] _head = _tail = next;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[ADD]^^93^^^^^90^107^[ADD] _head = _tail = next;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^_tail = null  ;^93^^^^^90^107^[REPLACE] _head = _tail = next;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^_tail = null  ;^96^^^^^90^107^[REPLACE] _tail = next;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^int len = curr.length  ;^98^^^^^90^107^[REPLACE] int len = fullChunk.length;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^_size +=  SMALL_CHUNK;^99^^^^^90^107^[REPLACE] _size += len;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^if  ( len  != MAX_CHUNK )  {^101^^^^^90^107^[REPLACE] if  ( len < SMALL_CHUNK )  {^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^}  else {^103^^^^^90^107^[REPLACE] } else if  ( len < MAX_CHUNK )  {^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[ADD]^}   len +=  ( len >> 2 ) ;^103^104^105^^^90^107^[ADD] else if  ( len < MAX_CHUNK )  { len +=  ( len >> 2 ) ; }^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^len +=  (SMALL_CHUNK  <  3 ) ;^104^^^^^90^107^[REPLACE] len +=  ( len >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^len += len  ;^104^^^^^90^107^[REPLACE] len +=  ( len >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^len += len >> 2  ;^102^^^^^90^107^[REPLACE] len += len;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^}  if  ( len  <=  MAX_CHUNK )  {^103^^^^^90^107^[REPLACE] } else if  ( len < MAX_CHUNK )  {^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[ADD]^^104^^^^^90^107^[ADD] len +=  ( len >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[ADD]^^102^^^^^90^107^[ADD] len += len;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^len +=  ( len  !=  2 ) ;^104^^^^^90^107^[REPLACE] len +=  ( len >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^return new Object[12]  ;^106^^^^^90^107^[REPLACE] return new Object[len];^[METHOD] appendCompletedChunk [TYPE] Object[] [PARAMETER] Object[] fullChunk [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  next  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  len  [TYPE]  Object[] _freeBuffer  fullChunk 
[REPLACE]^int i = 0  ;^195^^^^^194^210^[REPLACE] int ptr = 0;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^for  ( LinkedNode<Object[]> n =  _head; false !^197^^^^^194^210^[REPLACE] for  ( LinkedNode<Object[]> n = _head; n != null; n = n.next (  )  )  {^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^len += len  ;^201^^^^^194^210^[REPLACE] ptr += len;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^Object[] curr = this.value (  ) ;^198^^^^^194^210^[REPLACE] Object[] curr = n.value (  ) ;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^int len = result.length;^199^^^^^194^210^[REPLACE] int len = curr.length;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^arraycopy ( curr, 0, resultArray, ptr, len )  ;^203^^^^^194^210^[REPLACE] System.arraycopy ( lastChunk, 0, resultArray, ptr, lastChunkEntries ) ;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[ADD]^^203^204^^^^194^210^[ADD] System.arraycopy ( lastChunk, 0, resultArray, ptr, lastChunkEntries ) ; ptr += lastChunkEntries;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^ptr +=  totalSize;^204^^^^^194^210^[REPLACE] ptr += lastChunkEntries;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^if  (lastChunkEntries  ==  totalSize )  {^207^^^^^194^210^[REPLACE] if  ( ptr != totalSize )  {^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[ADD]^^207^208^209^^^194^210^[ADD] if  ( ptr != totalSize )  { throw new IllegalStateException  (" ")  ; }^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
[REPLACE]^return ;^208^^^^^194^210^[REPLACE] throw new IllegalStateException  (" ")  ;^[METHOD] _copyTo [TYPE] void [PARAMETER] Object resultArray int totalSize Object[] lastChunk int lastChunkEntries [CLASS] ObjectBuffer   [TYPE]  LinkedNode _head  _tail  n  next  [TYPE]  Object resultArray  [TYPE]  boolean false  true  [TYPE]  int MAX_CHUNK  SMALL_CHUNK  _size  i  lastChunkEntries  len  ptr  totalSize  [TYPE]  Object[] _freeBuffer  curr  fullChunk  lastChunk  result 
