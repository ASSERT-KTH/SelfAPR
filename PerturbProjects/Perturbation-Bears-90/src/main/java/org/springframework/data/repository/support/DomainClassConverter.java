[REPLACE]^private Repositories repositories  = null ;^46^^^^^^^[REPLACE] private Repositories repositories = Repositories.NONE;^ [CLASS] DomainClassConverter ToEntityConverter ToIdConverter  
[REPLACE]^private Object toIdConverter;^48^^^^^^^[REPLACE] private ToIdConverter toIdConverter;^ [CLASS] DomainClassConverter ToEntityConverter ToIdConverter  
[REPLACE]^private  RepositoryInvokerFactory repositoryInvokerFactory;^116^^^^^^^[REPLACE] private final RepositoryInvokerFactory repositoryInvokerFactory;^ [CLASS] DomainClassConverter ToEntityConverter ToIdConverter  
[REPLACE]^if  ( source != null ) {^144^^^^^142^158^[REPLACE] if  ( source == null || !StringUtils.hasText ( source.toString (  )  )  )  {^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^return false;^145^^^^^142^158^[REPLACE] return null;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^return this;^145^^^^^142^158^[REPLACE] return null;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^if  ( sourceType .getType (  )   )  {^148^^^^^142^158^[REPLACE] if  ( sourceType.equals ( targetType )  )  {^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^Class<?> domainType = sourceType.getType (  ) ;^152^^^^^142^158^[REPLACE] Class<?> domainType = targetType.getType (  ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[ADD]^^154^155^^157^158^142^158^[ADD] RepositoryInformation info = repositories.getRepositoryInformationFor ( domainType ) ; RepositoryInvoker invoker = repositoryInvokerFactory.getInvokerFor ( domainType ) ; return invoker.invokeFindOne ( conversionService.convert ( source, info.getIdType (  )  )  ) ; }^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^RepositoryInformation info = repositories.getRepositoryInformationFor ( domainType )  ;^155^^^^^142^158^[REPLACE] RepositoryInvoker invoker = repositoryInvokerFactory.getInvokerFor ( domainType ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^return invoker.invokeFindOne ( conversionService .convert ( source , targetType , targetType )   ) ;^157^^^^^142^158^[REPLACE] return invoker.invokeFindOne ( conversionService.convert ( source, info.getIdType (  )  )  ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] DomainClassConverter ToEntityConverter ToIdConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter  [TYPE]  RepositoryInformation info 
[REPLACE]^private  RepositoryInvokerFactory repositoryInvokerFactory;^116^^^^^^^[REPLACE] private final RepositoryInvokerFactory repositoryInvokerFactory;^[METHOD] matches [TYPE] boolean [PARAMETER] TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  Repositories repositories  [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  T conversionService  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  Class rawIdType  [TYPE]  ToEntityConverter toEntityConverter  [TYPE]  ToIdConverter toIdConverter 
[REPLACE]^if  ( source != null || !StringUtils.hasText ( source.Object (  )  )  )  {^144^^^^^142^158^[REPLACE] if  ( source == null || !StringUtils.hasText ( source.toString (  )  )  )  {^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[REPLACE]^return true;^145^^^^^142^158^[REPLACE] return null;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[REPLACE]^return false;^145^^^^^142^158^[REPLACE] return null;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[REPLACE]^if  ( sourceType.isAssignableTo ( targetType )  )  {^148^^^^^142^158^[REPLACE] if  ( sourceType.equals ( targetType )  )  {^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[ADD]^return source;^148^149^150^^^142^158^[ADD] if  ( sourceType.equals ( targetType )  )  { return source; }^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[REPLACE]^Class<?> domainType = sourceType.getType (  ) ;^152^^^^^142^158^[REPLACE] Class<?> domainType = targetType.getType (  ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[REPLACE]^RepositoryInformation info = repositories.getRepositoryInformationFor ( false ) ;^154^^^^^142^158^[REPLACE] RepositoryInformation info = repositories.getRepositoryInformationFor ( domainType ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
[ADD]^^155^^^^^142^158^[ADD] RepositoryInvoker invoker = repositoryInvokerFactory.getInvokerFor ( domainType ) ;^[METHOD] convert [TYPE] Object [PARAMETER] Object source TypeDescriptor sourceType TypeDescriptor targetType [CLASS] ToEntityConverter   [TYPE]  RepositoryInvokerFactory repositoryInvokerFactory  [TYPE]  boolean false  true  [TYPE]  TypeDescriptor sourceType  targetType  [TYPE]  RepositoryInvoker invoker  [TYPE]  Object source  [TYPE]  Class domainType  [TYPE]  RepositoryInformation info 
