[REPLACE]^private static final Logger logger ;^42^43^^^^42^43^[REPLACE] private static final Logger logger = Logger.getLogger ( CrossModuleCodeMotion.class.getName (  )  ) ;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private  AbstractCompiler compiler;^45^^^^^^^[REPLACE] private final AbstractCompiler compiler;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private  JSModuleGraph graph;^46^^^^^^^[REPLACE] private final JSModuleGraph graph;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private final Map<JSModule, Node> moduleVarParentMap ;^52^53^^^^52^53^[REPLACE] private final Map<JSModule, Node> moduleVarParentMap = new HashMap<JSModule, Node> (  ) ;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private final Map<Scope.Var, NamedInfo> namedInfo  = null ;^59^60^^^^59^60^[REPLACE] private final Map<Scope.Var, NamedInfo> namedInfo = new LinkedHashMap<Var, NamedInfo> (  ) ;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^boolean allowMove ;^145^^^^^^^[REPLACE] boolean allowMove = true;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private JSModule deepestModule ;^148^^^^^^^[REPLACE] private JSModule deepestModule = null;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private JSModule declModule  = null ;^151^^^^^^^[REPLACE] private JSModule declModule = null;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^private final Deque<Declaration> declarations ;^154^155^^^^154^155^[REPLACE] private final Deque<Declaration> declarations = new ArrayDeque<Declaration> (  ) ;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^JSModule module;^199^^^^^^^[REPLACE] final JSModule module;^ [CLASS] CrossModuleCodeMotion NamedInfo Declaration  
[REPLACE]^this.compiler =  null;^68^^^^^67^70^[REPLACE] this.compiler = compiler;^[METHOD] <init> [TYPE] JSModuleGraph) [PARAMETER] AbstractCompiler compiler JSModuleGraph graph [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node node  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^this.graph =  null;^69^^^^^67^70^[REPLACE] this.graph = graph;^[METHOD] <init> [TYPE] JSModuleGraph) [PARAMETER] AbstractCompiler compiler JSModuleGraph graph [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node node  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^this.node = node; ;^203^^^^^202^205^[REPLACE] this.module = module;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node gramps  node  parent  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^this.module = module; ;^204^^^^^202^205^[REPLACE] this.node = node;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node gramps  node  parent  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^logger .getLogger ( false )  ;^76^^^^^75^87^[REPLACE] logger.info ( "Moving functions + variable into deeper modules" ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node root [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node externs  gramps  node  parent  root  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^if  ( graph == null && graph.getModuleCount (  )  > 1 )  {^79^^^^^75^87^[REPLACE] if  ( graph != null && graph.getModuleCount (  )  > 1 )  {^[METHOD] process [TYPE] void [PARAMETER] Node externs Node root [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node externs  gramps  node  parent  root  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^NodeTraversal.traverse ( compiler, parent, this ) ;^82^^^^^75^87^[REPLACE] NodeTraversal.traverse ( compiler, root, this ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node root [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node externs  gramps  node  parent  root  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[ADD]^^82^^^^^75^87^[ADD] NodeTraversal.traverse ( compiler, root, this ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node root [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node externs  gramps  node  parent  root  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[REPLACE]^compiler.reportCodeChange (  ) ;^85^^^^^75^87^[REPLACE] moveCode (  ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node root [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node externs  gramps  node  parent  root  [TYPE]  JSModule declModule  deepestModule  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph 
[ADD]^^104^105^^^^90^141^[ADD] while  ( it.hasNext (  )  )  { Declaration decl = it.next (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( decl.module == false ) {^106^107^108^^^90^141^[REPLACE] if  ( decl.module != null && moduleGraph.dependsOn ( deepestDependency, decl.module )  )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( destParent != false )  {^112^^^^^106^137^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^112^113^114^115^^106^137^[ADD] if  ( destParent == null )  { destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ; moduleVarParentMap.put ( deepestDependency, destParent ) ; }^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent =  compiler.getNodeForCodeInsertion ( module ) ;^113^^^^^106^137^[REPLACE] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR || declParent.getChildCount (  )  > 1 )  {^121^122^^^^106^137^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^declParent.getParent (  ) ;^130^^^^^121^134^[REPLACE] declParent.detachFromParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent.removeChild ( declParent ) ;^133^^^^^121^134^[REPLACE] destParent.addChildToFront ( declParent ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^133^^^^^121^134^[ADD] destParent.addChildToFront ( declParent ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootNode = t.getScope (  ) .getRootNode (  ) ;^126^^^^^121^134^[REPLACE] Node var = new Node ( Token.VAR, decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^126^127^^^^121^134^[ADD] Node var = new Node ( Token.VAR, decl.node ) ; destParent.addChildToFront ( var ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node destParent = moduleVarParentMap.get ( module ) ;^111^^^^^106^137^[REPLACE] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node declParent = decl.node .getString (  )  ;^120^^^^^106^137^[REPLACE] Node declParent = decl.node.getParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootNode = t.getScope (  ) .getRootNode (  ) ;^126^^^^^106^137^[REPLACE] Node var = new Node ( Token.VAR, decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  (parent != null )  {^112^^^^^90^141^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent =  compiler.getNodeForCodeInsertion ( module ) ;^113^^^^^90^141^[REPLACE] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^113^114^^^^90^141^[ADD] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ; moduleVarParentMap.put ( deepestDependency, destParent ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR || declParent.getChildCount (  )  > 4 )  {^121^122^^^^90^141^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent =  compiler.getNodeForCodeInsertion ( null ) ;^113^^^^^90^141^[REPLACE] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Declaration decl = null.hasNext (  ) ;^105^^^^^90^141^[REPLACE] Declaration decl = it.next (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node destParent = moduleVarParentMap.get ( module ) ;^111^^^^^90^141^[REPLACE] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^111^^^^^90^141^[ADD] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node declParent = decl.node.getString (  ) ;^120^^^^^90^141^[REPLACE] Node declParent = decl.node.getParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootNode = t.getScope (  ) .getRootNode (  ) ;^126^^^^^90^141^[REPLACE] Node var = new Node ( Token.VAR, decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( info.allowMove && deepestDependency == this )  {^101^^^^^90^141^[REPLACE] if  ( info.allowMove && deepestDependency != null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( decl.module == true ) {^106^107^108^^^90^141^[REPLACE] if  ( decl.module != null && moduleGraph.dependsOn ( deepestDependency, decl.module )  )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( var != null )  {^112^^^^^106^137^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR || declParent.getChildCount (  )  > 1 * 4 )  {^121^122^^^^106^137^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent.addChildToFront ( var ) ;^133^^^^^121^134^[REPLACE] destParent.addChildToFront ( declParent ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^126^^^^^121^134^[ADD] Node var = new Node ( Token.VAR, decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^111^^^^^106^137^[ADD] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node declParent = decl.node.getString (  ) ;^120^^^^^106^137^[REPLACE] Node declParent = decl.node.getParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^126^^^^^106^137^[ADD] Node var = new Node ( Token.VAR, decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( destParent != null )  {^112^^^^^90^141^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR || declParent.getChildCount (  )  > 1 )  {^121^122^^^^90^141^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent .getChildCount (  )  ;^133^^^^^121^134^[REPLACE] destParent.addChildToFront ( declParent ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^113^^^^^90^141^[ADD] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Declaration decl = 1.next (  ) ;^105^^^^^90^141^[REPLACE] Declaration decl = it.next (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node destParent = moduleVarParentMap .put ( declModule , root )  ;^111^^^^^90^141^[REPLACE] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node declParent = decl.node .getString (  )  ;^120^^^^^90^141^[REPLACE] Node declParent = decl.node.getParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^120^^^^^90^141^[ADD] Node declParent = decl.node.getParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( decl.module == null && moduleGraph.dependsOn ( deepestDependency, decl.module )  )  {^106^107^108^^^90^141^[REPLACE] if  ( decl.module != null && moduleGraph.dependsOn ( deepestDependency, decl.module )  )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( destParent != null )  {^112^^^^^106^137^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^113^^^^^106^137^[ADD] destParent = compiler.getNodeForCodeInsertion ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR ) {^121^122^^^^106^137^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( root != this  )  {^112^^^^^90^141^[REPLACE] if  ( destParent == null )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declParent.getType (  )  == Token.VAR ) {^121^122^^^^90^141^[REPLACE] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Iterator<Declaration> it = info.NamedInfo (  ) ;^102^^^^^90^141^[REPLACE] Iterator<Declaration> it = info.declarationIterator (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^JSModuleGraph moduleGraph = compiler.reportCodeChange (  ) ;^103^^^^^90^141^[REPLACE] JSModuleGraph moduleGraph = compiler.getModuleGraph (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^103^^^^^90^141^[ADD] JSModuleGraph moduleGraph = compiler.getModuleGraph (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Declaration decl = this.hasNext (  ) ;^105^^^^^90^141^[REPLACE] Declaration decl = it.next (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^106^107^108^^^90^141^[ADD] if  ( decl.module != null && moduleGraph.dependsOn ( deepestDependency, decl.module )  )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootNode = t.getScope (  ) .getRootNode (  ) ;^111^^^^^106^137^[REPLACE] Node destParent = moduleVarParentMap.get ( deepestDependency ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^121^122^123^^^90^141^[ADD] if  ( declParent.getType (  )  == Token.VAR && declParent.getChildCount (  )  > 1 )  { declParent.removeChild ( decl.node ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^declParent .getParent (  )  ;^130^^^^^121^134^[REPLACE] declParent.detachFromParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^130^^^^^121^134^[ADD] declParent.detachFromParent (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Map.Entry<Var, NamedInfo> e : namedInfo.entrySet (  )  )  { NamedInfo info = e.getValue (  ) ;^91^^^^^90^141^[REPLACE] for  ( Map.Entry<Var, NamedInfo> e : namedInfo.entrySet (  )  )  {^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^NamedInfo info = null.getValue (  ) ;^92^^^^^90^141^[REPLACE] NamedInfo info = e.getValue (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^JSModuleGraph moduleGraph = compiler.getModuleGraph (  ) ;^94^^^^^90^141^[REPLACE] JSModule deepestDependency = info.deepestModule;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Declaration decl = null.next (  ) ;^105^^^^^90^141^[REPLACE] Declaration decl = it.next (  ) ;^[METHOD] moveCode [TYPE] void [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  Entry e  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  Iterator it  [TYPE]  JSModule declModule  deepestDependency  deepestModule  module  [TYPE]  Declaration decl  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( allowMove )  {^160^^^^^158^172^[REPLACE] if  ( !allowMove )  {^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info;^161^^^^^158^172^[REPLACE] return;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( deepestModule != null )  {^165^^^^^158^172^[REPLACE] if  ( deepestModule == null )  {^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^deepestModule =  graph.getDeepestComodulemoduleonDependencyInclusive ( module, deepestModule ) ;^169^170^^^^158^172^[REPLACE] deepestModule = graph.getDeepestCommonDependencyInclusive ( m, deepestModule ) ;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^169^170^^^^158^172^[ADD] deepestModule = graph.getDeepestCommonDependencyInclusive ( m, deepestModule ) ;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^deepestModule =  module;^166^^^^^158^172^[REPLACE] deepestModule = m;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^166^^^^^158^172^[ADD] deepestModule = m;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( declModule == null && d.module != declModule )  {^181^^^^^179^187^[REPLACE] if  ( declModule != null && d.module != declModule )  {^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Declaration d  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^182^^^^^179^187^[REPLACE] return false;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Declaration d  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^destParent.addChildToFront ( var ) ;^184^^^^^179^187^[REPLACE] declarations.push ( d ) ;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Declaration d  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^declModule =  null.monullule;^185^^^^^179^187^[REPLACE] declModule = d.module;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Declaration d  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^186^^^^^179^187^[REPLACE] return true;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Declaration d  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info;^194^^^^^193^195^[REPLACE] return declarations.iterator (  ) ;^[METHOD] declarationIterator [TYPE] Iterator [PARAMETER] [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node declParent  destParent  externs  gramps  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^222^^^^^213^226^[REPLACE] return true;^[METHOD] hasConditionalAncestor [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child != null;^214^^^^^213^226^[REPLACE] for  ( Node ancestor : n.getAncestors (  )  )  {^[METHOD] hasConditionalAncestor [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^214^215^216^217^218^213^226^[ADD] for  ( Node ancestor : n.getAncestors (  )  )  { switch  ( ancestor.getType (  )  )  { case Token.DO: case Token.FOR: case Token.HOOK:^[METHOD] hasConditionalAncestor [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^225^^^^^213^226^[REPLACE] return false;^[METHOD] hasConditionalAncestor [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^String name = n.getString (  ) ;^232^^^^^231^238^[REPLACE] NamedInfo info = namedInfo.get ( v ) ;^[METHOD] getNamedInfo [TYPE] CrossModuleCodeMotion$NamedInfo [PARAMETER] Var v [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( info != null )  {^233^^^^^231^238^[REPLACE] if  ( info == null )  {^[METHOD] getNamedInfo [TYPE] CrossModuleCodeMotion$NamedInfo [PARAMETER] Var v [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^info ;^234^^^^^231^238^[REPLACE] info = new NamedInfo (  ) ;^[METHOD] getNamedInfo [TYPE] CrossModuleCodeMotion$NamedInfo [PARAMETER] Var v [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^234^^^^^231^238^[ADD] info = new NamedInfo (  ) ;^[METHOD] getNamedInfo [TYPE] CrossModuleCodeMotion$NamedInfo [PARAMETER] Var v [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return;^237^^^^^231^238^[REPLACE] return info;^[METHOD] getNamedInfo [TYPE] CrossModuleCodeMotion$NamedInfo [PARAMETER] Var v [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  true  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^boolean recursive = true;^247^^^^^243^259^[REPLACE] boolean recursive = false;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootNode = t .getModule (  )  .getRootNode (  ) ;^248^^^^^243^259^[REPLACE] Node rootNode = t.getScope (  ) .getRootNode (  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( rootNode.getType (  )   &&  Token.FUNCTION )  {^249^^^^^243^259^[REPLACE] if  ( rootNode.getType (  )  == Token.FUNCTION )  {^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^String scopeFuncName = rootNode.getFirstChild (  ) .getString (  ) ;recursive = true;^249^250^251^252^253^243^259^[ADD] if  ( rootNode.getType (  )  == Token.FUNCTION )  { String scopeFuncName = rootNode.getFirstChild (  ) .getString (  ) ; if  ( scopeFuncName.equals ( name )  )  { recursive = true; }^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^251^^^^^243^259^[REPLACE] if  ( scopeFuncName.equals ( name )  )  {^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^251^252^253^^^243^259^[ADD] if  ( scopeFuncName.equals ( name )  )  { recursive = true; }^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^recursive = false;^252^^^^^243^259^[REPLACE] recursive = true;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^String scopeFuncName = parent .getLastChild (  )  .getString (  ) ;^250^^^^^243^259^[REPLACE] String scopeFuncName = rootNode.getFirstChild (  ) .getString (  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^250^^^^^243^259^[ADD] String scopeFuncName = rootNode.getFirstChild (  ) .getString (  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^String scopeFuncName = rootNode .getLastChild (  )  .getString (  ) ;^250^^^^^243^259^[REPLACE] String scopeFuncName = rootNode.getFirstChild (  ) .getString (  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( !true )  {^256^^^^^243^259^[REPLACE] if  ( !recursive )  {^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^info.addUsedModule ( t.getScope (  )  ) ;^257^^^^^243^259^[REPLACE] info.addUsedModule ( t.getModule (  )  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^info.addUsedModule ( t .getScope (  )   ) ;^257^^^^^243^259^[REPLACE] info.addUsedModule ( t.getModule (  )  ) ;^[METHOD] processReference [TYPE] void [PARAMETER] NodeTraversal t NamedInfo info String name [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  scopeFuncName  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( rootNode.getType (  )   ==  Token.NAME )  {^265^^^^^264^294^[REPLACE] if  ( n.getType (  )  != Token.NAME )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info;^266^^^^^264^294^[REPLACE] return;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^String rootNodeame = n.getString (  ) ;^270^^^^^264^294^[REPLACE] String name = n.getString (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( name.isEmpty (  )  && compiler.getCodingConvention (  ) .isExported ( name )  )  {^271^^^^^264^294^[REPLACE] if  ( name.isEmpty (  )  || compiler.getCodingConvention (  ) .isExported ( name )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^return;^271^272^273^^^264^294^[ADD] if  ( name.isEmpty (  )  || compiler.getCodingConvention (  ) .isExported ( name )  )  { return; }^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info;^272^^^^^264^294^[REPLACE] return;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Var v = t.getModule (  ) .getVar ( name ) ;^278^^^^^264^294^[REPLACE] Var v = t.getScope (  ) .getVar ( name ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( v != null ) {^279^^^^^264^294^[REPLACE] if  ( v == null || !v.isGlobal (  )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info;^280^^^^^264^294^[REPLACE] return;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^String name = n.getString (  ) ;^283^^^^^264^294^[REPLACE] NamedInfo info = getNamedInfo ( v ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( !allowMove )  {^284^^^^^264^294^[REPLACE] if  ( info.allowMove )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^284^285^286^287^288^264^294^[ADD] if  ( info.allowMove )  { if  ( maybeProcessDeclaration ( t, n, parent, info )  )  { if  ( hasConditionalAncestor ( n )  )  { info.allowMove = false; }^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^285^^^^^264^294^[REPLACE] if  ( maybeProcessDeclaration ( t, n, parent, info )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^285^286^287^288^^264^294^[ADD] if  ( maybeProcessDeclaration ( t, n, parent, info )  )  { if  ( hasConditionalAncestor ( n )  )  { info.allowMove = false; }^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^gramps.getParent (  )  )  ) ;^291^^^^^285^292^[REPLACE] processReference ( t, info, name ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REMOVE]^NodeTraversal.traverse ( compiler, root, this ) ;^291^^^^^285^292^[REMOVE] ^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( hasConditionalAncestor ( parent )  )  {^286^^^^^264^294^[REPLACE] if  ( hasConditionalAncestor ( n )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^info.allowMove = true;^287^^^^^264^294^[REPLACE] info.allowMove = false;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^287^^^^^264^294^[ADD] info.allowMove = false;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^286^^^^^264^294^[REPLACE] if  ( hasConditionalAncestor ( n )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( maybeProcessDeclaration ( t, n, var, info )  )  {^285^^^^^264^294^[REPLACE] if  ( maybeProcessDeclaration ( t, n, parent, info )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( hasConditionalAncestor ( rootNode )  )  {^286^^^^^264^294^[REPLACE] if  ( hasConditionalAncestor ( n )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal t Node n Node parent [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Var v  [TYPE]  Node ancestor  declParent  destParent  externs  gramps  n  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  String name  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node gramps = parent.getString (  ) ;^313^^^^^312^371^[REPLACE] Node gramps = parent.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^316^^^^^312^371^[REPLACE] if  ( canMoveValue ( name.getFirstChild (  )  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^316^317^318^319^^312^371^[ADD] if  ( canMoveValue ( name.getFirstChild (  )  )  )  { return info.addDeclaration ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ; }^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addnew Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  , n, parent, gramps )  ) ;^317^318^^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( NodeUtil.isFunctionDeclaration ( var )  )  {^323^^^^^312^371^[REPLACE] if  ( NodeUtil.isFunctionDeclaration ( parent )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info .declarationIterator (  )   ) ;^324^325^^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( current.getType (  )   !=  Token.GETPROP )  {^336^^^^^312^371^[REPLACE] if  ( current.getType (  )  == Token.GETPROP )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  if  (  current.getFirstChild (  )  == child )  {^338^339^^^^312^371^[REPLACE] } else if  ( current.getType (  )  == Token.ASSIGN && current.getFirstChild (  )  == child )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^348^^^^^338^349^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( NodeUtil.isExpressionNode ( currentParent )  ) {^341^342^^^^338^349^[REPLACE] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info .declarationIterator (  )   )  ) ;^343^344^345^^^338^349^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addnew Declaration ( t.getModule (  ) , name, parent, gramps )  , current, currentParent, currentParent.getParent (  )  )  ) ;^343^344^345^^^338^349^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node parentParent = current.getParent (  ) ;^340^^^^^338^349^[REPLACE] Node currentParent = current.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( NodeUtil.isExpressionNode ( currentParent )  ) {^341^342^^^^312^371^[REPLACE] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^341^342^343^344^345^312^371^[ADD] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  { return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t .getScope (  )  , current, rootNode, currentParent.getParent (  )  )  ) ;^343^344^345^^^341^346^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addUsedModule (  new Declaration ( t.getModule (  ) , name, parent, gramps )  , current, currentParent, currentParent.getParent (  )  )  ) ;^343^344^345^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^348^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node varParent = current.getParent (  ) ;^340^^^^^312^371^[REPLACE] Node currentParent = current.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  else {^338^339^^^^312^371^[REPLACE] } else if  ( current.getType (  )  == Token.ASSIGN && current.getFirstChild (  )  == child )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^}   Node currentParent = current.getParent (  ) ;^338^339^340^341^^312^371^[ADD] else if  ( current.getType (  )  == Token.ASSIGN && current.getFirstChild (  )  == child )  { Node currentParent = current.getParent (  ) ; if  ( NodeUtil.isExpressionNode ( currentParent )  &&^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  (  canMoveValue ( current.getLastChild (  )  )  )  {^341^342^^^^338^349^[REPLACE] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^341^342^343^344^345^338^349^[ADD] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  { return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addnew Declaration ( t.getModule (  ) , name, parent, gramps )   , current, var, currentParent.getParent (  )  )  ) ;^343^344^345^^^338^349^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getString (  )  )  ) ;^343^344^345^^^338^349^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node nParent = current.getParent (  ) ;^340^^^^^338^349^[REPLACE] Node currentParent = current.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^340^^^^^338^349^[ADD] Node currentParent = current.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( NodeUtil.isExpressionNode ( currentParent )  || canMoveValue ( current.getLastChild (  )  )  )  {^341^342^^^^312^371^[REPLACE] if  ( NodeUtil.isExpressionNode ( currentParent )  && canMoveValue ( current.getLastChild (  )  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getString (  )  )  ) ;^343^344^345^^^341^346^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^356^^^^^312^371^[REPLACE] if  ( NodeUtil.isExprCall ( gramps )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^356^357^358^359^^312^371^[ADD] if  ( NodeUtil.isExprCall ( gramps )  )  { SubclassRelationship relationship = compiler.getCodingConvention (  ) .getClassesDefinedByCall ( parent ) ; if  ( relationship != null &&^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  (  var.getString (  ) .equals ( relationship.subclassName )  )  {^359^360^^^^312^371^[REPLACE] if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^359^360^361^362^363^312^371^[ADD] if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  { return info.addDeclaration ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t.getScope (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^361^362^363^^^359^364^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addnew Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  , parent, gramps, gramps.getParent (  )  )  ) ;^361^362^363^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^SubclassRelationship relationship = compiler.getCodingConvention (  ) .getClassesDefinedByCall ( var ) ;^357^358^^^^312^371^[REPLACE] SubclassRelationship relationship = compiler.getCodingConvention (  ) .getClassesDefinedByCall ( parent ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( relationship == false ) {^359^360^^^^312^371^[REPLACE] if  ( relationship != null && name.getString (  ) .equals ( relationship.subclassName )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addUsedModule ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^361^362^363^^^359^364^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^child =  null;^351^^^^^312^371^[REPLACE] child = current;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addUsedModule ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^317^318^^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^320^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addUsedModule ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^324^325^^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , name, parent, gramps )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^327^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t.getScope (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^343^344^345^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , current, currentParent, currentParent.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^353^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return info.addDeclaration ( new Declaration ( t.getScope (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^361^362^363^^^312^371^[REPLACE] return info.addDeclaration ( new Declaration ( t.getModule (  ) , parent, gramps, gramps.getParent (  )  )  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^366^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^369^^^^^312^371^[REPLACE] return false;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node child = var;^331^^^^^312^371^[REPLACE] Node child = name;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^331^^^^^312^371^[ADD] Node child = name;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child != null;^335^^^^^312^371^[REPLACE] for  ( Node current : name.getAncestors (  )  )  {^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node rootParent = current .getString (  )  ;^340^^^^^312^371^[REPLACE] Node currentParent = current.getParent (  ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^SubclassRelationship relationship = compiler.getCodingConvention (  ) .getClassesDefinedByCall ( rootNode ) ;^357^358^^^^312^371^[REPLACE] SubclassRelationship relationship = compiler.getCodingConvention (  ) .getClassesDefinedByCall ( parent ) ;^[METHOD] maybeProcessDeclaration [TYPE] boolean [PARAMETER] NodeTraversal t Node name Node parent NamedInfo info [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  NodeTraversal t  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  NamedInfo info  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  SubclassRelationship relationship  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  (  NodeUtil.isLiteralValue ( n )  || n.getType (  )  == Token.FUNCTION )  {^383^384^^^^376^406^[REPLACE] if  ( n == null || NodeUtil.isLiteralValue ( n )  || n.getType (  )  == Token.FUNCTION )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^383^384^385^386^387^376^406^[ADD] if  ( n == null || NodeUtil.isLiteralValue ( n )  || n.getType (  )  == Token.FUNCTION )  { return true; } else if  ( n.getType (  )  == Token.CALL )  { Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^} else if  ( n.getType (  )   &&  Token.CALL )  {^386^^^^^376^406^[REPLACE] } else if  ( n.getType (  )  == Token.CALL )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  if  ( n.getType (  )  == Token.ARRAYLIT && n.getType (  )  == Token.OBJECTLIT )  {^393^394^^^^376^406^[REPLACE] } else if  ( n.getType (  )  == Token.ARRAYLIT || n.getType (  )  == Token.OBJECTLIT )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( !canMoveValue ( rootNode )  )  {^397^^^^^393^403^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^return false;^397^398^399^^^393^403^[ADD] if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^398^^^^^393^403^[REPLACE] return false;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child == this;^395^^^^^393^403^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( canMoveValue ( child )  )  {^397^^^^^393^403^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^child =  rootNode.getNext (  )  )  {^396^^^^^393^403^[REPLACE] child = child.getNext (  )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^396^397^398^^^393^403^[ADD] child = child.getNext (  )  )  { if  ( !canMoveValue ( child )  )  { return false;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^402^^^^^393^403^[REPLACE] return true;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = rootNode.getLastChild (  ) ; child != null;^395^^^^^393^403^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( !canMoveValue ( rootNode )  )  {^397^^^^^376^406^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^398^^^^^376^406^[REPLACE] return false;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child ==rootNode;^395^^^^^376^406^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( !canMoveValue ( rootNode )  )  {^397^^^^^395^400^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^398^^^^^395^400^[REPLACE] return false;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^child =  null.getNext (  )  )  {^396^^^^^376^406^[REPLACE] child = child.getNext (  )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^402^^^^^376^406^[REPLACE] return true;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = node.getFirstChild (  ) ; child != null;^395^^^^^376^406^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^395^396^397^398^399^376^406^[ADD] for  ( Node child = n.getFirstChild (  ) ; child != null; child = child.getNext (  )  )  { if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return functionName.getType (  )  == Token.NAME && ( functionName.getParent (  ) .equals ( CrossModuleMethodMotion.STUB_METHOD_NAME )  || functionName.getString (  ) .equals (^388^389^390^391^^376^406^[REPLACE] return functionName.getType (  )  == Token.NAME && ( functionName.getString (  ) .equals ( CrossModuleMethodMotion.STUB_METHOD_NAME )  || functionName.getString (  ) .equals (^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node functionName = rootNode.getLastChild (  ) ;^387^^^^^376^406^[REPLACE] Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  if  ( n.getType (  )  == Token.ARRAYLIT ) {^393^394^^^^376^406^[REPLACE] } else if  ( n.getType (  )  == Token.ARRAYLIT || n.getType (  )  == Token.OBJECTLIT )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( NoderootNode = n .getLastChild (  )  ; child == null;^395^^^^^393^403^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^395^396^397^398^399^393^403^[ADD] for  ( Node child = n.getFirstChild (  ) ; child != null; child = child.getNext (  )  )  { if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = rootNode.getFirstChild (  ) ; child != null;^395^^^^^393^403^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child == null;^395^^^^^376^406^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( canMoveValue ( child )  )  {^397^^^^^395^400^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true ;^388^389^390^391^^376^406^[REPLACE] return functionName.getType (  )  == Token.NAME && ( functionName.getString (  ) .equals ( CrossModuleMethodMotion.STUB_METHOD_NAME )  || functionName.getString (  ) .equals (^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node functionName = rootNode.getFirstChild (  ) ;^387^^^^^376^406^[REPLACE] Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getLastChild (  ) ; child != null;^395^^^^^376^406^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^385^^^^^383^403^[REPLACE] return true;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  else {^386^^^^^376^406^[REPLACE] } else if  ( n.getType (  )  == Token.CALL )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^}  else {^393^394^^^^376^406^[REPLACE] } else if  ( n.getType (  )  == Token.ARRAYLIT || n.getType (  )  == Token.OBJECTLIT )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^}   for  ( Node child = n.getFirstChild (  ) ; child != null;^393^394^395^396^^376^406^[ADD] else if  ( n.getType (  )  == Token.ARRAYLIT || n.getType (  )  == Token.OBJECTLIT )  { for  ( Node child = n.getFirstChild (  ) ; child != null; child = child.getNext (  )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = n.getFirstChild (  ) ; child == null;^395^^^^^393^403^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( canMoveValue ( child )  )  {^397^^^^^376^406^[REPLACE] if  ( !canMoveValue ( child )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^return false;^397^398^399^^^395^400^[ADD] if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^for  ( Node child = rootNode.getFirstChild (  ) ; child != null;^395^^^^^376^406^[REPLACE] for  ( Node child = n.getFirstChild (  ) ; child != null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return var.getType (  )  == Token.NAME && ( functionName.getString (  ) .getVar ( CrossModuleMethodMotion.STUB_METHOD_NAME )  || functionName.getString (  ) .equals (^388^389^390^391^^376^406^[REPLACE] return functionName.getType (  )  == Token.NAME && ( functionName.getString (  ) .equals ( CrossModuleMethodMotion.STUB_METHOD_NAME )  || functionName.getString (  ) .equals (^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node functionName = parent.getFirstChild (  ) ;^387^^^^^376^406^[REPLACE] Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^397^398^399^^^393^403^[ADD] if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^397^398^399^^^376^406^[ADD] if  ( !canMoveValue ( child )  )  { return false; }^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^child =  rootNode.getNext (  )  )  {^396^^^^^376^406^[REPLACE] child = child.getNext (  )  )  {^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return false;^385^^^^^376^406^[REPLACE] return true;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^Node functionName = node.getFirstChild (  ) ;^387^^^^^376^406^[REPLACE] Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[ADD]^^387^^^^^376^406^[ADD] Node functionName = n.getFirstChild (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^return true;^405^^^^^376^406^[REPLACE] return false;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] CrossModuleCodeMotion NamedInfo Declaration   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^boolean allowMove  = null ;^145^^^^^^^[REPLACE] boolean allowMove = true;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] NamedInfo   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^private JSModule deepestModule  = null ;^148^^^^^^^[REPLACE] private JSModule deepestModule = null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] NamedInfo   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^private JSModule declModule  = null ;^151^^^^^^^[REPLACE] private JSModule declModule = null;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] NamedInfo   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^private final Deque<Declaration> declarations  = null ;^154^155^^^^154^155^[REPLACE] private final Deque<Declaration> declarations = new ArrayDeque<Declaration> (  ) ;^[METHOD] canMoveValue [TYPE] boolean [PARAMETER] Node n [CLASS] NamedInfo   [TYPE]  AbstractCompiler compiler  [TYPE]  boolean allowMove  false  recursive  true  [TYPE]  Node ancestor  child  current  currentParent  declParent  destParent  externs  functionName  gramps  n  name  node  parent  root  rootNode  var  [TYPE]  JSModule declModule  deepestDependency  deepestModule  m  module  [TYPE]  Logger logger  [TYPE]  Map moduleVarParentMap  namedInfo  [TYPE]  Deque declarations  [TYPE]  JSModuleGraph graph  moduleGraph 
[REPLACE]^if  ( allowMove )  {^160^^^^^158^172^[REPLACE] if  ( !allowMove )  {^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^return false;^161^^^^^158^172^[REPLACE] return;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^if  ( deepestModule != null )  {^165^^^^^158^172^[REPLACE] if  ( deepestModule == null )  {^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^deepestModule =  graph.getDeepestCodeclModuledeclModuleonDependencyInclusive ( declModule, deepestModule ) ;^169^170^^^^158^172^[REPLACE] deepestModule = graph.getDeepestCommonDependencyInclusive ( m, deepestModule ) ;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^deepestModule =  declModule;^166^^^^^158^172^[REPLACE] deepestModule = m;^[METHOD] addUsedModule [TYPE] void [PARAMETER] JSModule m [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^if  ( declModule == null ) {^181^^^^^179^187^[REPLACE] if  ( declModule != null && d.module != declModule )  {^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[REPLACE]^return true;^182^^^^^179^187^[REPLACE] return false;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[REPLACE]^return declarations.iterator (  ) ;^184^^^^^179^187^[REPLACE] declarations.push ( d ) ;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[REPLACE]^declModule =  null.monullule;^185^^^^^179^187^[REPLACE] declModule = d.module;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[ADD]^return true;^185^186^^^^179^187^[ADD] declModule = d.module; return true;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[REPLACE]^return false;^186^^^^^179^187^[REPLACE] return true;^[METHOD] addDeclaration [TYPE] boolean [PARAMETER] Declaration d [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Declaration d  [TYPE]  Deque declarations 
[REPLACE]^return false;^194^^^^^193^195^[REPLACE] return declarations.iterator (  ) ;^[METHOD] declarationIterator [TYPE] Iterator [PARAMETER] [CLASS] NamedInfo   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^JSModule module;^199^^^^^^^[REPLACE] final JSModule module;^[METHOD] declarationIterator [TYPE] Iterator [PARAMETER] [CLASS] Declaration   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^Node node;^200^^^^^^^[REPLACE] final Node node;^[METHOD] declarationIterator [TYPE] Iterator [PARAMETER] [CLASS] Declaration   [TYPE]  JSModule declModule  deepestModule  m  [TYPE]  boolean allowMove  false  true  [TYPE]  Deque declarations 
[REPLACE]^this.node = node; ;^203^^^^^202^205^[REPLACE] this.module = module;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] Declaration   [TYPE]  JSModule module  [TYPE]  Node gramps  node  parent  [TYPE]  boolean false  true 
[ADD]^this.node = node;^203^204^^^^202^205^[ADD] this.module = module; this.node = node;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] Declaration   [TYPE]  JSModule module  [TYPE]  Node gramps  node  parent  [TYPE]  boolean false  true 
[REPLACE]^this.module = module; ;^204^^^^^202^205^[REPLACE] this.node = node;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] Declaration   [TYPE]  JSModule module  [TYPE]  Node gramps  node  parent  [TYPE]  boolean false  true 
[ADD]^^204^^^^^202^205^[ADD] this.node = node;^[METHOD] <init> [TYPE] Node) [PARAMETER] JSModule module Node node Node parent Node gramps [CLASS] Declaration   [TYPE]  JSModule module  [TYPE]  Node gramps  node  parent  [TYPE]  boolean false  true 
