[REPLACE]^private final static byte[] NO_BYTES  = null ;^27^^^^^^^[REPLACE] private final static byte[] NO_BYTES = new byte[0];^ [CLASS] ByteArrayBuilder  
[REPLACE]^private final static  short  INITIAL_BLOCK_SIZE = 4;^32^^^^^^^[REPLACE] private final static int INITIAL_BLOCK_SIZE = 500;^ [CLASS] ByteArrayBuilder  
[REPLACE]^private final static int MAX_BLOCK_SIZE  = null ;^38^^^^^^^[REPLACE] private final static int MAX_BLOCK_SIZE =  ( 1 << 18 ) ;^ [CLASS] ByteArrayBuilder  
[REPLACE]^final  int DEFAULT_BLOCK_ARRAY_SIZE = 40;^40^^^^^^^[REPLACE] final static int DEFAULT_BLOCK_ARRAY_SIZE = 40;^ [CLASS] ByteArrayBuilder  
[REPLACE]^private final LinkedList<byte[]> _pastBlocks ;^48^^^^^^^[REPLACE] private final LinkedList<byte[]> _pastBlocks = new LinkedList<byte[]> (  ) ;^ [CLASS] ByteArrayBuilder  
[REPLACE]^public ByteArrayBuilder (  )  { this ( false ) ; }^59^^^^^^^[REPLACE] public ByteArrayBuilder (  )  { this ( null ) ; }^[METHOD] <init> [TYPE] ByteArrayBuilder() [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^59^60^61^^^^^[ADD] public ByteArrayBuilder (  )  { this ( null ) ; }  public ByteArrayBuilder ( BufferRecycler br )  { this ( br, INITIAL_BLOCK_SIZE ) ; }^[METHOD] <init> [TYPE] ByteArrayBuilder() [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^public ByteArrayBuilder ( BufferRecycler _bufferRecycler )  { this ( br, INITIAL_BLOCK_SIZE ) ; }^61^^^^^^^[REPLACE] public ByteArrayBuilder ( BufferRecycler br )  { this ( br, INITIAL_BLOCK_SIZE ) ; }^[METHOD] <init> [TYPE] BufferRecycler) [PARAMETER] BufferRecycler br [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^public ByteArrayBuilder ( int firstBlockSize )  { this ( true, firstBlockSize ) ; }^63^^^^^^^[REPLACE] public ByteArrayBuilder ( int firstBlockSize )  { this ( null, firstBlockSize ) ; }^[METHOD] <init> [TYPE] ByteArrayBuilder(int) [PARAMETER] int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_bufferRecycler =  null;^67^^^^^65^73^[REPLACE] _bufferRecycler = br;^[METHOD] <init> [TYPE] BufferRecycler,int) [PARAMETER] BufferRecycler br int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( _bufferRecycler != this )  {^68^^^^^65^73^[REPLACE] if  ( br == null )  {^[METHOD] <init> [TYPE] BufferRecycler,int) [PARAMETER] BufferRecycler br int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock =  _bufferRecycler.allocByteBuffer ( BufferRecycler.ByteBufferType.WRITE_CONCAT_BUFFER ) ;^71^^^^^65^73^[REPLACE] _currBlock = br.allocByteBuffer ( BufferRecycler.ByteBufferType.WRITE_CONCAT_BUFFER ) ;^[METHOD] <init> [TYPE] BufferRecycler,int) [PARAMETER] BufferRecycler br int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock = new byte[newSize]; ;^69^^^^^65^73^[REPLACE] _currBlock = new byte[firstBlockSize];^[METHOD] <init> [TYPE] BufferRecycler,int) [PARAMETER] BufferRecycler br int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock =  null.allocByteBuffer ( BufferRecycler.ByteBufferType.WRITE_CONCAT_BUFFER ) ;^71^^^^^65^73^[REPLACE] _currBlock = br.allocByteBuffer ( BufferRecycler.ByteBufferType.WRITE_CONCAT_BUFFER ) ;^[METHOD] <init> [TYPE] BufferRecycler,int) [PARAMETER] BufferRecycler br int firstBlockSize [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastLen = 4;^77^^^^^75^83^[REPLACE] _pastLen = 0;^[METHOD] reset [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[ADD]^^77^78^^^^75^83^[ADD] _pastLen = 0; _currBlockPtr = 0;^[METHOD] reset [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlockPtr = 3;^78^^^^^75^83^[REPLACE] _currBlockPtr = 0;^[METHOD] reset [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( _pastBlocks.isEmpty (  )  )  {^80^^^^^75^83^[REPLACE] if  ( !_pastBlocks.isEmpty (  )  )  {^[METHOD] reset [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastBlocks .LinkedList (  )  ;^81^^^^^75^83^[REPLACE] _pastBlocks.clear (  ) ;^[METHOD] reset [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( b24 ) ;^91^^^^^90^96^[REPLACE] reset (  ) ;^[METHOD] release [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( _bufferRecycler == null ) {^92^^^^^90^96^[REPLACE] if  ( _bufferRecycler != null && _currBlock != null )  {^[METHOD] release [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock = this;^94^^^^^90^96^[REPLACE] _currBlock = null;^[METHOD] release [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[ADD]^^94^^^^^90^96^[ADD] _currBlock = null;^[METHOD] release [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( _currBlockPtr >= _currBlock.length + 3 )  {^100^^^^^98^104^[REPLACE] if  ( _currBlockPtr >= _currBlock.length )  {^[METHOD] append [TYPE] void [PARAMETER] int i [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastBlocks.clear (  ) ;^101^^^^^98^104^[REPLACE] _allocMore (  ) ;^[METHOD] append [TYPE] void [PARAMETER] int i [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 16 ) ; ;^103^^^^^98^104^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )  i;^[METHOD] append [TYPE] void [PARAMETER] int i [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  (  ( _currBlockPtr + 1 )  < _currBlock.length + 2 )  {^108^^^^^106^115^[REPLACE] if  (  ( _currBlockPtr + 1 )  < _currBlock.length )  {^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( b16  <=  8 ) ;^112^^^^^106^115^[REPLACE] append ( b16 >> 8 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( firstBlockSize ) ;^113^^^^^106^115^[REPLACE] append ( b16 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[ADD]^^113^^^^^106^115^[ADD] append ( b16 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( firstBlockSize  <  8 >> 3 ) ;^109^^^^^106^115^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b16 >> 8 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 16 ) ; ;^110^^^^^106^115^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )  b16;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b16  == firstBlockSize ) ;^109^^^^^106^115^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b16 >> 8 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[ADD]^^109^^^^^106^115^[ADD] _currBlock[_currBlockPtr++] =  ( byte )   ( b16 >> 8 ) ;^[METHOD] appendTwoBytes [TYPE] void [PARAMETER] int b16 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  (  ( _currBlockPtr + 2 )  < _currBlock.length - 4 )  {^119^^^^^117^128^[REPLACE] if  (  ( _currBlockPtr + 2 )  < _currBlock.length )  {^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( firstBlockSize  <= b16 * 3 ) ;^124^^^^^117^128^[REPLACE] append ( b24 >> 16 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( b24  !=  8 << 0 ) ;^125^^^^^117^128^[REPLACE] append ( b24 >> 8 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( firstBlockSize ) ;^126^^^^^117^128^[REPLACE] append ( b24 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[ADD]^^126^^^^^117^128^[ADD] append ( b24 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b24  ==  16 ) ;^120^^^^^117^128^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 16 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b24  != firstBlockSize ) ;^121^^^^^117^128^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 8 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[ADD]^^121^^^^^117^128^[ADD] _currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 8 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 16 ) ; ;^122^^^^^117^128^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )  b24;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[ADD]^^122^^^^^117^128^[ADD] _currBlock[_currBlockPtr++] =  ( byte )  b24;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )  i; ;^120^^^^^117^128^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 16 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock[_currBlockPtr++] =  ( byte )   (firstBlockSize  <  1 ) ;^121^^^^^117^128^[REPLACE] _currBlock[_currBlockPtr++] =  ( byte )   ( b24 >> 8 ) ;^[METHOD] appendThreeBytes [TYPE] void [PARAMETER] int b24 [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int totalLen = totalLen + len;^136^^^^^135^160^[REPLACE] int totalLen = _pastLen + _currBlockPtr;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( offset  &&  0 )  {^138^^^^^135^160^[REPLACE] if  ( totalLen == 0 )  {^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^return NO_BYTES;^138^139^140^^^135^160^[ADD] if  ( totalLen == 0 )  { return NO_BYTES; }^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlock;^139^^^^^135^160^[REPLACE] return NO_BYTES;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int max = _currBlock.length - _currBlockPtr;^142^^^^^135^160^[REPLACE] byte[] result = new byte[totalLen];^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^142^^^^^135^160^[ADD] byte[] result = new byte[totalLen];^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int offset = 2;^143^^^^^135^160^[REPLACE] int offset = 0;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^offset +=  totalLen;^148^^^^^135^160^[REPLACE] offset += len;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^for  ( byte[] block : _pastBlocks )  { int len = block.length;^145^^^^^135^160^[REPLACE] for  ( byte[] block : _pastBlocks )  {^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^145^146^147^148^149^135^160^[ADD] for  ( byte[] block : _pastBlocks )  { int len = block.length; System.arraycopy ( block, 0, result, offset, len ) ; offset += len; }^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int len = _currBlock.length;^146^^^^^135^160^[REPLACE] int len = block.length;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^System.arraycopy ( _currBlock, 4, result, offset, _currBlockPtr ) ;^150^^^^^135^160^[REPLACE] System.arraycopy ( _currBlock, 0, result, offset, _currBlockPtr ) ;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^offset + =  offset +;^151^^^^^135^160^[REPLACE] offset += _currBlockPtr;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( len  ==  totalLen )  {^152^^^^^135^160^[REPLACE] if  ( offset != totalLen )  {^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return ;^153^^^^^135^160^[REPLACE] throw new RuntimeException  (" ")  ;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^153^^^^^135^160^[ADD] throw new RuntimeException  (" ")  ;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( _pastBlocks.isEmpty (  )  )  {^156^^^^^135^160^[REPLACE] if  ( !_pastBlocks.isEmpty (  )  )  {^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( b24 ) ;^157^^^^^135^160^[REPLACE] reset (  ) ;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlock;^159^^^^^135^160^[REPLACE] return result;^[METHOD] toByteArray [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( b24 ) ;^173^^^^^172^175^[REPLACE] reset (  ) ;^[METHOD] resetAndGetFirstSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^173^^^^^172^175^[ADD] reset (  ) ;^[METHOD] resetAndGetFirstSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlockPtr;^174^^^^^172^175^[REPLACE] return _currBlock;^[METHOD] resetAndGetFirstSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastBlocks.clear (  ) ;^183^^^^^182^185^[REPLACE] _allocMore (  ) ;^[METHOD] finishCurrentSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlockPtr;^184^^^^^182^185^[REPLACE] return _currBlock;^[METHOD] finishCurrentSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlockPtr =  firstBlockSize;^198^^^^^196^200^[REPLACE] _currBlockPtr = lastBlockLength;^[METHOD] completeAndCoalesce [TYPE] byte[] [PARAMETER] int lastBlockLength [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlock;^199^^^^^196^200^[REPLACE] return toByteArray (  ) ;^[METHOD] completeAndCoalesce [TYPE] byte[] [PARAMETER] int lastBlockLength [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlockPtr;^203^^^^^202^204^[REPLACE] return _currBlock;^[METHOD] getCurrentSegment [TYPE] byte[] [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlockPtr = 0; ;^207^^^^^206^208^[REPLACE] _currBlockPtr = len;^[METHOD] setCurrentSegmentLength [TYPE] void [PARAMETER] int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^207^^^^^206^208^[ADD] _currBlockPtr = len;^[METHOD] setCurrentSegmentLength [TYPE] void [PARAMETER] int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^return _currBlock;^211^^^^^210^212^[REPLACE] return _currBlockPtr;^[METHOD] getCurrentSegmentLength [TYPE] int [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^write ( b, 0 , b.length ) ;^222^^^^^221^223^[REPLACE] write ( b, 0, b.length ) ;^[METHOD] write [TYPE] void [PARAMETER] byte[] b [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  offset  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^while  ( false )  {^228^^^^^226^240^[REPLACE] while  ( true )  {^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( toCopy  >=  4 )  {^231^^^^^226^240^[REPLACE] if  ( toCopy > 0 )  {^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^len -= toCopy; ;^233^^^^^226^240^[REPLACE] off += toCopy;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlockPtr = 0; ;^234^^^^^226^240^[REPLACE] _currBlockPtr += toCopy;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^off += toCopy; ;^235^^^^^226^240^[REPLACE] len -= toCopy;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( len  != totalLen )  break;^237^^^^^226^240^[REPLACE] if  ( len <= 0 )  break;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^234^^^^^226^240^[ADD] _currBlockPtr += toCopy;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int max = _currBlock.length - 5 - _currBlockPtr;^229^^^^^226^240^[REPLACE] int max = _currBlock.length - _currBlockPtr;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int toCopy = Math.max ( max, len ) ;^230^^^^^226^240^[REPLACE] int toCopy = Math.min ( max, len ) ;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  (totalLen  ==  3 )  {^231^^^^^226^240^[REPLACE] if  ( toCopy > 0 )  {^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  (totalLen  ==  0 )  break;^237^^^^^226^240^[REPLACE] if  ( len <= 0 )  break;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^237^238^239^^^226^240^[ADD] if  ( len <= 0 )  break; _allocMore (  ) ; }^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int max = _currBlock.length (  )  - _currBlockPtr;^229^^^^^226^240^[REPLACE] int max = _currBlock.length - _currBlockPtr;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int toCopy = Math.min ( totalLen, len ) ;^230^^^^^226^240^[REPLACE] int toCopy = Math.min ( max, len ) ;^[METHOD] write [TYPE] void [PARAMETER] byte[] b int off int len [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^append ( lastBlockLength ) ;^244^^^^^243^245^[REPLACE] append ( b ) ;^[METHOD] write [TYPE] void [PARAMETER] int b [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastLen + = null ;^259^^^^^257^275^[REPLACE] _pastLen += _currBlock.length;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^259^^^^^257^275^[ADD] _pastLen += _currBlock.length;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^int newSize = Math.max (  ( _pastLen  ==  1 ) ,  ( INITIAL_BLOCK_SIZE + INITIAL_BLOCK_SIZE )  ) ;^267^^^^^257^275^[REPLACE] int newSize = Math.max (  ( _pastLen >> 1 ) ,  ( INITIAL_BLOCK_SIZE + INITIAL_BLOCK_SIZE )  ) ;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^if  ( newSize  <  MAX_BLOCK_SIZE )  {^269^^^^^257^275^[REPLACE] if  ( newSize > MAX_BLOCK_SIZE )  {^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^newSize  =  newSize ;^270^^^^^257^275^[REPLACE] newSize = MAX_BLOCK_SIZE;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^270^^^^^257^275^[ADD] newSize = MAX_BLOCK_SIZE;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_pastBlocks .LinkedList (  )  ;^272^^^^^257^275^[REPLACE] _pastBlocks.add ( _currBlock ) ;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlock = new byte[firstBlockSize]; ;^273^^^^^257^275^[REPLACE] _currBlock = new byte[newSize];^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[REPLACE]^_currBlockPtr = 0L;^274^^^^^257^275^[REPLACE] _currBlockPtr = 0;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
[ADD]^^274^^^^^257^275^[ADD] _currBlockPtr = 0;^[METHOD] _allocMore [TYPE] void [PARAMETER] [CLASS] ByteArrayBuilder   [TYPE]  byte[] NO_BYTES  _currBlock  b  block  result  [TYPE]  BufferRecycler _bufferRecycler  br  [TYPE]  boolean false  true  [TYPE]  int DEFAULT_BLOCK_ARRAY_SIZE  INITIAL_BLOCK_SIZE  MAX_BLOCK_SIZE  _currBlockPtr  _pastLen  b  b16  b24  firstBlockSize  i  lastBlockLength  len  max  newSize  off  offset  toCopy  totalLen  [TYPE]  LinkedList _pastBlocks 
