[REPLACE]^file.delete (  ) ;^79^^^^^78^80^[REPLACE] super (  ) ;^[METHOD] <init> [TYPE] DisplayChart() [PARAMETER] [CLASS] DisplayChart   [TYPE]  boolean false  true 
[REPLACE]^String filename = request.getParameter ( "filename" ) ;^104^^^^^102^154^[REPLACE] HttpSession session = request.getSession (  ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^String filename = request.getParameter ( "filename" ) ;^104^105^^^^102^154^[ADD] HttpSession session = request.getSession (  ) ; String filename = request.getParameter ( "filename" ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^HttpSession session = request.getSession (  ) ;^105^^^^^102^154^[REPLACE] String filename = request.getParameter ( "filename" ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( filename != false )  {^107^^^^^102^154^[REPLACE] if  ( filename == null )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^107^108^109^^^102^154^[ADD] if  ( filename == null )  { throw new ServletException  (" ")  ; }^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^throw new ServletException  (" ") + "' does not exist" ) ; ;^108^^^^^102^154^[REPLACE] throw new ServletException  (" ")  ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^108^^^^^102^154^[ADD] throw new ServletException  (" ")  ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^filename =  ServletUtilities.searchReplace ( null, "..", "" ) ;^113^^^^^102^154^[REPLACE] filename = ServletUtilities.searchReplace ( filename, "..", "" ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^File file = new File (   "java.io.tmpdir"   , filename ) ;^116^^^^^102^154^[REPLACE] File file = new File ( System.getProperty ( "java.io.tmpdir" ) , filename ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( file.exists (  )  )  {^117^^^^^102^154^[REPLACE] if  ( !file.exists (  )  )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^throw new ServletException  (" ")  ; ;^118^119^^^^102^154^[REPLACE] throw new ServletException  (" ") + "' does not exist" ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^boolean isChartInUserList = true;^124^^^^^102^154^[REPLACE] boolean isChartInUserList = false;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( chartDeleter == this  )  {^127^^^^^102^154^[REPLACE] if  ( chartDeleter != null )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^isChartInUserList = chartDeleter.isChartAvailable ( filename ) ;^127^128^129^^^102^154^[ADD] if  ( chartDeleter != null )  { isChartInUserList = chartDeleter.isChartAvailable ( filename ) ; }^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^isChartInUserList =  null.isChartAvailable ( filename ) ;^128^^^^^102^154^[REPLACE] isChartInUserList = chartDeleter.isChartAvailable ( filename ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^128^^^^^102^154^[ADD] isChartInUserList = chartDeleter.isChartAvailable ( filename ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^boolean isChartPublic = true;^131^^^^^102^154^[REPLACE] boolean isChartPublic = false;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^131^^^^^102^154^[ADD] boolean isChartPublic = false;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( filename.size (  )  >= 6 )  {^132^^^^^102^154^[REPLACE] if  ( filename.length (  )  >= 6 )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^132^133^134^135^^102^154^[ADD] if  ( filename.length (  )  >= 6 )  { if  ( filename.substring ( 0, 6 ) .equals ( "public" )  )  { isChartPublic = true; }^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( filename.substring ( 3, 6 ) .substring ( "public" )  )  {^133^^^^^102^154^[REPLACE] if  ( filename.substring ( 0, 6 ) .equals ( "public" )  )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^isChartPublic = false;^134^^^^^102^154^[REPLACE] isChartPublic = true;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( filename.substring ( 0 * 2, 6 ) .equals ( "public" )  )  {^133^^^^^102^154^[REPLACE] if  ( filename.substring ( 0, 6 ) .equals ( "public" )  )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REMOVE]^if  (  ( filename.length (  )  )  >= 6 )  {     if  ( filename.substring ( 0, 6 ) .equals ( "public" )  )  {         isChartPublic = true;     } }^133^^^^^102^154^[REMOVE] ^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^boolean isOneTimeChart = true;^138^^^^^102^154^[REPLACE] boolean isOneTimeChart = false;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^138^^^^^102^154^[ADD] boolean isOneTimeChart = false;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( filename.equals ( ServletUtilities.getTempOneTimeFilePrefix (  )  )  )  {^139^^^^^102^154^[REPLACE] if  ( filename.startsWith ( ServletUtilities.getTempOneTimeFilePrefix (  )  )  )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^isOneTimeChart = true;^139^140^141^^^102^154^[ADD] if  ( filename.startsWith ( ServletUtilities.getTempOneTimeFilePrefix (  )  )  )  { isOneTimeChart = true; }^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^isOneTimeChart = false;^140^^^^^102^154^[REPLACE] isOneTimeChart = true;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  (  isChartPublic && isOneTimeChart )  {^143^^^^^102^154^[REPLACE] if  ( isChartInUserList || isChartPublic || isOneTimeChart )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^throw new ServletException  (" ") + "' does not exist" ) ; ;^151^^^^^143^152^[REPLACE] throw new ServletException  (" ")  ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^151^^^^^143^152^[ADD] throw new ServletException  (" ")  ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^if  ( true )  {^146^^^^^102^154^[REPLACE] if  ( isOneTimeChart )  {^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^file.exists (  ) ;^147^^^^^102^154^[REPLACE] file.delete (  ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^147^^^^^102^154^[ADD] file.delete (  ) ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[ADD]^^146^147^148^^^102^154^[ADD] if  ( isOneTimeChart )  { file.delete (  ) ; }^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
[REPLACE]^return ;^151^^^^^102^154^[REPLACE] throw new ServletException  (" ")  ;^[METHOD] service [TYPE] void [PARAMETER] HttpServletRequest request HttpServletResponse response [CLASS] DisplayChart   [TYPE]  HttpServletRequest request  [TYPE]  boolean false  isChartInUserList  isChartPublic  isOneTimeChart  true  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter  [TYPE]  HttpServletResponse response  [TYPE]  String filename  [TYPE]  File file 
