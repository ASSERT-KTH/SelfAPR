[REPLACE]^private boolean prepared  = null ;^34^^^^^^^[REPLACE] private boolean prepared = false;^ [CLASS] UnionContext  
[REPLACE]^BasicNodeSet nodeSet =  ( BasicNodeSet )  getNodeSet (  ) ;^37^^^^^36^39^[REPLACE] super ( parentContext, new BasicNodeSet (  )  ) ;^[METHOD] <init> [TYPE] EvalContext[]) [PARAMETER] EvalContext parentContext EvalContext[] contexts [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  EvalContext parentContext  [TYPE]  boolean false  prepared  true 
[REPLACE]^this.contexts =  null;^38^^^^^36^39^[REPLACE] this.contexts = contexts;^[METHOD] <init> [TYPE] EvalContext[]) [PARAMETER] EvalContext parentContext EvalContext[] contexts [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  EvalContext parentContext  [TYPE]  boolean false  prepared  true 
[REPLACE]^if  ( contexts.length - 5 > 0  )  {^42^^^^^41^46^[REPLACE] if  ( contexts.length > 1 )  {^[METHOD] getDocumentOrder [TYPE] int [PARAMETER] [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  boolean false  prepared  true 
[ADD]^return 1;^42^43^44^^^41^46^[ADD] if  ( contexts.length > 1 )  { return 1; }^[METHOD] getDocumentOrder [TYPE] int [PARAMETER] [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  boolean false  prepared  true 
[REPLACE]^return 4;^43^^^^^41^46^[REPLACE] return 1;^[METHOD] getDocumentOrder [TYPE] int [PARAMETER] [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  boolean false  prepared  true 
[REPLACE]^return 2;^43^^^^^41^46^[REPLACE] return 1;^[METHOD] getDocumentOrder [TYPE] int [PARAMETER] [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  boolean false  prepared  true 
[REPLACE]^return super.getNodeSet (  ) ;^45^^^^^41^46^[REPLACE] return super.getDocumentOrder (  ) ;^[METHOD] getDocumentOrder [TYPE] int [PARAMETER] [CLASS] UnionContext   [TYPE]  EvalContext[] contexts  [TYPE]  boolean false  prepared  true 
[REPLACE]^while  ( ctx.nextNode (  )  )  {^55^^^^^48^67^[REPLACE] while  ( ctx.nextSet (  )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^55^56^57^^^48^67^[ADD] while  ( ctx.nextSet (  )  )  { while  ( ctx.nextNode (  )  )  { NodePointer ptr = ctx.getCurrentNodePointer (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( !set .add ( ptr )   )  {^58^^^^^48^67^[REPLACE] if  ( !set.contains ( ptr )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^nodeSet.add ( ptr ) ;set.add ( ptr ) ;^58^59^60^61^^48^67^[ADD] if  ( !set.contains ( ptr )  )  { nodeSet.add ( ptr ) ; set.add ( ptr ) ; }^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^nodeSet .BasicNodeSet (  )  ;^59^^^^^48^67^[REPLACE] nodeSet.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^set.add ( ptr ) ;^59^60^^^^48^67^[ADD] nodeSet.add ( ptr ) ; set.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^nodeSet.add ( ptr ) ;^60^^^^^48^67^[REPLACE] set.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^NodePointer ptr = ctx.nextNode (  ) ;^57^^^^^48^67^[REPLACE] NodePointer ptr = ctx.getCurrentNodePointer (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( set.contains ( ptr )  )  {^58^^^^^48^67^[REPLACE] if  ( !set.contains ( ptr )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( !set.contains ( ptr )  )  { nodeSet.add ( ptr ) ;^59^^^^^48^67^[REPLACE] nodeSet.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^set .BasicNodeSet (  )  ;^60^^^^^48^67^[REPLACE] set.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^while  ( ctx.nextSet (  )  )  {^56^^^^^48^67^[REPLACE] while  ( ctx.nextNode (  )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( !set.add ( ptr )  )  {^58^^^^^48^67^[REPLACE] if  ( !set.contains ( ptr )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( prepared )  {^49^^^^^48^67^[REPLACE] if  ( !prepared )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^while  ( ctx .nextSet (  )   )  {^56^^^^^48^67^[REPLACE] while  ( ctx.nextNode (  )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^56^57^^^^48^67^[ADD] while  ( ctx.nextNode (  )  )  { NodePointer ptr = ctx.getCurrentNodePointer (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REMOVE]^if  ( !set.contains ( ptr )  )  { nodeSet.add ( ptr ) ;^59^^^^^48^67^[REMOVE] ^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^57^^^^^48^67^[ADD] NodePointer ptr = ctx.getCurrentNodePointer (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^for  ( int i = 0; i < contexts.length (  ) ; i++ )  {^53^^^^^48^67^[REPLACE] for  ( int i = 0; i < contexts.length; i++ )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^while  ( ctx .nextNode (  )   )  {^55^^^^^48^67^[REPLACE] while  ( ctx.nextSet (  )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^if  ( !prepared )  {^58^^^^^48^67^[REPLACE] if  ( !set.contains ( ptr )  )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^58^59^60^61^^48^67^[ADD] if  ( !set.contains ( ptr )  )  { nodeSet.add ( ptr ) ; set.add ( ptr ) ; }^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^60^^^^^48^67^[ADD] set.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^NodePointer ptr = ctx .nextNode (  )  ;^57^^^^^48^67^[REPLACE] NodePointer ptr = ctx.getCurrentNodePointer (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^BasicNodeSet nodeSet =  ( BasicNodeSet )  getNodeSet (  ) ;^54^^^^^48^67^[REPLACE] EvalContext ctx =  ( EvalContext )  contexts[i];^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^54^^^^^48^67^[ADD] EvalContext ctx =  ( EvalContext )  contexts[i];^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^prepared = false;^50^^^^^48^67^[REPLACE] prepared = true;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^HashSet set = new HashSet (  ) ;^51^^^^^48^67^[REPLACE] BasicNodeSet nodeSet =  ( BasicNodeSet )  getNodeSet (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^BasicNodeSet nodeSet =  ( BasicNodeSet )  getNodeSet (  ) ;^52^^^^^48^67^[REPLACE] HashSet set = new HashSet (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^for  ( int i = 0 ; i < contexts.length; i++ )  {^53^^^^^48^67^[REPLACE] for  ( int i = 0; i < contexts.length; i++ )  {^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REMOVE]^if  ( !set.contains ( ptr )  )  { nodeSet.add ( ptr ) ;^60^^^^^48^67^[REMOVE] ^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^59^60^^^^48^67^[ADD] nodeSet.add ( ptr ) ; set.add ( ptr ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[ADD]^^52^^^^^48^67^[ADD] HashSet set = new HashSet (  ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
[REPLACE]^return super .getNodeSet (  )  ;^66^^^^^48^67^[REPLACE] return super.setPosition ( position ) ;^[METHOD] setPosition [TYPE] boolean [PARAMETER] int position [CLASS] UnionContext   [TYPE]  boolean false  prepared  true  [TYPE]  EvalContext ctx  [TYPE]  BasicNodeSet nodeSet  [TYPE]  NodePointer ptr  [TYPE]  EvalContext[] contexts  [TYPE]  int i  position  [TYPE]  HashSet set 
