[REPLACE]^public  final char[] US_ENGLISH_MAPPING = "01360240043788015936020505".toCharArray (  ) ;^38^^^^^^^[REPLACE] public static final char[] US_ENGLISH_MAPPING = "01360240043788015936020505".toCharArray (  ) ;^ [CLASS] RefinedSoundex  
[REPLACE]^private  char[] soundexMapping;^45^^^^^^^[REPLACE] private final char[] soundexMapping;^ [CLASS] RefinedSoundex  
[REPLACE]^public static final RefinedSoundex US_ENGLISH  = null ;^51^^^^^^^[REPLACE] public static final RefinedSoundex US_ENGLISH = new RefinedSoundex (  ) ;^ [CLASS] RefinedSoundex  
[REPLACE]^return SoundexUtils.difference ( this, s1, s2 ) ;^58^^^^^57^59^[REPLACE] this ( US_ENGLISH_MAPPING ) ;^[METHOD] <init> [TYPE] RefinedSoundex() [PARAMETER] [CLASS] RefinedSoundex   [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  char[] US_ENGLISH_MAPPING  soundexMapping  [TYPE]  boolean false  true 
[REPLACE]^this.soundexMapping =  null;^71^^^^^70^72^[REPLACE] this.soundexMapping = mapping;^[METHOD] <init> [TYPE] RefinedSoundex(char[]) [PARAMETER] char[] mapping [CLASS] RefinedSoundex   [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping  [TYPE]  boolean false  true 
[REPLACE]^return SoundexUtils .difference ( s1 , s2 )  ;^97^^^^^96^98^[REPLACE] return SoundexUtils.difference ( this, s1, s2 ) ;^[METHOD] difference [TYPE] int [PARAMETER] String s1 String s2 [CLASS] RefinedSoundex   [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  String s1  s2  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( ! ! ( pObject instanceof java.lang.String )  )  {^114^^^^^113^118^[REPLACE] if  ( ! ( pObject instanceof java.lang.String )  )  {^[METHOD] encode [TYPE] Object [PARAMETER] Object pObject [CLASS] RefinedSoundex   [TYPE]  Object pObject  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^114^115^116^^^113^118^[ADD] if  ( ! ( pObject instanceof java.lang.String )  )  { throw new EncoderException  (" ")  ; }^[METHOD] encode [TYPE] Object [PARAMETER] Object pObject [CLASS] RefinedSoundex   [TYPE]  Object pObject  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return ;^115^^^^^113^118^[REPLACE] throw new EncoderException  (" ")  ;^[METHOD] encode [TYPE] Object [PARAMETER] Object pObject [CLASS] RefinedSoundex   [TYPE]  Object pObject  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^115^^^^^113^118^[ADD] throw new EncoderException  (" ")  ;^[METHOD] encode [TYPE] Object [PARAMETER] Object pObject [CLASS] RefinedSoundex   [TYPE]  Object pObject  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return SoundexUtils.difference ( this, s1, s2 ) ;^117^^^^^113^118^[REPLACE] return soundex (  ( String )  pObject ) ;^[METHOD] encode [TYPE] Object [PARAMETER] Object pObject [CLASS] RefinedSoundex   [TYPE]  Object pObject  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return SoundexUtils.difference ( this, s1, s2 ) ;^128^^^^^127^129^[REPLACE] return soundex ( pString ) ;^[METHOD] encode [TYPE] String [PARAMETER] String pString [CLASS] RefinedSoundex   [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  String pString  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( Character.isLetter ( c )  )  {^141^^^^^140^145^[REPLACE] if  ( !Character.isLetter ( c )  )  {^[METHOD] getMappingCode [TYPE] char [PARAMETER] char c [CLASS] RefinedSoundex   [TYPE]  char c  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return 0 - 2;^142^^^^^140^145^[REPLACE] return 0;^[METHOD] getMappingCode [TYPE] char [PARAMETER] char c [CLASS] RefinedSoundex   [TYPE]  char c  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return 1;^142^^^^^140^145^[REPLACE] return 0;^[METHOD] getMappingCode [TYPE] char [PARAMETER] char c [CLASS] RefinedSoundex   [TYPE]  char c  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return this.soundexMapping[Character.isLetter ( c )  - 'A'];^144^^^^^140^145^[REPLACE] return this.soundexMapping[Character.toUpperCase ( c )  - 'A'];^[METHOD] getMappingCode [TYPE] char [PARAMETER] char c [CLASS] RefinedSoundex   [TYPE]  char c  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( str != true )  {^155^^^^^154^183^[REPLACE] if  ( str == null )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return true;^156^^^^^154^183^[REPLACE] return null;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return this;^156^^^^^154^183^[REPLACE] return null;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^str =  SoundexUtils.clean ( null ) ;^158^^^^^154^183^[REPLACE] str = SoundexUtils.clean ( str ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( str.length (  )  - 4 == 0 )  {^159^^^^^154^183^[REPLACE] if  ( str.length (  )  == 0 )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return sBuf.toString (  ) ;^160^^^^^154^183^[REPLACE] return str;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^char last, current;^163^^^^^154^183^[REPLACE] StringBuffer sBuf = new StringBuffer (  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^163^164^^^^154^183^[ADD] StringBuffer sBuf = new StringBuffer (  ) ; sBuf.append ( str.charAt ( 0 )  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^sBuf.append ( str.charAt ( 4 )  ) ;^164^^^^^154^183^[REPLACE] sBuf.append ( str.charAt ( 0 )  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^164^^^^^154^183^[ADD] sBuf.append ( str.charAt ( 0 )  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^sBuf.append ( str.charAt ( 1 )  ) ;^164^^^^^154^183^[REPLACE] sBuf.append ( str.charAt ( 0 )  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^for  ( int i = 0; i < str.length (  ) ; i++ )  {^166^^^^^154^183^[REPLACE] char last, current;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^166^^^^^154^183^[ADD] char last, current;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^last  =  last ;^167^^^^^154^183^[REPLACE] last = '*';^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( current  ||  last )  {^172^^^^^154^183^[REPLACE] if  ( current == last )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REMOVE]^if  ( current != 0 )  {     sBuf.append ( current ) ; }^172^^^^^154^183^[REMOVE] ^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^}  if  ( current  ==  0 )  {^174^^^^^154^183^[REPLACE] } else if  ( current != 0 )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^}^174^175^176^^^154^183^[ADD] else if  ( current != 0 )  { sBuf.append ( current ) ; }^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^sBuf.append ( last ) ;^175^^^^^154^183^[REPLACE] sBuf.append ( current ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^}  else {^174^^^^^154^183^[REPLACE] } else if  ( current != 0 )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return soundex ( pString ) ;^175^^^^^154^183^[REPLACE] sBuf.append ( current ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^for  ( int i = 0; i < str.size (  ) ; i++ )  {^169^^^^^154^183^[REPLACE] for  ( int i = 0; i < str.length (  ) ; i++ )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^if  ( current  &&  last )  {^172^^^^^154^183^[REPLACE] if  ( current == last )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[ADD]^^172^173^174^175^176^154^183^[ADD] if  ( current == last )  { continue; } else if  ( current != 0 )  { sBuf.append ( current ) ; }^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REMOVE]^if  ( current == last )  {     continue; }else     if  ( current != 0 )  {         sBuf.append ( current ) ;     }^174^^^^^154^183^[REMOVE] ^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^sBuf .toString (  )  ;^175^^^^^154^183^[REPLACE] sBuf.append ( current ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^current =  getMappingCode ( null.charAt ( i )  ) ;^171^^^^^154^183^[REPLACE] current = getMappingCode ( str.charAt ( i )  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^last =  null;^178^^^^^154^183^[REPLACE] last = current;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^for  ( int i = 0 ; i < str.length (  ) ; i++ )  {^169^^^^^154^183^[REPLACE] for  ( int i = 0; i < str.length (  ) ; i++ )  {^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
[REPLACE]^return sBuf.StringBuffer (  ) ;^182^^^^^154^183^[REPLACE] return sBuf.toString (  ) ;^[METHOD] soundex [TYPE] String [PARAMETER] String str [CLASS] RefinedSoundex   [TYPE]  StringBuffer sBuf  [TYPE]  RefinedSoundex US_ENGLISH  [TYPE]  boolean false  true  [TYPE]  char current  last  [TYPE]  String str  [TYPE]  int i  [TYPE]  char[] US_ENGLISH_MAPPING  mapping  soundexMapping 
