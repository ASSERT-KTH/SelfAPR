[REPLACE]^private static  Map<String, Tag> tags = new HashMap<String, Tag> (  ) ;^13^^^^^^^[REPLACE] private static final Map<String, Tag> tags = new HashMap<String, Tag> (  ) ;^ [CLASS] Tag  
[REPLACE]^private boolean isBlock = false;^21^^^^^^^[REPLACE] private boolean isBlock = true;^ [CLASS] Tag  
[REPLACE]^private boolean canContainBlock ;^22^^^^^^^[REPLACE] private boolean canContainBlock = true;^ [CLASS] Tag  
[REPLACE]^private boolean canContainInline ;^23^^^^^^^[REPLACE] private boolean canContainInline = true;^ [CLASS] Tag  
[REPLACE]^private boolean optionalClosing ;^24^^^^^^^[REPLACE] private boolean optionalClosing = false;^ [CLASS] Tag  
[REPLACE]^private boolean empty  = null ;^25^^^^^^^[REPLACE] private boolean empty = false;^ [CLASS] Tag  
[REPLACE]^private boolean preserveWhitespace ;^26^^^^^^^[REPLACE] private boolean preserveWhitespace = false;^ [CLASS] Tag  
[REPLACE]^notNull ( child )  ;^45^^^^^44^60^[REPLACE] Validate.notNull ( tagName ) ;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^^46^^^^^44^60^[ADD] tagName = tagName.trim (  ) .toLowerCase (  ) ;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^Validate .notNull ( tagName )  ;^47^^^^^44^60^[REPLACE] Validate.notEmpty ( tagName ) ;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REMOVE]^valueOf ( name )  ;^47^^^^^44^60^[REMOVE] ^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  (defaultAncestor != null )  {^51^^^^^44^60^[REPLACE] if  ( tag == null )  {^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^tag =  new Tag ( null ) ;^53^^^^^44^60^[REPLACE] tag = new Tag ( tagName ) ;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^tag.isBlock = true;^55^^^^^44^60^[REPLACE] tag.isBlock = false;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^tag.canContainBlock = false;^56^^^^^44^60^[REPLACE] tag.canContainBlock = true;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^^55^56^^^^44^60^[ADD] tag.isBlock = false; tag.canContainBlock = true;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return defaultAncestor;^58^^^^^44^60^[REPLACE] return tag;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^^50^^^^^44^60^[ADD] Tag tag = tags.get ( tagName ) ;^[METHOD] valueOf [TYPE] Tag [PARAMETER] String tagName [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^Validate.notNull ( defaultAncestor ) ;^68^^^^^67^99^[REPLACE] Validate.notNull ( child ) ;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( child.isBlock && this.canContainBlock ) return true;^70^71^^^^67^99^[REPLACE] if  ( child.isBlock && !this.canContainBlock ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REMOVE]^if  (  ( equals ( "dt" )  )  &&  ( equals ( "dd" )  )  )      return false;^70^^^^^67^99^[REMOVE] ^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^71^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( child.isBlock && !this.canContainInline ) return false;^73^74^^^^67^99^[REPLACE] if  ( !child.isBlock && !this.canContainInline ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^return false;return false;^73^74^^76^77^67^99^[ADD] if  ( !child.isBlock && !this.canContainInline ) return false; if  ( this.optionalClosing && this.equals ( child )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^74^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( this.optionalClosing || this.equals ( defaultAncestor )  ) return false;^76^77^^^^67^99^[REPLACE] if  ( this.optionalClosing && this.equals ( child )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REMOVE]^if  (  ( equals ( "dt" )  )  &&  ( equals ( "dd" )  )  )      return false;^76^^^^^67^99^[REMOVE] ^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^77^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return false;  ;^77^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( this.empty &&true (  )  ) return false;^79^80^^^^67^99^[REPLACE] if  ( this.empty || this.isData (  )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^80^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if   (  tag == null  )   {  ;^84^^^^^67^99^[REPLACE] if  ( this.tagName.equals ( "head" )  )  {^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^^84^85^86^87^88^67^99^[ADD] if  ( this.tagName.equals ( "head" )  )  { if  ( child.tagName.equals ( "base" )  || child.tagName.equals ( "script" )  || child.tagName.equals ( "noscript" )  || child.tagName.equals ( "link" )  || child.tagName.equals ( "meta" )  || child.tagName.equals ( "title" )  || child.tagName.equals ( "style" )  || child.tagName.equals ( "object" )  )  { return true; }^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( child.tagName.equals ( "base" )  && child.tagName.equals ( "script" )  && child.tagName.equals ( "noscript" )  && child.tagName.equals ( "link" )  && child.tagName.equals ( "meta" )  && child.tagName.equals ( "title" )  && child.tagName.equals ( "style" )  && child.tagName.equals ( "object" )  )  {^85^86^^^^67^99^[REPLACE] if  ( child.tagName.equals ( "base" )  || child.tagName.equals ( "script" )  || child.tagName.equals ( "noscript" )  || child.tagName.equals ( "link" )  || child.tagName.equals ( "meta" )  || child.tagName.equals ( "title" )  || child.tagName.equals ( "style" )  || child.tagName.equals ( "object" )  )  {^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return false;^87^^^^^85^88^[REPLACE] return true;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return tag;  ;^87^^^^^67^99^[REPLACE] return true;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^89^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  (  child.tagName.equals ( "script" )  && child.tagName.equals ( "noscript" )  && child.tagName.equals ( "link" )  && child.tagName.equals ( "meta" )  && child.tagName.equals ( "title" )  && child.tagName.equals ( "style" )  && child.tagName.equals ( "object" )  )  {^85^86^^^^67^99^[REPLACE] if  ( child.tagName.equals ( "base" )  || child.tagName.equals ( "script" )  || child.tagName.equals ( "noscript" )  || child.tagName.equals ( "link" )  || child.tagName.equals ( "meta" )  || child.tagName.equals ( "title" )  || child.tagName.equals ( "style" )  || child.tagName.equals ( "object" )  )  {^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return tag;  ;^87^^^^^85^88^[REPLACE] return true;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return false;^87^^^^^67^99^[REPLACE] return true;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if  ( this.tagName.equals ( "dt" )  || child.tagName.equals ( "dd" )  ) return false;^93^94^^^^67^99^[REPLACE] if  ( this.tagName.equals ( "dt" )  && child.tagName.equals ( "dd" )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[ADD]^return false;return false;^93^94^95^96^^67^99^[ADD] if  ( this.tagName.equals ( "dt" )  && child.tagName.equals ( "dd" )  ) return false; if  ( this.tagName.equals ( "dd" )  && child.tagName.equals ( "dt" )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return false;  ;^94^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^94^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^if   (  equals  (  "dt"  )   && equals  (  "dd"  )    )  return false;  ;^95^96^^^^67^99^[REPLACE] if  ( this.tagName.equals ( "dd" )  && child.tagName.equals ( "dt" )  ) return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return true;^96^^^^^67^99^[REPLACE] return false;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
[REPLACE]^return false;^98^^^^^67^99^[REPLACE] return true;^[METHOD] canContain [TYPE] boolean [PARAMETER] Tag child [CLASS] Tag   [TYPE]  List ancestors  [TYPE]  boolean canContainBlock  canContainInline  empty  false  isBlock  optionalClosing  preserveWhitespace  true  [TYPE]  Tag child  defaultAncestor  tag  [TYPE]  String tagName  [TYPE]  Map tags 
