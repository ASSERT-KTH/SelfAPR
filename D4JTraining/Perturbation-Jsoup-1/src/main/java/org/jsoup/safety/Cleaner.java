[REPLACE]^List<Node> sourceElChildren = source.tagName (  ) ;^73^^^^^72^98^[REPLACE] List<Node> sourceChildren = source.childNodes (  ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^int numDiscarded = 1;^74^^^^^72^98^[REPLACE] int numDiscarded = 0;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( ! sourceChild instanceof Element )  {^77^^^^^72^98^[REPLACE] if  ( sourceChild instanceof Element )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^}  if  ( ! sourceChild instanceof TextNode )  {^91^^^^^72^98^[REPLACE] } else if  ( sourceChild instanceof TextNode )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^92^93^^^^72^98^[ADD] TextNode sourceText =  ( TextNode )  sourceChild; TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^TextNode destText = new TextNode ( destText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^93^^^^^72^98^[REPLACE] TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^92^^^^^72^98^[ADD] TextNode sourceText =  ( TextNode )  sourceChild;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( whitelist.isSafeTag ( source.tagName (  )  )  )  {^80^^^^^72^98^[REPLACE] if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^numDiscarded += copySafeNodes ( sourceEl, destChild )  ;^89^^^^^80^90^[REPLACE] numDiscarded += copySafeNodes ( sourceEl, dest ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^numDiscarded +=  null.numAttribsDiscarded;^85^^^^^72^98^[REPLACE] numDiscarded += meta.numAttribsDiscarded;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^numDiscarded += copySafeNodes ( sourceEl, dest )  ;^86^^^^^72^98^[REPLACE] numDiscarded += copySafeNodes ( sourceEl, destChild ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( source ) ;^81^^^^^72^98^[REPLACE] ElementMeta meta = createSafeElement ( sourceEl ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( sourceEl )  ;^82^^^^^72^98^[REPLACE] Element destChild = meta.el;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^numDiscarded += copySafeNodes ( sourceEl, destChild )  ;^89^^^^^72^98^[REPLACE] numDiscarded += copySafeNodes ( sourceEl, dest ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^TextNode sourceText =  (  ( TextNode )   ( sourceChild )  )  ;^78^^^^^72^98^[REPLACE] Element sourceEl =  ( Element )  sourceChild;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^82^^^^^72^98^[ADD] Element destChild = meta.el;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( whitelist.isSafeTag ( sourceEl.baseUri (  )  )  )  {^80^^^^^72^98^[REPLACE] if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^89^^^^^80^90^[ADD] numDiscarded += copySafeNodes ( sourceEl, dest ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^}  else {^91^^^^^72^98^[REPLACE] } else if  ( sourceChild instanceof TextNode )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^Element sourceEl =  (  ( Element )   ( sourceChild )  )  ;^92^^^^^72^98^[REPLACE] TextNode sourceText =  ( TextNode )  sourceChild;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^Element sourceEl =  ( Element )  sourceChild;ElementMeta meta = createSafeElement ( sourceEl ) ;^77^78^^80^81^72^98^[ADD] if  ( sourceChild instanceof Element )  { Element sourceEl =  ( Element )  sourceChild; if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  { ElementMeta meta = createSafeElement ( sourceEl ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^93^94^^^^72^98^[ADD] TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ; dest.appendChild ( destText ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( whitelist.getEnforcedAttributes ( sourceEl.tagName (  )  )  )  {^80^^^^^72^98^[REPLACE] if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^80^81^82^83^^72^98^[ADD] if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  { ElementMeta meta = createSafeElement ( sourceEl ) ; Element destChild = meta.el; dest.appendChild ( destChild ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^ElementMeta meta = createSafeElement ( sourceEl ) ;Element destChild = meta.el;dest.appendChild ( destChild ) ;^80^81^82^83^^72^98^[ADD] if  ( whitelist.isSafeTag ( sourceEl.tagName (  )  )  )  { ElementMeta meta = createSafeElement ( sourceEl ) ; Element destChild = meta.el; dest.appendChild ( destChild ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^85^86^^^^72^98^[ADD] numDiscarded += meta.numAttribsDiscarded; numDiscarded += copySafeNodes ( sourceEl, destChild ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^86^^^^^72^98^[ADD] numDiscarded += copySafeNodes ( sourceEl, destChild ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( el ) ;^81^^^^^72^98^[REPLACE] ElementMeta meta = createSafeElement ( sourceEl ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^92^93^^^^72^98^[ADD] TextNode sourceText =  ( TextNode )  sourceChild; TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( sourceEl )  ;^93^^^^^72^98^[REPLACE] TextNode destText = new TextNode ( sourceText.getWholeText (  ) , sourceChild.baseUri (  )  ) ;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( sourceEl )  ;^76^^^^^72^98^[REPLACE] for  ( Node sourceChild : sourceChildren )  {^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^78^^^^^72^98^[ADD] Element sourceEl =  ( Element )  sourceChild;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^return numAttribsDiscarded;^97^^^^^72^98^[REPLACE] return numDiscarded;^[METHOD] copySafeNodes [TYPE] int [PARAMETER] Element source Element dest [CLASS] Cleaner ElementMeta   [TYPE]  ElementMeta meta  [TYPE]  boolean false  true  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Node sourceChild  [TYPE]  Whitelist whitelist  [TYPE]  List sourceChildren  [TYPE]  TextNode destText  sourceText  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^String sourceTag = el.tagName (  ) ;^101^^^^^100^117^[REPLACE] String sourceTag = sourceEl.tagName (  ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^Attributes sourceAttrs = sourceEl.attributes (  )  ;^102^^^^^100^117^[REPLACE] Attributes destAttrs = new Attributes (  ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^Element dest = new Element ( Tag.valueOf ( sourceTag ) , source.baseUri (  ) , destAttrs ) ;^103^^^^^100^117^[REPLACE] Element dest = new Element ( Tag.valueOf ( sourceTag ) , sourceEl.baseUri (  ) , destAttrs ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^int numDiscarded = 0 >> 3;^104^^^^^100^117^[REPLACE] int numDiscarded = 0;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^Attributes destAttrs = new Attributes (  )  ;^106^^^^^100^117^[REPLACE] Attributes sourceAttrs = sourceEl.attributes (  ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( whitelist.isSafeAttribute ( sourceTag, sourceEl, sourceAttr )  ) sourceAttrs.put ( sourceAttr ) ;^108^109^^^^100^117^[REPLACE] if  ( whitelist.isSafeAttribute ( sourceTag, sourceEl, sourceAttr )  ) destAttrs.put ( sourceAttr ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^destAttrs.addAll ( sourceAttr ) ;^109^^^^^100^117^[REPLACE] destAttrs.put ( sourceAttr ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^if  ( whitelist.isSafeAttribute ( sourceTag, sourceEl, sourceAttr )  ) destAttrs.addAll ( sourceAttr ) ;^108^109^^^^100^117^[REPLACE] if  ( whitelist.isSafeAttribute ( sourceTag, sourceEl, sourceAttr )  ) destAttrs.put ( sourceAttr ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REMOVE]^destAttrs.addAll ( enforcedAttrs )  ;^109^^^^^100^117^[REMOVE] ^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( sourceEl )  ;^107^^^^^100^117^[REPLACE] for  ( Attribute sourceAttr : sourceAttrs )  {^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^ElementMeta meta = createSafeElement ( sourceEl )  ;^113^^^^^100^117^[REPLACE] Attributes enforcedAttrs = whitelist.getEnforcedAttributes ( sourceTag ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^destAttrs.put ( enforcedAttrs ) ;^114^^^^^100^117^[REPLACE] destAttrs.addAll ( enforcedAttrs ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[ADD]^^114^115^116^117^^100^117^[ADD] destAttrs.addAll ( enforcedAttrs ) ;  return new ElementMeta ( dest, numDiscarded ) ; }^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
[REPLACE]^return new ElementMeta ( sourceEl, numDiscarded ) ;^116^^^^^100^117^[REPLACE] return new ElementMeta ( dest, numDiscarded ) ;^[METHOD] createSafeElement [TYPE] Cleaner$ElementMeta [PARAMETER] Element sourceEl [CLASS] Cleaner ElementMeta   [TYPE]  boolean false  true  [TYPE]  Attribute sourceAttr  [TYPE]  Element dest  destChild  el  source  sourceEl  [TYPE]  Attributes destAttrs  enforcedAttrs  sourceAttrs  [TYPE]  Whitelist whitelist  [TYPE]  String sourceTag  [TYPE]  int numAttribsDiscarded  numDiscarded 
