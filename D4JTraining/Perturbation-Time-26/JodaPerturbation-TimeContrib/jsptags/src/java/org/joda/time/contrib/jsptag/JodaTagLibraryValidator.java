[REPLACE]^private static final String SET_DATETIMEZONE  = null ;^85^^^^^^^[REPLACE] private static final String SET_DATETIMEZONE = "setDateTimeZone";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String PARSE_DATETIME ;^87^^^^^^^[REPLACE] private static final String PARSE_DATETIME = "parseDateTime";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String JSP_TEXT ;^89^^^^^^^[REPLACE] private static final String JSP_TEXT = "jsp:text";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final  char  VALUE = "value";^92^^^^^^^[REPLACE] private static final String VALUE = "value";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String VAR ;^98^^^^^^^[REPLACE] private static final String VAR = "var";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String SCOPE  = null ;^100^^^^^^^[REPLACE] private static final String SCOPE = "scope";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String PAGE_SCOPE  = null ;^103^^^^^^^[REPLACE] private static final String PAGE_SCOPE = "page";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String REQUEST_SCOPE  = null ;^105^^^^^^^[REPLACE] private static final String REQUEST_SCOPE = "request";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private static final String SESSION_SCOPE ;^107^^^^^^^[REPLACE] private static final String SESSION_SCOPE = "session";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private  final String APPLICATION_SCOPE = "application";^109^^^^^^^[REPLACE] private static final String APPLICATION_SCOPE = "application";^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private final  long  JSP = "http:^112^113^114^115^^^^[REPLACE] private final String JSP = "http:^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private  char  prefix;^120^^^^^^^[REPLACE] private String prefix;^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private int depth  = null ;^306^^^^^^^[REPLACE] private int depth = 0;^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private String lastElementName ;^308^^^^^^^[REPLACE] private String lastElementName = null;^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private boolean bodyNecessary  = null ;^310^^^^^^^[REPLACE] private boolean bodyNecessary = false;^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^private boolean bodyIllegal ;^312^^^^^^^[REPLACE] private boolean bodyIllegal = false;^ [CLASS] JodaTagLibraryValidator Handler  
[REPLACE]^if  ( messageVector.length (  )  == 0 )  {^176^^^^^149^188^[REPLACE] if  ( messageVector.size (  )  == 0 )  {^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[ADD]^return null;return vmFromVector ( messageVector ) ;^176^177^178^179^180^149^188^[ADD] if  ( messageVector.size (  )  == 0 )  { return null; } else { return vmFromVector ( messageVector ) ; }^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return   (  colon == -1  )   ? qname : qname.substring  (  colon + 1  )  ;  ;^179^^^^^176^180^[REPLACE] return vmFromVector ( messageVector ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return null;  ;^177^^^^^149^188^[REPLACE] return null;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[ADD]^this.uri = uri;messageVector = new Vector (  ) ;^150^151^^153^154^149^188^[ADD] try { this.uri = uri; messageVector = new Vector (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^if  ( messageVector.size (  )  - 4 == 0 )  {^176^^^^^149^188^[REPLACE] if  ( messageVector.size (  )  == 0 )  {^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return true;^177^^^^^149^188^[REPLACE] return null;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^this.uri =  prefix;^151^^^^^149^188^[REPLACE] this.uri = uri;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^messageVector ;^153^^^^^149^188^[REPLACE] messageVector = new Vector (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^this.prefix =  uri;^156^^^^^149^188^[REPLACE] this.prefix = prefix;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return   (  colon == -1  )   ? qname : qname.substring  (  colon + 1  )  ;  ;^179^^^^^149^188^[REPLACE] return vmFromVector ( messageVector ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[ADD]^^167^^^^^149^188^[ADD] DefaultHandler h = new Handler (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^SAXParserFactory f = SAXParserFactory.newSAXParser (  ) ;^170^^^^^149^188^[REPLACE] SAXParserFactory f = SAXParserFactory.newInstance (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^SAXParser p = f.newInstance (  ) ;^173^^^^^149^188^[REPLACE] SAXParser p = f.newSAXParser (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[ADD]^^151^^^^^149^188^[ADD] this.uri = uri;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[ADD]^^153^^^^^149^188^[ADD] messageVector = new Vector (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return   (  colon == -1  )   ? qname : qname.substring  (  colon + 1  )  ;  ;^182^^^^^149^188^[REPLACE] return vmFromString ( ex.toString (  )  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return   (  colon == -1  )   ? qname : qname.substring  (  colon + 1  )  ;  ;^184^^^^^149^188^[REPLACE] return vmFromString ( ex.toString (  )  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^return   (  colon == -1  )   ? qname : qname.substring  (  colon + 1  )  ;  ;^186^^^^^149^188^[REPLACE] return vmFromString ( ex.toString (  )  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^int i = 0  ;^167^^^^^149^188^[REPLACE] DefaultHandler h = new Handler (  ) ;^[METHOD] validate [TYPE] ValidationMessage[] [PARAMETER] String prefix String uri PageData page [CLASS] JodaTagLibraryValidator Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  PageData page  [TYPE]  SAXParser p  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  lastElementId  lastElementName  prefix  uri  [TYPE]  ParserConfigurationException ex  [TYPE]  IOException ex  [TYPE]  Vector messageVector  [TYPE]  int depth  [TYPE]  DefaultHandler h  [TYPE]  SAXParserFactory f  [TYPE]  SAXException ex 
[REPLACE]^if  ( ln != this  )  {^317^^^^^315^375^[REPLACE] if  ( ln == null )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^317^318^319^^^315^375^[ADD] if  ( ln == null )  { ln = getLocalPart ( qn ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^ln =  getLocalPart ( tagLn ) ;^318^^^^^315^375^[REPLACE] ln = getLocalPart ( qn ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^318^^^^^315^375^[ADD] ln = getLocalPart ( qn ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if  ( tagLn.equals ( JSP_TEXT )  )  {^323^^^^^315^375^[REPLACE] if  ( qn.equals ( JSP_TEXT )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^return;  ;^324^^^^^315^375^[REPLACE] return;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if   (  qn.startsWith  (  prefix + ":"  )   && hasEmptyVar  (  a  )    )   {  ;^328^^^^^315^375^[REPLACE] if  ( bodyIllegal )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^fail ( Resources.getMessage ( "TLV_ILLEGAL_BODY", lastElementName )  ) ;^328^329^330^^^315^375^[ADD] if  ( bodyIllegal )  { fail ( Resources.getMessage ( "TLV_ILLEGAL_BODY", lastElementName )  ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^getMessage ( "TLV_DANGLING_SCOPE", qn )  ;^329^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_ILLEGAL_BODY", lastElementName )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^fail ( Resources .getMessage ( VALUE , uri , REQUEST_SCOPE , scope )   ) ;^329^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_ILLEGAL_BODY", lastElementName )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if  ( qn.startsWith ( prefix + ":" )  && hasNoInvalidScope ( a )  )  {^343^^^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" )  && !hasNoInvalidScope ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, tagLn, a .getValue ( SCOPE )  )  ) ;^344^345^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a .getValue ( SCOPE )  )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a  .getValue ( PARSE_DATETIME , att )   )  ) ;^344^345^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a .getValue ( SCOPE )  )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if  ( qn.startsWith ( prefix + ":" )  || hasEmptyVar ( a )  )  {^347^^^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" )  && hasEmptyVar ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ;^347^348^349^^^315^375^[ADD] if  ( qn.startsWith ( prefix + ":" )  && hasEmptyVar ( a )  )  { fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^fail ( Resources.getMessage ( "TLV_EMPTY_VAR", tagLn )  ) ;^348^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^getMessage ( "TLV_DANGLING_SCOPE", qn )  ;^348^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if  ( qn.startsWith ( prefix + ":" ) ) {^350^351^352^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" ) && !isJodaTag ( ns, ln, SET_DATETIMEZONE ) && hasDanglingScope ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^350^351^352^353^354^315^375^[ADD] if  ( qn.startsWith ( prefix + ":" ) && !isJodaTag ( ns, ln, SET_DATETIMEZONE ) && hasDanglingScope ( a )  )  { fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", tagLn )  ) ;^353^^^^^350^354^[REPLACE] fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^353^^^^^350^354^[ADD] fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^bodyNecessary = false;^359^360^^^^315^375^[ADD] bodyIllegal = false; bodyNecessary = false;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^bodyNecessary = true;^360^^^^^315^375^[REPLACE] bodyNecessary = false;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if  ( isJodaTag ( qname, ln, PARSE_DATETIME )  )  {^361^^^^^315^375^[REPLACE] if  ( isJodaTag ( ns, ln, PARSE_DATETIME )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^if   (  qn.startsWith  (  prefix + ":"  )   && hasEmptyVar  (  a  )    )   {  ;^362^^^^^315^375^[REPLACE] if  ( hasAttribute ( a, VALUE )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^365^^^^^362^366^[ADD] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^bodyIllegal = false  ;^363^^^^^315^375^[REPLACE] bodyIllegal = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^bodyIllegal = false;^363^^^^^315^375^[REPLACE] bodyIllegal = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^365^^^^^315^375^[ADD] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^362^363^364^365^366^315^375^[ADD] if  ( hasAttribute ( a, VALUE )  )  { bodyIllegal = true; } else { bodyNecessary = true; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^bodyNecessary = false;^365^^^^^362^366^[REPLACE] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^lastElementName =  tagLn;^370^^^^^315^375^[REPLACE] lastElementName = qn;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[ADD]^^371^^^^^315^375^[ADD] lastElementId = a.getValue ( JSP, "id" ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] JodaTagLibraryValidator Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i 
[REPLACE]^private int depth  = null ;^306^^^^^^^[REPLACE] private int depth = 0;^[METHOD] endElement [TYPE] void [PARAMETER] String ns String ln String qn [CLASS] Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  s  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i  length  start 
[REPLACE]^private String lastElementName  = null ;^308^^^^^^^[REPLACE] private String lastElementName = null;^[METHOD] endElement [TYPE] void [PARAMETER] String ns String ln String qn [CLASS] Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  s  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i  length  start 
[REPLACE]^private boolean bodyNecessary ;^310^^^^^^^[REPLACE] private boolean bodyNecessary = false;^[METHOD] endElement [TYPE] void [PARAMETER] String ns String ln String qn [CLASS] Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  s  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i  length  start 
[REPLACE]^private boolean bodyIllegal ;^312^^^^^^^[REPLACE] private boolean bodyIllegal = false;^[METHOD] endElement [TYPE] void [PARAMETER] String ns String ln String qn [CLASS] Handler   [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String APPLICATION_SCOPE  JSP  JSP_TEXT  PAGE_SCOPE  PARSE_DATETIME  REQUEST_SCOPE  SCOPE  SESSION_SCOPE  SET_DATETIMEZONE  VALUE  VAR  att  lastElementId  lastElementName  ln  matchLn  matchUri  message  ns  prefix  qn  qname  s  scope  tagLn  tagUri  target  uri  [TYPE]  Vector messageVector  v  [TYPE]  int colon  depth  i  length  start 
[REPLACE]^if  ( ln != this )  {^317^^^^^315^375^[REPLACE] if  ( ln == null )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^ln =  getLocalPart ( lastElementName ) ;^318^^^^^315^375^[REPLACE] ln = getLocalPart ( qn ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[ADD]^^318^^^^^315^375^[ADD] ln = getLocalPart ( qn ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if  ( ln.startsWith ( JSP_TEXT )  )  {^323^^^^^315^375^[REPLACE] if  ( qn.equals ( JSP_TEXT )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^return;  ;^324^^^^^315^375^[REPLACE] return;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if   (  qn.startsWith  (  prefix + ":"  )   && hasEmptyVar  (  a  )    )   {  ;^328^^^^^315^375^[REPLACE] if  ( bodyIllegal )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REMOVE]^if  ( bodyNecessary )  {     fail ( getMessage ( "TLV_MISSING_BODY", lastElementName )  ) ; }^328^^^^^315^375^[REMOVE] ^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^getMessage ( "TLV_MISSING_BODY", lastElementName )  ;^329^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_ILLEGAL_BODY", lastElementName )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if   (  qn.startsWith  (  prefix + ":"  )   && hasEmptyVar  (  a  )    )   {  ;^343^^^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" )  && !hasNoInvalidScope ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REMOVE]^if  (  (  ( qn.startsWith (  (  ( prefix )  + ":" )  )  )  &&  ( ! ( isJodaTag ( ns, ln, SET_DATETIMEZONE )  )  )  )  &&  ( hasDanglingScope ( a )  )  )  {     fail ( getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ; }^343^^^^^315^375^[REMOVE] ^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, ln, a  .getValue ( ns , ln )   )  ) ;^344^345^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a .getValue ( SCOPE )  )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a  .getValue ( ns , ns )   )  ) ;^344^345^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_INVALID_ATTRIBUTE", SCOPE, qn, a .getValue ( SCOPE )  )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if  (  hasEmptyVar ( a )  )  {^347^^^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" )  && hasEmptyVar ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[ADD]^fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ;^347^348^349^^^315^375^[ADD] if  ( qn.startsWith ( prefix + ":" )  && hasEmptyVar ( a )  )  { fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^fail ( Resources.getMessage ( "TLV_EMPTY_VAR", ln )  ) ;^348^^^^^315^375^[REPLACE] fail ( Resources.getMessage ( "TLV_EMPTY_VAR", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if  (  isJodaTag ( ns, ln, SET_DATETIMEZONE ) && hasDanglingScope ( a )  )  {^350^351^352^^^315^375^[REPLACE] if  ( qn.startsWith ( prefix + ":" ) && !isJodaTag ( ns, ln, SET_DATETIMEZONE ) && hasDanglingScope ( a )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[ADD]^^350^351^352^353^354^315^375^[ADD] if  ( qn.startsWith ( prefix + ":" ) && !isJodaTag ( ns, ln, SET_DATETIMEZONE ) && hasDanglingScope ( a )  )  { fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ; }^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", ln )  ) ;^353^^^^^350^354^[REPLACE] fail ( Resources.getMessage ( "TLV_DANGLING_SCOPE", qn )  ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyNecessary = false  ;^359^^^^^315^375^[REPLACE] bodyIllegal = false;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyIllegal = false  ;^360^^^^^315^375^[REPLACE] bodyNecessary = false;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if  ( isJodaTag ( ns, qn, PARSE_DATETIME )  )  {^361^^^^^315^375^[REPLACE] if  ( isJodaTag ( ns, ln, PARSE_DATETIME )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^if   (  qn.startsWith  (  prefix + ":"  )   && hasEmptyVar  (  a  )    )   {  ;^362^^^^^315^375^[REPLACE] if  ( hasAttribute ( a, VALUE )  )  {^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyNecessary = false;^365^^^^^362^366^[REPLACE] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[ADD]^^363^^^^^315^375^[ADD] bodyIllegal = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyNecessary = false;^365^^^^^315^375^[REPLACE] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[ADD]^^365^^^^^362^366^[ADD] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyIllegal = false;^363^^^^^315^375^[REPLACE] bodyIllegal = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^bodyNecessary = false  ;^365^^^^^315^375^[REPLACE] bodyNecessary = true;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^lastElementName =  ln;^370^^^^^315^375^[REPLACE] lastElementName = qn;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
[REPLACE]^lastElementId =  null.getVnulllue ( JSP, "id" ) ;^371^^^^^315^375^[REPLACE] lastElementId = a.getValue ( JSP, "id" ) ;^[METHOD] startElement [TYPE] void [PARAMETER] String ns String ln String qn Attributes a [CLASS] Handler   [TYPE]  Attributes a  [TYPE]  boolean bodyIllegal  bodyNecessary  false  true  [TYPE]  String lastElementName  ln  ns  qn  [TYPE]  int depth 
