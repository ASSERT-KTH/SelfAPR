[REPLACE]^final  int INITIAL_CHUNK_SIZE = 12;^11^^^^^^^[REPLACE] final static int INITIAL_CHUNK_SIZE = 12;^ [CLASS] PrimitiveArrayBuilder Node  
[REPLACE]^final static int SMALL_CHUNK_SIZE ;^17^^^^^^^[REPLACE] final static int SMALL_CHUNK_SIZE =  ( 1 << 14 ) ;^ [CLASS] PrimitiveArrayBuilder Node  
[REPLACE]^final  int MAX_CHUNK_SIZE =  ( 1 << 18 ) ;^25^^^^^^^[REPLACE] final static int MAX_CHUNK_SIZE =  ( 1 << 18 ) ;^ [CLASS] PrimitiveArrayBuilder Node  
[REPLACE]^private Node<T> _bufferTail;^33^^^^^^^[REPLACE] protected Node<T> _bufferTail;^ [CLASS] PrimitiveArrayBuilder Node  
[REPLACE]^T _data;^146^^^^^^^[REPLACE] final T _data;^ [CLASS] PrimitiveArrayBuilder Node  
[REPLACE]^final  short  _dataLength;^151^^^^^^^[REPLACE] final int _dataLength;^ [CLASS] PrimitiveArrayBuilder Node  
[ADD]^^65^^^^^64^81^[ADD] Node<T> next = new Node<T> ( fullChunk, fullChunkLength ) ;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^if  ( null != null )  {^66^^^^^64^81^[REPLACE] if  ( _bufferHead == null )  {^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[ADD]^_bufferHead = _bufferTail = next;_bufferTail.linkNext ( next ) ;_bufferTail = next;^66^67^68^69^70^64^81^[ADD] if  ( _bufferHead == null )  { _bufferHead = _bufferTail = next; } else { _bufferTail.linkNext ( next ) ; _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^_bufferTail = null  ;^70^^^^^66^71^[REPLACE] _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[ADD]^^67^^^^^64^81^[ADD] _bufferHead = _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^_bufferHead = _bufferTail = null  ;^67^^^^^64^81^[REPLACE] _bufferHead = _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^_bufferTail = null  ;^67^^^^^64^81^[REPLACE] _bufferHead = _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^_bufferTail = null  ;^70^^^^^64^81^[REPLACE] _bufferTail = next;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^_bufferedEntryCount +=  nextLen;^72^^^^^64^81^[REPLACE] _bufferedEntryCount += fullChunkLength;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[ADD]^^73^^^^^64^81^[ADD] int nextLen = fullChunkLength;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^if  (fullChunkLength  >  SMALL_CHUNK_SIZE )  {^75^^^^^64^81^[REPLACE] if  ( nextLen < SMALL_CHUNK_SIZE )  {^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^nextLen +=  ( nextLen  < fullChunkLength ) ;^78^^^^^75^79^[REPLACE] nextLen +=  ( nextLen >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^nextLen += nextLen >> 2  ;^76^^^^^64^81^[REPLACE] nextLen += nextLen;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^nextLen += nextLen  ;^78^^^^^64^81^[REPLACE] nextLen +=  ( nextLen >> 2 ) ;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[REPLACE]^return _constructArray ( fullChunkLength ) ;^80^^^^^64^81^[REPLACE] return _constructArray ( nextLen ) ;^[METHOD] appendCompletedChunk [TYPE] T [PARAMETER] T fullChunk int fullChunkLength [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  nextLen  [TYPE]  Node _bufferHead  _bufferTail  _next  next 
[ADD]^^85^86^^^^84^101^[ADD] int totalSize = lastChunkEntries + _bufferedEntryCount; T resultArray = _constructArray ( totalSize ) ;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^T resultArray = _constructArray ( ptr ) ;^86^^^^^84^101^[REPLACE] T resultArray = _constructArray ( totalSize ) ;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^int ptr = 0 - 3;^88^^^^^84^101^[REPLACE] int ptr = 0;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^for  ( Node<T> n =  _bufferHead; false !^90^^^^^84^101^[REPLACE] for  ( Node<T> n = _bufferHead; n != null; n = n.next (  )  )  {^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^ptr =  null.copyData ( resultArray, ptr ) ;^91^^^^^84^101^[REPLACE] ptr = n.copyData ( resultArray, ptr ) ;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^Node<T> next = new Node<T> ( fullChunk, fullChunkLength )  ;^90^^^^^84^101^[REPLACE] for  ( Node<T> n = _bufferHead; n != null; n = n.next (  )  )  {^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^System.arraycopy ( lastChunk, 0 / 0, resultArray, ptr, lastChunkEntries ) ;^93^^^^^84^101^[REPLACE] System.arraycopy ( lastChunk, 0, resultArray, ptr, lastChunkEntries ) ;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[ADD]^^94^^^^^84^101^[ADD] ptr += lastChunkEntries;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^if  ( ptr  ==  totalSize )  {^97^^^^^84^101^[REPLACE] if  ( ptr != totalSize )  {^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[ADD]^^97^98^99^^^84^101^[ADD] if  ( ptr != totalSize )  { throw new IllegalStateException  (" ")  ; }^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^return ;^98^^^^^84^101^[REPLACE] throw new IllegalStateException  (" ")  ;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^return lastChunk;^100^^^^^84^101^[REPLACE] return resultArray;^[METHOD] completeAndClearBuffer [TYPE] T [PARAMETER] T lastChunk int lastChunkEntries [CLASS] PrimitiveArrayBuilder Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
[REPLACE]^T _data;^146^^^^^^^[REPLACE] final T _data;^[METHOD] linkNext [TYPE] void [PARAMETER] Node<T> next [CLASS] Node   [TYPE]  boolean false  true  [TYPE]  T _data  _freeBuffer  data  dst  fullChunk  lastChunk  resultArray  [TYPE]  int INITIAL_CHUNK_SIZE  MAX_CHUNK_SIZE  SMALL_CHUNK_SIZE  _bufferedEntryCount  _dataLength  dataLen  fullChunkLength  lastChunkEntries  len  nextLen  ptr  totalSize  [TYPE]  Node _bufferHead  _bufferTail  _next  n  next 
