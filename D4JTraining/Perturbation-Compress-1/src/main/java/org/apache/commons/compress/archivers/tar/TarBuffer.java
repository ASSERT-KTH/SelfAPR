[REPLACE]^public static  int DEFAULT_RCDSIZE =  ( 512 ) ;^42^^^^^^^[REPLACE] public static final int DEFAULT_RCDSIZE =  ( 512 ) ;^ [CLASS] TarBuffer  
[REPLACE]^public static final int DEFAULT_BLKSIZE ;^45^^^^^^^[REPLACE] public static final int DEFAULT_BLKSIZE =  ( DEFAULT_RCDSIZE * 20 ) ;^ [CLASS] TarBuffer  
[REPLACE]^private  long              currRecIdx;^51^^^^^^^[REPLACE] private int             currRecIdx;^ [CLASS] TarBuffer  
[REPLACE]^private  short              blockSize;^52^^^^^^^[REPLACE] private int             blockSize;^ [CLASS] TarBuffer  
[REPLACE]^private  long              recordSize;^53^^^^^^^[REPLACE] private int             recordSize;^ [CLASS] TarBuffer  
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^183^^^^^182^199^[REPLACE] if  ( debug )  {^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "SkipRecord: recIdx = "  currRecIdx  " blkIdx = "  currBlkIdx ) ;^184^185^^^^182^199^[REPLACE] System.err.println ( "SkipRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^184^185^^^^182^199^[ADD] System.err.println ( "SkipRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( inStream != null )  {^188^^^^^182^199^[REPLACE] if  ( inStream == null )  {^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return ;^189^^^^^182^199^[REPLACE] throw new IOException  (" ")  ;^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( i  ==  currRecIdx )  {^192^^^^^182^199^[REPLACE] if  ( currRecIdx >= recsPerBlock )  {^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REMOVE]^if  (  ( currRecIdx )  > 0 )  {     writeBlock (  ) ; }^192^^^^^182^199^[REMOVE] ^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( readBlock (  )  )  {^193^^^^^182^199^[REPLACE] if  ( !readBlock (  )  )  {^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return;  ;^194^^^^^182^199^[REPLACE] return;^[METHOD] skipRecord [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^208^^^^^207^232^[REPLACE] if  ( debug )  {^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^208^209^210^211^^207^232^[ADD] if  ( debug )  { System.err.println ( "ReadRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ; }^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "ReadRecord: recIdx = "  currRecIdx  " blkIdx = "  currBlkIdx ) ;^209^210^^^^207^232^[REPLACE] System.err.println ( "ReadRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( inStream != null )  {^213^^^^^207^232^[REPLACE] if  ( inStream == null )  {^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return ;^214^^^^^207^232^[REPLACE] throw new IOException  (" ")  ;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( currRecIdx  <= recordSize )  {^217^^^^^207^232^[REPLACE] if  ( currRecIdx >= recsPerBlock )  {^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( readBlock (  )  )  {^218^^^^^207^232^[REPLACE] if  ( !readBlock (  )  )  {^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^return null;^218^219^220^^^207^232^[ADD] if  ( !readBlock (  )  )  { return null; }^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return this;^219^^^^^207^232^[REPLACE] return null;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return false;^219^^^^^207^232^[REPLACE] return null;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^int i = 0  ;^223^^^^^207^232^[REPLACE] byte[] result = new byte[recordSize];^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.arraycopy ( blockBuffer, ( currRecIdx  recordSize ) , result, 0, recordSize ) ;^225^226^227^^^207^232^[REPLACE] System.arraycopy ( blockBuffer, ( currRecIdx * recordSize ) , result, 0, recordSize ) ;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return result;  ;^231^^^^^207^232^[REPLACE] return result;^[METHOD] readRecord [TYPE] byte[] [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  currBlkIdx  currRecIdx  i  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^238^^^^^237^301^[REPLACE] if  ( debug )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "ReadBlock: blkIdx = " null ) ;^239^^^^^237^301^[REPLACE] System.err.println ( "ReadBlock: blkIdx = " + currBlkIdx ) ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  outStream != null  )   {  ;^242^^^^^237^301^[REPLACE] if  ( inStream == null )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^throw new IOException ( "writing to an input buffer" )  ;^243^^^^^237^301^[REPLACE] throw new IOException  (" ")  ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^this.currRecIdx = 0  ;^246^^^^^237^301^[REPLACE] currRecIdx = 0;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[ADD]^^248^249^^^^237^301^[ADD] int offset = 0; int bytesNeeded = blockSize;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[ADD]^^249^^^^^237^301^[ADD] int bytesNeeded = blockSize;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( numBytes  !=  -1 )  {^268^^^^^237^301^[REPLACE] if  ( numBytes == -1 )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[ADD]^^268^269^^^^237^301^[ADD] if  ( numBytes == -1 )  { if  ( offset == 0 )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if  (   0 )  {^269^^^^^237^301^[REPLACE] if  ( offset == 0 )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^return false;  ;^273^^^^^237^301^[REPLACE] return false;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( offset  !=  0 )  {^269^^^^^237^301^[REPLACE] if  ( offset == 0 )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^return true;^273^^^^^237^301^[REPLACE] return false;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( numBytes  ==  blockSize )  {^289^^^^^237^301^[REPLACE] if  ( numBytes != blockSize )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^290^^^^^237^301^[REPLACE] if  ( debug )  {^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REMOVE]^if  ( debug )  {     println ( "TarBuffer.closeBuffer (  ) ." ) ; }^290^^^^^237^301^[REMOVE] ^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "ReadBlock: INCOMPLETE READ "  numBytes  " of "  blockSize  " bytes read." ) ;^291^292^293^^^237^301^[REPLACE] System.err.println ( "ReadBlock: INCOMPLETE READ " + numBytes + " of " + blockSize + " bytes read." ) ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[ADD]^^291^292^293^^^237^301^[ADD] System.err.println ( "ReadBlock: INCOMPLETE READ " + numBytes + " of " + blockSize + " bytes read." ) ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "ReadBlock: INCOMPLETE READ "  numBytes  " of "  blockSize null ) ;^291^292^293^^^237^301^[REPLACE] System.err.println ( "ReadBlock: INCOMPLETE READ " + numBytes + " of " + blockSize + " bytes read." ) ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^offset +=  null;^286^^^^^237^301^[REPLACE] offset += numBytes;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^bytesNeeded -=  null;^287^^^^^237^301^[REPLACE] bytesNeeded -= numBytes;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[ADD]^^252^253^^^^237^301^[ADD] long numBytes = inStream.read ( blockBuffer, offset, bytesNeeded ) ;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^return false;^300^^^^^237^301^[REPLACE] return true;^[METHOD] readBlock [TYPE] boolean [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  long numBytes  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^329^^^^^328^354^[REPLACE] if  ( debug )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "WriteRecord: recIdx = "  currRecIdx  " blkIdx = "  currBlkIdx ) ;^330^331^^^^328^354^[REPLACE] System.err.println ( "WriteRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( outStream != null )  {^334^^^^^328^354^[REPLACE] if  ( outStream == null )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^334^335^336^^^328^354^[ADD] if  ( outStream == null )  { throw new IOException  (" ")  ; }^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^throw new IOException ( "reading  ( via skip )  from an output buffer" )  ;^335^^^^^328^354^[REPLACE] throw new IOException  (" ")  ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^return ;^335^^^^^328^354^[REPLACE] throw new IOException  (" ")  ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( result.length *  2 != recordSize )  {^338^^^^^328^354^[REPLACE] if  ( record.length != recordSize )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^339^340^341^^^328^354^[ADD] throw new IOException ( "record to write has length '" + record.length + "' which is not the record size of '"^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^throw new IOException (  (  (  (  (  (  ( "record has length '" +  ( buf.length )  )  + "' with offset '" )  + offset )  + "' which is less than the record size of '" )  +  ( recordSize )  )  + "'" )  )  ;^339^340^341^342^^328^354^[REPLACE] throw new IOException ( "record to write has length '" + record.length + "' which is not the record size of '" + recordSize + "'" ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( currRecIdx  <  recsPerBlock )  {^345^^^^^328^354^[REPLACE] if  ( currRecIdx >= recsPerBlock )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REMOVE]^if  (  ( currRecIdx )  > 0 )  {     writeBlock (  ) ; }^345^^^^^328^354^[REMOVE] ^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^println ( "TarBuffer.flushBlock (  )  called." )  ;^346^^^^^328^354^[REPLACE] writeBlock (  ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.arraycopy ( record, 0, blockBuffer, (recsPerBlock  recordSize ) , recordSize ) ;^349^350^351^^^328^354^[REPLACE] System.arraycopy ( record, 0, blockBuffer, ( currRecIdx * recordSize ) , recordSize ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] record [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^366^^^^^365^391^[REPLACE] if  ( debug )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^366^367^368^369^^365^391^[ADD] if  ( debug )  { System.err.println ( "WriteRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ; }^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.err.println ( "WriteRecord: recIdx = "  currRecIdx  " blkIdx = "  currBlkIdx ) ;^367^368^^^^365^391^[REPLACE] System.err.println ( "WriteRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^367^368^^^^365^391^[ADD] System.err.println ( "WriteRecord: recIdx = " + currRecIdx + " blkIdx = " + currBlkIdx ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( outStream != null )  {^371^^^^^365^391^[REPLACE] if  ( outStream == null )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^371^372^373^^^365^391^[ADD] if  ( outStream == null )  { throw new IOException  (" ")  ; }^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^throw new IOException ( "reading  ( via skip )  from an output buffer" )  ;^372^^^^^365^391^[REPLACE] throw new IOException  (" ")  ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^372^^^^^365^391^[ADD] throw new IOException  (" ")  ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  (  ( offset + recordSize )  > buf.length *  2 )  {^375^^^^^365^391^[REPLACE] if  (  ( offset + recordSize )  > buf.length )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^throw new IOException (  (  (  (  ( "record to write has length '" +  ( record.length )  )  + "' which is not the record size of '" )  +  ( recordSize )  )  + "'" )  )  ;^376^377^378^379^^365^391^[REPLACE] throw new IOException ( "record has length '" + buf.length + "' with offset '" + offset + "' which is less than the record size of '" + recordSize + "'" ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^376^377^378^^^365^391^[ADD] throw new IOException ( "record has length '" + buf.length + "' with offset '" + offset + "' which is less than the record size of '"^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  (recordSize  >  recsPerBlock )  {^382^^^^^365^391^[REPLACE] if  ( currRecIdx >= recsPerBlock )  {^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^println ( "TarBuffer.flushBlock (  )  called." )  ;^383^^^^^365^391^[REPLACE] writeBlock (  ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^System.arraycopy ( result, offset, blockBuffer, ( currRecIdx  recordSize ) , recordSize ) ;^386^387^388^^^365^391^[REPLACE] System.arraycopy ( buf, offset, blockBuffer, ( currRecIdx * recordSize ) , recordSize ) ;^[METHOD] writeRecord [TYPE] void [PARAMETER] byte[] buf int offset [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if   (  currRecIdx >= recsPerBlock  )   {  ;^435^^^^^434^455^[REPLACE] if  ( debug )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^435^436^437^^^434^455^[ADD] if  ( debug )  { System.err.println ( "TarBuffer.closeBuffer (  ) ." ) ; }^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^println ( "TarBuffer.flushBlock (  )  called." )  ;^436^^^^^434^455^[REPLACE] System.err.println ( "TarBuffer.closeBuffer (  ) ." ) ;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( outStream == this )  {^439^^^^^434^455^[REPLACE] if  ( outStream != null )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^}  if  ( inStream == false )  {^448^^^^^434^455^[REPLACE] } else if  ( inStream != null )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^}   inStream.close (  ) ;inStream = null;^448^449^450^^452^434^455^[ADD] else if  ( inStream != null )  { if  ( inStream != System.in )  { inStream.close (  ) ; inStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( inStream  ==  System.in )  {^449^^^^^434^455^[REPLACE] if  ( inStream != System.in )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^449^450^^452^453^434^455^[ADD] if  ( inStream != System.in )  { inStream.close (  ) ; inStream = null; }^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^inStream = false;^452^^^^^434^455^[REPLACE] inStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  (  outStream != System.err )  {^442^443^^^^434^455^[REPLACE] if  ( outStream != System.out && outStream != System.err )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^442^443^444^^446^434^455^[ADD] if  ( outStream != System.out && outStream != System.err )  { outStream.close (  ) ; outStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^446^^^^^442^447^[ADD] outStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^446^^^^^434^455^[ADD] outStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^if  ( outStream != System.out || outStream != System.err )  {^442^443^^^^434^455^[REPLACE] if  ( outStream != System.out && outStream != System.err )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^this.outStream = null  ;^446^^^^^442^447^[REPLACE] outStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^}  else {^448^^^^^434^455^[REPLACE] } else if  ( inStream != null )  {^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^^452^^^^^434^455^[ADD] inStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[REPLACE]^inStream = this;^452^^^^^434^455^[REPLACE] inStream = null;^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
[ADD]^inStream.close (  ) ;inStream = null;^449^450^^452^453^434^455^[ADD] if  ( inStream != System.in )  { inStream.close (  ) ; inStream = null; }^[METHOD] close [TYPE] void [PARAMETER] [CLASS] TarBuffer   [TYPE]  byte[] blockBuffer  buf  record  result  [TYPE]  boolean debug  false  true  [TYPE]  InputStream inStream  [TYPE]  int DEFAULT_BLKSIZE  DEFAULT_RCDSIZE  blockSize  bytesNeeded  currBlkIdx  currRecIdx  i  offset  recordSize  recsPerBlock  sz  [TYPE]  OutputStream outStream 
