[REPLACE]^private  String tempFilePrefix = "jfreechart-";^86^^^^^^^[REPLACE] private static String tempFilePrefix = "jfreechart-";^ [CLASS] ServletUtilities  
[REPLACE]^private static String tempOneTimeFilePrefix ;^89^^^^^^^[REPLACE] private static String tempOneTimeFilePrefix = "jfreechart-onetime-";^ [CLASS] ServletUtilities  
[REPLACE]^return ServletUtilities.tempOneTimeFilePrefix;^97^^^^^96^98^[REPLACE] return ServletUtilities.tempFilePrefix;^[METHOD] getTempFilePrefix [TYPE] String [PARAMETER] [CLASS] ServletUtilities   [TYPE]  String tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( prefix != null )  {^106^^^^^105^110^[REPLACE] if  ( prefix == null )  {^[METHOD] setTempFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^throw new FileNotFoundException  (" ")  ; ;^107^^^^^105^110^[REPLACE] throw new IllegalArgumentException  (" ")  ;^[METHOD] setTempFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^ServletUtilities.tempOneTimeFilePrefix = prefix; ;^109^^^^^105^110^[REPLACE] ServletUtilities.tempFilePrefix = prefix;^[METHOD] setTempFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^109^^^^^105^110^[ADD] ServletUtilities.tempFilePrefix = prefix;^[METHOD] setTempFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return ServletUtilities.tempFilePrefix;^119^^^^^118^120^[REPLACE] return ServletUtilities.tempOneTimeFilePrefix;^[METHOD] getTempOneTimeFilePrefix [TYPE] String [PARAMETER] [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( prefix != false )  {^129^^^^^128^133^[REPLACE] if  ( prefix == null )  {^[METHOD] setTempOneTimeFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^129^130^131^^^128^133^[ADD] if  ( prefix == null )  { throw new IllegalArgumentException  (" ")  ; }^[METHOD] setTempOneTimeFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return ;^130^^^^^128^133^[REPLACE] throw new IllegalArgumentException  (" ")  ;^[METHOD] setTempOneTimeFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^130^^^^^128^133^[ADD] throw new IllegalArgumentException  (" ")  ;^[METHOD] setTempOneTimeFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^ServletUtilities.tempFilePrefix = prefix; ;^132^^^^^128^133^[REPLACE] ServletUtilities.tempOneTimeFilePrefix = prefix;^[METHOD] setTempOneTimeFilePrefix [TYPE] void [PARAMETER] String prefix [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return ServletUtilities .saveChartAsPNG ( chart , height , height , session )  ;^153^154^^^^150^156^[REPLACE] return ServletUtilities.saveChartAsPNG ( chart, width, height, null, session ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  JFreeChart chart  [TYPE]  int height  width  [TYPE]  HttpSession session 
[REPLACE]^if  ( chart != this )  {^180^^^^^177^196^[REPLACE] if  ( chart == null )  {^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^throw new FileNotFoundException  (" ")  ; ;^181^^^^^177^196^[REPLACE] throw new IllegalArgumentException  (" ")  ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[ADD]^^181^^^^^177^196^[ADD] throw new IllegalArgumentException  (" ")  ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ServletUtilities.sendTempFile ( file, response, mimeType ) ;^183^^^^^177^196^[REPLACE] ServletUtilities.createTempDir (  ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^String filename = file.getName (  ) ;^184^^^^^177^196^[REPLACE] String prefix = ServletUtilities.tempFilePrefix;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^if  ( session != null )  {^185^^^^^177^196^[REPLACE] if  ( session == null )  {^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^prefix ;^186^^^^^177^196^[REPLACE] prefix = ServletUtilities.tempOneTimeFilePrefix;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^prefix  =  prefix ;^186^^^^^177^196^[REPLACE] prefix = ServletUtilities.tempOneTimeFilePrefix;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^File tempFile = File.createTempFile ( tempOneTimeFilePrefix, ".png", new File ( System.getProperty ( "java.io.tmpdir" )  )  ) ;^188^189^^^^177^196^[REPLACE] File tempFile = File.createTempFile ( prefix, ".png", new File ( System.getProperty ( "java.io.tmpdir" )  )  ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ChartUtilities.saveChartAsJPEG ( tempFile, chart, height, height, info ) ;^190^^^^^177^196^[REPLACE] ChartUtilities.saveChartAsPNG ( tempFile, chart, width, height, info ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[ADD]^^190^^^^^177^196^[ADD] ChartUtilities.saveChartAsPNG ( tempFile, chart, width, height, info ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^if  ( session == null )  {^191^^^^^177^196^[REPLACE] if  ( session != null )  {^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ServletUtilities.sendTempFile ( tempFile, session ) ;^192^^^^^177^196^[REPLACE] ServletUtilities.registerChartForDeletion ( tempFile, session ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^return tempFile.length (  ) ;^194^^^^^177^196^[REPLACE] return tempFile.getName (  ) ;^[METHOD] saveChartAsPNG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^return ServletUtilities.saveChartAsPNG ( chart, width, width, null, session ) ;^222^223^^^^218^225^[REPLACE] return ServletUtilities.saveChartAsJPEG ( chart, width, height, null, session ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  JFreeChart chart  [TYPE]  int height  width  [TYPE]  HttpSession session 
[REPLACE]^if  ( chart != null )  {^254^^^^^250^271^[REPLACE] if  ( chart == null )  {^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^return ;^255^^^^^250^271^[REPLACE] throw new IllegalArgumentException  (" ")  ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^throw new FileNotFoundException  (" ")  ; ;^255^^^^^250^271^[REPLACE] throw new IllegalArgumentException  (" ")  ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ServletUtilities .sendTempFile ( prefix , this )  ;^258^^^^^250^271^[REPLACE] ServletUtilities.createTempDir (  ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^String filename = file.getName (  ) ;^259^^^^^250^271^[REPLACE] String prefix = ServletUtilities.tempFilePrefix;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[ADD]^^259^^^^^250^271^[ADD] String prefix = ServletUtilities.tempFilePrefix;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^if  ( session != null )  {^260^^^^^250^271^[REPLACE] if  ( session == null )  {^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^prefix  =  prefix ;^261^^^^^250^271^[REPLACE] prefix = ServletUtilities.tempOneTimeFilePrefix;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[ADD]^^261^^^^^250^271^[ADD] prefix = ServletUtilities.tempOneTimeFilePrefix;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^File tempFile = File.createTempFile ( tempOneTimeFilePrefix, ".jpeg", new File ( System.getProperty ( "java.io.tmpdir" )  )  ) ;^263^264^^^^250^271^[REPLACE] File tempFile = File.createTempFile ( prefix, ".jpeg", new File ( System.getProperty ( "java.io.tmpdir" )  )  ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ChartUtilities.saveChartAsPNG ( tempFile, chart, width, height, info ) ;^265^^^^^250^271^[REPLACE] ChartUtilities.saveChartAsJPEG ( tempFile, chart, width, height, info ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^if  ( session == null )  {^266^^^^^250^271^[REPLACE] if  ( session != null )  {^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^ServletUtilities.sendTempFile ( tempFile, session ) ;^267^^^^^250^271^[REPLACE] ServletUtilities.registerChartForDeletion ( tempFile, session ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[ADD]^^267^^^^^250^271^[ADD] ServletUtilities.registerChartForDeletion ( tempFile, session ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^return tempFile .createTempFile ( tempOneTimeFilePrefix , tempOneTimeFilePrefix , tempFile )  ;^269^^^^^250^271^[REPLACE] return tempFile.getName (  ) ;^[METHOD] saveChartAsJPEG [TYPE] String [PARAMETER] JFreeChart chart int width int height ChartRenderingInfo info HttpSession session [CLASS] ServletUtilities   [TYPE]  boolean false  true  [TYPE]  HttpSession session  [TYPE]  ChartRenderingInfo info  [TYPE]  String prefix  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File tempFile  [TYPE]  JFreeChart chart  [TYPE]  int height  width 
[REPLACE]^String tempDirName =   "java.io.tmpdir"   ;^283^^^^^282^294^[REPLACE] String tempDirName = System.getProperty ( "java.io.tmpdir" ) ;^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( tempDirName !=tempOneTimeFilePrefix )  {^284^^^^^282^294^[REPLACE] if  ( tempDirName == null )  {^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return ;^285^286^^^^282^294^[REPLACE] throw new RuntimeException ( "Temporary directory system property " + " ( java.io.tmpdir )  is null." ) ;^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^285^286^^^^282^294^[ADD] throw new RuntimeException ( "Temporary directory system property " + " ( java.io.tmpdir )  is null." ) ;^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^File tempDir = new File ( tempOneTimeFilePrefix ) ;^290^^^^^282^294^[REPLACE] File tempDir = new File ( tempDirName ) ;^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( tempDir.exists (  )  )  {^291^^^^^282^294^[REPLACE] if  ( !tempDir.exists (  )  )  {^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^291^292^293^^^282^294^[ADD] if  ( !tempDir.exists (  )  )  { tempDir.mkdirs (  ) ; }^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^tempDir.exists (  ) ;^292^^^^^282^294^[REPLACE] tempDir.mkdirs (  ) ;^[METHOD] createTempDir [TYPE] void [PARAMETER] [CLASS] ServletUtilities   [TYPE]  File tempDir  [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( session == null )  {^308^^^^^304^320^[REPLACE] if  ( session != null )  {^[METHOD] registerChartForDeletion [TYPE] void [PARAMETER] File tempFile HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File tempFile  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter 
[REPLACE]^System.out.println ( "Session is true - chart will not be deleted" ) ;^318^^^^^304^320^[REPLACE] System.out.println ( "Session is null - chart will not be deleted" ) ;^[METHOD] registerChartForDeletion [TYPE] void [PARAMETER] File tempFile HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File tempFile  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter 
[REPLACE]^if  ( chartDeleter != null )  {^311^^^^^304^320^[REPLACE] if  ( chartDeleter == null )  {^[METHOD] registerChartForDeletion [TYPE] void [PARAMETER] File tempFile HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File tempFile  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter 
[REPLACE]^chartDeleter  =  chartDeleter ;^312^^^^^304^320^[REPLACE] chartDeleter = new ChartDeleter (  ) ;^[METHOD] registerChartForDeletion [TYPE] void [PARAMETER] File tempFile HttpSession session [CLASS] ServletUtilities   [TYPE]  String prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File tempFile  [TYPE]  HttpSession session  [TYPE]  ChartDeleter chartDeleter 
[REPLACE]^File file = new File ( System.getProperty ( "java.io.tmpdir" ) , tempOneTimeFilePrefix ) ;^334^^^^^331^336^[REPLACE] File file = new File ( System.getProperty ( "java.io.tmpdir" ) , filename ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] String filename HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^ServletUtilities .sendTempFile ( file , response , prefix )  ;^335^^^^^331^336^[REPLACE] ServletUtilities.sendTempFile ( file, response ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] String filename HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^String mimeType = false;^349^^^^^346^362^[REPLACE] String mimeType = null;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^String filename = file.length (  ) ;^350^^^^^346^362^[REPLACE] String filename = file.getName (  ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^if  ( filename.length (  )  + 3 > 0  )  {^351^^^^^346^362^[REPLACE] if  ( filename.length (  )  > 5 )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^if  ( tempFilePrefix.substring ( filename.length (  )  - 2 - 0 , filename.length (  )  - 2 ) .equals ( ".jpeg" )  )  {^352^353^^^^346^362^[REPLACE] if  ( filename.substring ( filename.length (  )  - 5, filename.length (  )  ) .equals ( ".jpeg" )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^else {^356^357^^^^346^362^[REPLACE] else if  ( filename.substring ( filename.length (  )  - 4, filename.length (  )  ) .equals ( ".png" )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^mimeType = "image/jpeg"; ;^358^^^^^346^362^[REPLACE] mimeType = "image/png";^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[ADD]^^358^^^^^346^362^[ADD] mimeType = "image/png";^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^mimeType = "image/png"; ;^354^^^^^346^362^[REPLACE] mimeType = "image/jpeg";^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^if  ( filename.substring ( filename.length (  )  + 4 - 4, filename.length (  )  + 4 ) .equals ( ".png" )  )  {^356^357^^^^346^362^[REPLACE] else if  ( filename.substring ( filename.length (  )  - 4, filename.length (  )  ) .equals ( ".png" )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[ADD]^^354^^^^^346^362^[ADD] mimeType = "image/jpeg";^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^if  ( tempOneTimeFilePrefix.substring ( filename.length (  )  *  0.5  - 5, filename.length (  )  *  0.5  ) .equals ( ".jpeg" )  )  {^352^353^^^^346^362^[REPLACE] if  ( filename.substring ( filename.length (  )  - 5, filename.length (  )  ) .equals ( ".jpeg" )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[ADD]^^352^353^354^355^^346^362^[ADD] if  ( filename.substring ( filename.length (  )  - 5, filename.length (  )  ) .equals ( ".jpeg" )  )  { mimeType = "image/jpeg"; }^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^if  ( tempOneTimeFilePrefix.substring ( filename.length (  )  /  0.5  - 4, filename.length (  )  /  0.5  ) .equals ( ".png" )  )  {^356^357^^^^346^362^[REPLACE] else if  ( filename.substring ( filename.length (  )  - 4, filename.length (  )  ) .equals ( ".png" )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^ServletUtilities.searchReplace ( file, response, mimeType ) ;^361^^^^^346^362^[REPLACE] ServletUtilities.sendTempFile ( file, response, mimeType ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response [CLASS] ServletUtilities   [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true  [TYPE]  File file 
[REPLACE]^while  ( eof )  {^395^^^^^374^412^[REPLACE] while  ( !eof )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^if  ( length + 3 == -1 )  {^397^^^^^374^412^[REPLACE] if  ( length == -1 )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^bos.write ( input, 0 , length ) ;^401^^^^^397^402^[REPLACE] bos.write ( input, 0, length ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^eof = false;^398^^^^^374^412^[REPLACE] eof = true;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^File tempDir = new File ( tempDirName ) ;^396^^^^^374^412^[REPLACE] int length = bis.read ( input ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^if  ( filename.length (  )  > 5 )  {^376^^^^^374^412^[REPLACE] if  ( file.exists (  )  )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^376^377^378^^^374^412^[ADD] if  ( file.exists (  )  )  { BufferedInputStream bis = new BufferedInputStream ( new FileInputStream ( file )  ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^throw new IllegalArgumentException  (" ")  ; ;^409^^^^^376^410^[REPLACE] throw new FileNotFoundException  (" ")  ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^String filename = file.getName (  ) ;^409^^^^^376^410^[REPLACE] throw new FileNotFoundException  (" ")  ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^395^396^^^^374^412^[ADD] while  ( !eof )  { int length = bis.read ( input ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^if  ( length *  0.5  == -1 )  {^397^^^^^374^412^[REPLACE] if  ( length == -1 )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^398^^^^^374^412^[ADD] eof = true;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^if  ( mimeType == null )  {^381^^^^^374^412^[REPLACE] if  ( mimeType != null )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^response.setHeader ( "Content-Type", tempOneTimeFilePrefix ) ;^382^^^^^374^412^[REPLACE] response.setHeader ( "Content-Type", mimeType ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REMOVE]^response.setHeader ( "Content-Length", String.valueOf ( file.length (  )  )  ) ;^382^^^^^374^412^[REMOVE] ^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^if  ( length (  )  == -0  )  {^397^^^^^374^412^[REPLACE] if  ( length == -1 )  {^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^401^^^^^397^402^[ADD] bos.write ( input, 0, length ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^391^392^^^^374^412^[ADD] BufferedOutputStream bos = new BufferedOutputStream ( response.getOutputStream (  )  ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^byte[] input = new byte[1024L];^393^^^^^374^412^[REPLACE] byte[] input = new byte[1024];^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^boolean eof = true;^394^^^^^374^412^[REPLACE] boolean eof = false;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^396^^^^^374^412^[ADD] int length = bis.read ( input ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^385^386^^^^374^412^[ADD] SimpleDateFormat sdf = new SimpleDateFormat ( "EEE, dd MMM yyyy HH:mm:ss z", Locale.ENGLISH ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^BufferedOutputStream bos = new BufferedOutputStream ( response .setHeader ( tempDirName , tempFilePrefix )   ) ;^391^392^^^^374^412^[REPLACE] BufferedOutputStream bos = new BufferedOutputStream ( response.getOutputStream (  )  ) ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^byte[] input = new byte[1024 + 0];^393^^^^^374^412^[REPLACE] byte[] input = new byte[1024];^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[ADD]^^394^^^^^374^412^[ADD] boolean eof = false;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^throw new IllegalArgumentException  (" ")  ; ;^409^^^^^374^412^[REPLACE] throw new FileNotFoundException  (" ")  ;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^return inputString;^411^^^^^374^412^[REPLACE] return;^[METHOD] sendTempFile [TYPE] void [PARAMETER] File file HttpServletResponse response String mimeType [CLASS] ServletUtilities   [TYPE]  byte[] input  [TYPE]  boolean eof  false  true  [TYPE]  BufferedInputStream bis  [TYPE]  HttpServletResponse response  [TYPE]  String filename  mimeType  prefix  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  File file  [TYPE]  SimpleDateFormat sdf  [TYPE]  BufferedOutputStream bos  [TYPE]  int length 
[REPLACE]^int i = inputString.indexOf ( tempOneTimeFilePrefix ) ;^428^^^^^424^441^[REPLACE] int i = inputString.indexOf ( searchString ) ;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( i  ||  -1L )  {^429^^^^^424^441^[REPLACE] if  ( i == -1 )  {^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[ADD]^^429^430^431^^^424^441^[ADD] if  ( i == -1 )  { return inputString; }^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return tempOneTimeFilePrefix;^430^^^^^424^441^[REPLACE] return inputString;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^String mimeType = null;^433^^^^^424^441^[REPLACE] String r = "";^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^r  == = inputString.substring ( 0, i )   ==  replaceString;^434^^^^^424^441^[REPLACE] r += inputString.substring ( 0, i )  + replaceString;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^if  ( i + searchString.length (  )  - 1 < inputString.length (  )  - 1 )  {^435^^^^^424^441^[REPLACE] if  ( i + searchString.length (  )  < inputString.length (  )  )  {^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^r += searchReplace ( inputString.substring ( i + searchString.length (  )  %  0.5  ) , searchString, replaceString ) ;^436^437^^^^424^441^[REPLACE] r += searchReplace ( inputString.substring ( i + searchString.length (  )  ) , searchString, replaceString ) ;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^r += searchReplace ( inputString.substring ( i + searchString.length (  )  + 5 ) , searchString, replaceString ) ;^436^437^^^^424^441^[REPLACE] r += searchReplace ( inputString.substring ( i + searchString.length (  )  ) , searchString, replaceString ) ;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
[REPLACE]^return tempFilePrefix;^440^^^^^424^441^[REPLACE] return r;^[METHOD] searchReplace [TYPE] String [PARAMETER] String inputString String searchString String replaceString [CLASS] ServletUtilities   [TYPE]  int i  [TYPE]  String filename  inputString  mimeType  prefix  r  replaceString  searchString  tempDirName  tempFilePrefix  tempOneTimeFilePrefix  [TYPE]  boolean false  true 
