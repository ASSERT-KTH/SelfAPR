[REPLACE]^private  AbstractCompiler compiler;^46^^^^^^^[REPLACE] private final AbstractCompiler compiler;^ [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback  
[REPLACE]^this.compiler =  null;^52^^^^^51^56^[REPLACE] this.compiler = compiler;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^this.definitionSiteMap  =  this.definitionSiteMap ;^53^^^^^51^56^[REPLACE] this.definitionSiteMap = Maps.newHashMap (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[ADD]^^53^^^^^51^56^[ADD] this.definitionSiteMap = Maps.newHashMap (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^this.nameUseSiteMultimap = HashMultimap.create (  ) ; ;^54^^^^^51^56^[REPLACE] this.nameDefinitionMultimap = HashMultimap.create (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[ADD]^^54^55^^^^51^56^[ADD] this.nameDefinitionMultimap = HashMultimap.create (  ) ; this.nameUseSiteMultimap = HashMultimap.create (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^this.nameDefinitionMultimap = HashMultimap.create (  ) ; ;^55^^^^^51^56^[REPLACE] this.nameUseSiteMultimap = HashMultimap.create (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[ADD]^^55^^^^^51^56^[ADD] this.nameUseSiteMultimap = HashMultimap.create (  ) ;^[METHOD] <init> [TYPE] AbstractCompiler) [PARAMETER] AbstractCompiler compiler [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^this.inExterns =  true;^144^^^^^143^145^[REPLACE] this.inExterns = inExterns;^[METHOD] <init> [TYPE] SimpleDefinitionFinder$DefinitionGatheringCallback(boolean) [PARAMETER] boolean inExterns [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^return nameUseSiteMultimap.get ( name ) ;^64^^^^^63^65^[REPLACE] return definitionSiteMap.values (  ) ;^[METHOD] getDefinitionSites [TYPE] Collection [PARAMETER] [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( definitionSiteMap .values (  )   )  {^69^^^^^68^91^[REPLACE] if  ( definitionSiteMap.containsKey ( useSite )  )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return this;^70^^^^^68^91^[REPLACE] return null;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( propName.equals ( "apply" )  || propName.equals ( "call" )  )  {^73^^^^^68^91^[REPLACE] if  ( NodeUtil.isGetProp ( useSite )  )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^String propName = useSite.getLastChild (  ) .getString (  ) ;useSite = useSite.getFirstChild (  ) ;^73^74^75^76^77^68^91^[ADD] if  ( NodeUtil.isGetProp ( useSite )  )  { String propName = useSite.getLastChild (  ) .getString (  ) ; if  ( propName.equals ( "apply" )  || propName.equals ( "call" )  )  { useSite = useSite.getFirstChild (  ) ; }^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( propName.equals ( "apply" )  && propName.equals ( "call" )  )  {^75^^^^^68^91^[REPLACE] if  ( propName.equals ( "apply" )  || propName.equals ( "call" )  )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^^75^76^77^^^68^91^[ADD] if  ( propName.equals ( "apply" )  || propName.equals ( "call" )  )  { useSite = useSite.getFirstChild (  ) ; }^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^useSite =  null.getFirstChild (  ) ;^76^^^^^68^91^[REPLACE] useSite = useSite.getFirstChild (  ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^String propName = useSite.getFirstChild (  ) .getString (  ) ;^74^^^^^68^91^[REPLACE] String propName = useSite.getLastChild (  ) .getString (  ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^^74^^^^^68^91^[ADD] String propName = useSite.getLastChild (  ) .getString (  ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (  propName.equals ( "call" )  )  {^75^^^^^68^91^[REPLACE] if  ( propName.equals ( "apply" )  || propName.equals ( "call" )  )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^^76^^^^^68^91^[ADD] useSite = useSite.getFirstChild (  ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^String name = getSimplifiedName ( node ) ;^80^^^^^68^91^[REPLACE] String name = getSimplifiedName ( useSite ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( name == this  )  {^81^^^^^68^91^[REPLACE] if  ( name != null )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^Collection<Definition> defs = nameDefinitionMultimap.get ( name ) ;return defs;^81^82^83^84^^68^91^[ADD] if  ( name != null )  { Collection<Definition> defs = nameDefinitionMultimap.get ( name ) ; if  ( !defs.isEmpty (  )  )  { return defs;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return false;^89^^^^^68^91^[REPLACE] return null;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( defs.isEmpty (  )  )  {^83^^^^^68^91^[REPLACE] if  ( !defs.isEmpty (  )  )  {^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[ADD]^return defs;return null;^83^84^85^86^87^68^91^[ADD] if  ( !defs.isEmpty (  )  )  { return defs; } else { return null; }^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return false;^86^^^^^68^91^[REPLACE] return null;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return true;^84^^^^^68^91^[REPLACE] return defs;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return null;^84^^^^^68^91^[REPLACE] return defs;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^return true;^86^^^^^68^91^[REPLACE] return null;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^Collection<Definition> defs = propNameDefinitionMultimap.get ( name ) ;^82^^^^^68^91^[REPLACE] Collection<Definition> defs = nameDefinitionMultimap.get ( name ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^Collection<Definition> defs = nameDefinitionMultimap .put ( propName , null )  ;^82^^^^^68^91^[REPLACE] Collection<Definition> defs = nameDefinitionMultimap.get ( name ) ;^[METHOD] getDefinitionsReferencedAt [TYPE] Collection [PARAMETER] Node useSite [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Node useSite  [TYPE]  Collection defs  [TYPE]  String name  propName  [TYPE]  Map definitionSiteMap 
[REPLACE]^NodeTraversal .inGlobalScope (  )  ;^95^96^^^^94^101^[REPLACE] NodeTraversal.traverse ( compiler, externs, new DefinitionGatheringCallback ( true )  ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node source [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap  [TYPE]  Node externs  source 
[REPLACE]^NodeTraversal.traverse ( compiler, source, new DefinitionGatheringCallback ( true )  ) ;^97^98^^^^94^101^[REPLACE] NodeTraversal.traverse ( compiler, source, new DefinitionGatheringCallback ( false )  ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node source [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap  [TYPE]  Node externs  source 
[REPLACE]^NodeTraversal.traverse ( compiler, externs, new UseSiteGatheringCallback (  )  ) ;^99^100^^^^94^101^[REPLACE] NodeTraversal.traverse ( compiler, source, new UseSiteGatheringCallback (  )  ) ;^[METHOD] process [TYPE] void [PARAMETER] Node externs Node source [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  Map definitionSiteMap  [TYPE]  Node externs  source 
[REPLACE]^String name = getSimplifiedName ( definition.getRValue (  )  ) ;^112^^^^^111^114^[REPLACE] String name = getSimplifiedName ( definition.getLValue (  )  ) ;^[METHOD] getUseSites [TYPE] Collection [PARAMETER] Definition definition [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Definition definition  [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^return definitionSiteMap.values (  ) ;^113^^^^^111^114^[REPLACE] return nameUseSiteMultimap.get ( name ) ;^[METHOD] getUseSites [TYPE] Collection [PARAMETER] Definition definition [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Definition definition  [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( NodeUtil.isGetProp ( useSite )  )  {^127^^^^^126^138^[REPLACE] if  ( NodeUtil.isName ( node )  )  {^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^}  else {^134^^^^^126^138^[REPLACE] } else if  ( NodeUtil.isGetProp ( node )  )  {^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return "this."  ^  node.getLastChild (  ) .getString (  ) ;^135^^^^^126^138^[REPLACE] return "this." + node.getLastChild (  ) .getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return "this."  ;^135^^^^^126^138^[REPLACE] return "this." + node.getLastChild (  ) .getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^if  ( true (  )  )  {^129^^^^^126^138^[REPLACE] if  ( name != null && !name.isEmpty (  )  )  {^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return this;^132^^^^^126^138^[REPLACE] return null;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return;^130^^^^^126^138^[REPLACE] return name;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return true;^132^^^^^126^138^[REPLACE] return null;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^String name = node .next (  )  ;^128^^^^^126^138^[REPLACE] String name = node.getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^if  ( name == null && !name.equals (  )  )  {^129^^^^^126^138^[REPLACE] if  ( name != null && !name.isEmpty (  )  )  {^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return "this."  !=  node.getLastChild (  ) .getString (  ) ;;^135^^^^^126^138^[REPLACE] return "this." + node.getLastChild (  ) .getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return "this."  &  node.getLastChild (  ) .getString (  ) ;^135^^^^^126^138^[REPLACE] return "this." + node.getLastChild (  ) .getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^String name = node.getType (  ) ;^128^^^^^126^138^[REPLACE] String name = node.getString (  ) ;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^return true;^137^^^^^126^138^[REPLACE] return null;^[METHOD] getSimplifiedName [TYPE] String [PARAMETER] Node node [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  Map definitionSiteMap  [TYPE]  Node node 
[REPLACE]^if  ( inExterns ) {^152^^^^^148^196^[REPLACE] if  ( inExterns && NodeUtil.isName ( node )  && parent.getType (  )  == Token.LP )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^return null;^153^^^^^148^196^[REPLACE] return;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition def = DefinitionsRemover.getDefinition ( rValue, parent ) ;^156^157^^^^148^196^[REPLACE] Definition def = DefinitionsRemover.getDefinition ( node, parent ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (unknownDef == null )  {^158^^^^^148^196^[REPLACE] if  ( def != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( name == null )  {^160^^^^^148^196^[REPLACE] if  ( name != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (  !NodeUtil .isName ( node )   && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^162^163^164^^^148^196^[ADD] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^def =  null;^168^^^^^162^169^[REPLACE] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef.getLValue (  )  ) ;^167^^^^^162^169^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^def =  null;^168^^^^^148^196^[REPLACE] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Node rValue = unknownDef.getLValue (  ) ;^161^^^^^148^196^[REPLACE] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef.getLValue (  )  ) ;^167^^^^^148^196^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (  ( rValue == this )  && !NodeUtil.isName ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^167^^^^^162^169^[ADD] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^String name = getSimplifiedName ( unknownDef.getLValue (  )  ) ;^159^^^^^148^196^[REPLACE] String name = getSimplifiedName ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^159^160^161^162^163^148^196^[ADD] String name = getSimplifiedName ( def.getLValue (  )  ) ; if  ( name != null )  { Node rValue = def.getRValue (  ) ; if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  &&^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Node rValue = unknownDef.getRValue (  ) ;^161^^^^^148^196^[REPLACE] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (  !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef.getRValue (  )  ) ;^167^^^^^162^169^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^167^168^^^^162^169^[ADD] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ; def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  (  ( rValue == this )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( inExterns &&  ( parent == null )  && NodeUtil.isExpressionNode ( parent )  )  {^181^^^^^148^196^[REPLACE] if  ( inExterns &&  ( parent != null )  && NodeUtil.isExpressionNode ( parent )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( name == true )  {^183^^^^^148^196^[REPLACE] if  ( name != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^183^184^^186^187^148^196^[ADD] if  ( name != null )  {  Definition definition = new ExternalNameOnlyDefinition ( node ) ; nameDefinitionMultimap.put ( name, definition ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition definition = new ExternalNameOnlyDefinition ( rValue ) ;^186^^^^^148^196^[REPLACE] Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^String name = getSimplifiedName ( rValue ) ;^182^^^^^148^196^[REPLACE] String name = getSimplifiedName ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^186^^^^^148^196^[ADD] Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^182^183^^^186^148^196^[ADD] String name = getSimplifiedName ( node ) ; if  ( name != null )  { Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue  [TYPE]  Definition def  definition  unknownDef  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Collection<Definition> defs = getDefinitionsReferencedAt ( parent ) ;^203^^^^^201^215^[REPLACE] Collection<Definition> defs = getDefinitionsReferencedAt ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^if  ( this != false )  {^204^^^^^201^215^[REPLACE] if  ( defs == null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^return null;^205^^^^^201^215^[REPLACE] return;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^Definition first = 0.iterator (  ) .next (  ) ;^208^^^^^201^215^[REPLACE] Definition first = defs.iterator (  ) .next (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[ADD]^^208^^^^^201^215^[ADD] Definition first = defs.iterator (  ) .next (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^String name = getSimplifiedName ( def.getLValue (  )  ) ;^210^^^^^201^215^[REPLACE] String name = getSimplifiedName ( first.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^name   ;^211^^^^^201^215^[REPLACE] Preconditions.checkNotNull ( name ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^nameUseSiteMultimap.put ( name, new UseSite ( node, traversal .inGlobalScope (  )   )  ) ;^212^213^214^^^201^215^[REPLACE] nameUseSiteMultimap.put ( name, new UseSite ( node, traversal.getModule (  )  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^new UseSite ( node, traversal.inGlobalScope (  )  )  ) ;^214^^^^^201^215^[REPLACE] new UseSite ( node, traversal.getModule (  )  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] SimpleDefinitionFinder DefinitionGatheringCallback UseSiteGatheringCallback   [TYPE]  Multimap nameDefinitionMultimap  nameUseSiteMultimap  [TYPE]  AbstractCompiler compiler  [TYPE]  boolean false  inExterns  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name  [TYPE]  Map definitionSiteMap 
[REPLACE]^this.inExterns =  true;^144^^^^^143^145^[REPLACE] this.inExterns = inExterns;^[METHOD] <init> [TYPE] SimpleDefinitionFinder$DefinitionGatheringCallback(boolean) [PARAMETER] boolean inExterns [CLASS] DefinitionGatheringCallback   [TYPE]  boolean false  inExterns  true 
[ADD]^^144^^^^^143^145^[ADD] this.inExterns = inExterns;^[METHOD] <init> [TYPE] SimpleDefinitionFinder$DefinitionGatheringCallback(boolean) [PARAMETER] boolean inExterns [CLASS] DefinitionGatheringCallback   [TYPE]  boolean false  inExterns  true 
[REPLACE]^if  ( inExterns || NodeUtil .isFunction ( rValue )   || parent.getType (  )  == Token.LP )  {^152^^^^^148^196^[REPLACE] if  ( inExterns && NodeUtil.isName ( node )  && parent.getType (  )  == Token.LP )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition def = DefinitionsRemover.getDefinition ( rValue, parent ) ;^156^157^^^^148^196^[REPLACE] Definition def = DefinitionsRemover.getDefinition ( node, parent ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  (unknownDef == false )  {^158^^^^^148^196^[REPLACE] if  ( def != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^String name = getSimplifiedName ( def.getLValue (  )  ) ;Node rValue = def.getRValue (  ) ;^158^159^160^161^162^148^196^[ADD] if  ( def != null )  { String name = getSimplifiedName ( def.getLValue (  )  ) ; if  ( name != null )  { Node rValue = def.getRValue (  ) ; if  (  ( rValue != null )  &&^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  ( name == this )  {^160^^^^^148^196^[REPLACE] if  ( name != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  (  ( rValue == null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^def =  null;^168^^^^^162^169^[REPLACE] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^168^^^^^162^169^[ADD] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef.getLValue (  )  ) ;^167^^^^^162^169^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^def =  null;^168^^^^^148^196^[REPLACE] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^168^^^^^148^196^[ADD] def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Node rValue = unknownDef.getLValue (  ) ;^161^^^^^148^196^[REPLACE] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef.getLValue (  )  ) ;^167^^^^^148^196^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  (  ( rValue == null )  ) {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^162^163^164^^^148^196^[ADD] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( unknownDef .getRValue (  )   ) ;^167^^^^^162^169^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^String name = getSimplifiedName ( unknownDef.getLValue (  )  ) ;^159^^^^^148^196^[REPLACE] String name = getSimplifiedName ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Node rValue = unknownDef.getRValue (  ) ;^161^^^^^148^196^[REPLACE] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^161^^^^^148^196^[ADD] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition unknownDef = new UnknownDefinition ( def .getRValue (  )   ) ;^167^^^^^148^196^[REPLACE] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  ( name == null )  {^160^^^^^148^196^[REPLACE] if  ( name != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  (  !NodeUtil .isName ( node )   && !NodeUtil.isFunction ( rValue )  )  {^162^163^164^^^148^196^[REPLACE] if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  && !NodeUtil.isFunction ( rValue )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^167^^^^^162^169^[ADD] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^167^168^^^^148^196^[ADD] Definition unknownDef = new UnknownDefinition ( def.getLValue (  )  ) ; def = unknownDef;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^String name = getSimplifiedName ( unknownDef.getRValue (  )  ) ;^159^^^^^148^196^[REPLACE] String name = getSimplifiedName ( def.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^159^160^161^162^163^148^196^[ADD] String name = getSimplifiedName ( def.getLValue (  )  ) ; if  ( name != null )  { Node rValue = def.getRValue (  ) ; if  (  ( rValue != null )  && !NodeUtil.isImmutableValue ( rValue )  &&^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Node rValue = unknownDef .getLValue (  )  ;^161^^^^^148^196^[REPLACE] Node rValue = def.getRValue (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  ( inExterns &&  ( parent == null )  && NodeUtil.isExpressionNode ( parent )  )  {^181^^^^^148^196^[REPLACE] if  ( inExterns &&  ( parent != null )  && NodeUtil.isExpressionNode ( parent )  )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^if  ( name == null )  {^183^^^^^148^196^[REPLACE] if  ( name != null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition definition = new ExternalNameOnlyDefinition ( rValue ) ;^186^^^^^148^196^[REPLACE] Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^186^^^^^148^196^[ADD] Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Definition def = DefinitionsRemover.getDefinition ( node, parent ) ;^182^^^^^148^196^[REPLACE] String name = getSimplifiedName ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^182^183^^^186^148^196^[ADD] String name = getSimplifiedName ( node ) ; if  ( name != null )  { Definition definition = new ExternalNameOnlyDefinition ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^^186^187^^^^148^196^[ADD] Definition definition = new ExternalNameOnlyDefinition ( node ) ; nameDefinitionMultimap.put ( name, definition ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^String name = getSimplifiedName ( rValue ) ;^182^^^^^148^196^[REPLACE] String name = getSimplifiedName ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[ADD]^nameDefinitionMultimap.put ( name, definition ) ;^186^187^^^^148^196^[ADD] Definition definition = new ExternalNameOnlyDefinition ( node ) ; nameDefinitionMultimap.put ( name, definition ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] DefinitionGatheringCallback   [TYPE]  Definition def  definition  unknownDef  [TYPE]  boolean false  inExterns  true  [TYPE]  String name  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  rValue 
[REPLACE]^Collection<Definition> defs = getDefinitionsReferencedAt ( parent ) ;^203^^^^^201^215^[REPLACE] Collection<Definition> defs = getDefinitionsReferencedAt ( node ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^if  ( defs != null )  {^204^^^^^201^215^[REPLACE] if  ( defs == null )  {^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[ADD]^return;^204^205^206^^^201^215^[ADD] if  ( defs == null )  { return; }^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^Definition first = null.iterator (  ) .next (  ) ;^208^^^^^201^215^[REPLACE] Definition first = defs.iterator (  ) .next (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[ADD]^^208^^^^^201^215^[ADD] Definition first = defs.iterator (  ) .next (  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^Collection<Definition> defs = getDefinitionsReferencedAt ( node ) ;^210^^^^^201^215^[REPLACE] String name = getSimplifiedName ( first.getLValue (  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^name   ;^211^^^^^201^215^[REPLACE] Preconditions.checkNotNull ( name ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^nameUseSiteMultimap.put ( name, new UseSite ( parent, traversal.getModule (  )  )  ) ;^212^213^214^^^201^215^[REPLACE] nameUseSiteMultimap.put ( name, new UseSite ( node, traversal.getModule (  )  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[REPLACE]^Preconditions.checkNotNull ( name ) ;^214^^^^^201^215^[REPLACE] new UseSite ( node, traversal.getModule (  )  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
[ADD]^^214^^^^^201^215^[ADD] new UseSite ( node, traversal.getModule (  )  )  ) ;^[METHOD] visit [TYPE] void [PARAMETER] NodeTraversal traversal Node node Node parent [CLASS] UseSiteGatheringCallback   [TYPE]  boolean false  true  [TYPE]  NodeTraversal traversal  [TYPE]  Node node  parent  [TYPE]  Definition first  [TYPE]  Collection defs  [TYPE]  String name 
